(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{66:(a,b,c)=>{"use strict";c.d(b,{RM:()=>f,s8:()=>e});let d=new Set(Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401})),e="NEXT_HTTP_ERROR_FALLBACK";function f(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===e&&d.has(Number(c))}},107:(a,b,c)=>{"use strict";c.d(b,{t3:()=>i,wi:()=>o,I3:()=>l,Ui:()=>j,xI:()=>g,Pk:()=>h});var d=c(7814),e=c(6159);c(4979),c(1128),c(5379),c(5770),c(2340),c(9809);let f="function"==typeof d.unstable_postpone;function g(a,b,c){let d=Object.defineProperty(new e.F(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function h(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function i(a,b,c,d){if(!1===d.controller.signal.aborted){let e=n(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);d.controller.abort(e);let f=d.dynamicTracking;f&&f.dynamicAccesses.push({stack:f.isDebugDynamicAccesses?Error().stack:void 0,expression:b});let g=d.dynamicTracking;g&&null===g.syncDynamicErrorWithStack&&(g.syncDynamicErrorWithStack=c)}throw n(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function j(a,b,c){(function(){if(!f)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),d.unstable_postpone(k(a,b))}function k(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function l(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&m(a.message)}function m(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===m(k("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});function n(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest="NEXT_PRERENDER_INTERRUPTED",b}function o(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at __next_root_layout_boundary__ \\([^\\n]*\\)`),RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`)},236:function(a,b,c){var d,e;e=function(){return function(){var a;return a="object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments),function(a){var b=[];if(0===a.length)return"";if("string"!=typeof a[0])throw TypeError("Url must be a string. Received "+a[0]);if(a[0].match(/^[^/:]+:\/*$/)&&a.length>1){var c=a.shift();a[0]=c+a[0]}a[0].match(/^file:\/\/\//)?a[0]=a[0].replace(/^([^/:]+):\/*/,"$1:///"):a[0]=a[0].replace(/^([^/:]+):\/*/,"$1://");for(var d=0;d<a.length;d++){var e=a[d];if("string"!=typeof e)throw TypeError("Url must be a string. Received "+e);""!==e&&(d>0&&(e=e.replace(/^[\/]+/,"")),e=d<a.length-1?e.replace(/[\/]+$/,""):e.replace(/[\/]+$/,"/"),b.push(e))}var f=b.join("/"),g=(f=f.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return g.shift()+(g.length>0?"?":"")+g.join("&")}(a)}},a.exports?a.exports=e():void 0===(d=e.call(b,c,b,a))||(a.exports=d)},251:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(6218);b.default=function(a,b){return function(c){return async function(...f){let g,[h]=f,{routes:{login:i,callback:j}}=await a(new e.Auth0NextRequest(h)),{pathname:k,origin:l,search:m}=h.nextUrl,n=`${k}${m}`;if("function"==typeof c?g=c:c&&(g=c.middleware,n=("function"==typeof c.returnTo?await c.returnTo(h):c.returnTo)||n),[i,j,"/_next","/favicon.ico"].some(a=>k.startsWith(a)))return;let o=d.NextResponse.next(),p=await b.get(h,o);if(!(null==p?void 0:p.user))return k.startsWith("/api")?d.NextResponse.json({error:"not_authenticated",description:"The user does not have an active session or is not authenticated"},{status:401}):d.NextResponse.redirect(new URL(`${i}?returnTo=${encodeURIComponent(n)}`,l));let q=await (g&&g(...f));if(!q)return o;{let a=new d.NextResponse(q.body,q),b=o.cookies.getAll();if("cookies"in q)for(let b of q.cookies.getAll())a.cookies.set(b);for(let c of b)a.cookies.get(c.name)||a.cookies.set(c);return a}}}}},261:(a,b,c)=>{"use strict";c.d(b,{Ck:()=>h,EJ:()=>k,K8:()=>j,Xj:()=>l});var d=c(7028),e=c(4115),f=c(5379);class g extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new g}}class h{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return g.callable;default:return e.l.get(a,b,c)}}})}}let i=Symbol.for("next.mutated.cookies");class j{static wrap(a,b){let c=new d.VO(new Headers);for(let b of a.getAll())c.set(b);let g=[],h=new Set,j=()=>{let a=f.J.getStore();if(a&&(a.pathWasRevalidated=!0),g=c.getAll().filter(a=>h.has(a.name)),b){let a=[];for(let b of g){let c=new d.VO(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case i:return g;case"delete":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return e.l.get(a,b,c)}}});return k}}function k(a){let b=new Proxy(a.mutableCookies,{get(c,d,f){switch(d){case"delete":return function(...d){return m(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return m(a,"cookies().set"),c.set(...d),b};default:return e.l.get(c,d,f)}}});return b}function l(a){return"action"===a.phase}function m(a,b){if(!l(a))throw new g}},388:(a,b,c)=>{"use strict";c.d(b,{R:()=>k});var d=c(7028),e=c(4700),f=c(6206),g=c(4115);let h=Symbol("internal response"),i=new Set([301,302,303,307,308]);function j(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class k extends Response{constructor(a,b={}){super(a,b);let c=this.headers,i=new Proxy(new d.VO(c),{get(a,e,f){switch(e){case"delete":case"set":return(...f)=>{let g=Reflect.apply(a[e],a,f),h=new Headers(c);return g instanceof d.VO&&c.set("x-middleware-set-cookie",g.getAll().map(a=>(0,d.Ud)(a)).join(",")),j(b,h),g};default:return g.l.get(a,e,f)}}});this[h]={cookies:i,url:b.url?new e.X(b.url,{headers:(0,f.Cu)(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[h].cookies}static json(a,b){let c=Response.json(a,b);return new k(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!i.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",(0,f.qU)(a)),new k(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",(0,f.qU)(a)),j(b,c),new k(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),j(a,b),new k(null,{...a,headers:b})}}},667:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.AbstractClient=b.deleteSub=b.isLoggedOut=b.backchannelLogoutHandler=b.callbackHandler=b.logoutHandler=b.loginHandler=b.getConfig=b.TransientStore=b.StatefulSession=b.AbstractSession=b.StatelessSession=b.ApplicationError=b.IdentityProviderError=b.MalformedStateCookieError=b.MissingStateCookieError=b.MissingStateParamError=void 0;var e=c(1524);Object.defineProperty(b,"MissingStateParamError",{enumerable:!0,get:function(){return e.MissingStateParamError}}),Object.defineProperty(b,"MissingStateCookieError",{enumerable:!0,get:function(){return e.MissingStateCookieError}}),Object.defineProperty(b,"MalformedStateCookieError",{enumerable:!0,get:function(){return e.MalformedStateCookieError}}),Object.defineProperty(b,"IdentityProviderError",{enumerable:!0,get:function(){return e.IdentityProviderError}}),Object.defineProperty(b,"ApplicationError",{enumerable:!0,get:function(){return e.ApplicationError}});var f=c(8401);Object.defineProperty(b,"StatelessSession",{enumerable:!0,get:function(){return f.StatelessSession}});var g=c(9437);Object.defineProperty(b,"AbstractSession",{enumerable:!0,get:function(){return g.AbstractSession}});var h=c(1607);Object.defineProperty(b,"StatefulSession",{enumerable:!0,get:function(){return h.StatefulSession}});var i=c(9513);Object.defineProperty(b,"TransientStore",{enumerable:!0,get:function(){return d(i).default}});var j=c(4208);Object.defineProperty(b,"getConfig",{enumerable:!0,get:function(){return j.get}});var k=c(7622);Object.defineProperty(b,"loginHandler",{enumerable:!0,get:function(){return d(k).default}});var l=c(7399);Object.defineProperty(b,"logoutHandler",{enumerable:!0,get:function(){return d(l).default}});var m=c(700);Object.defineProperty(b,"callbackHandler",{enumerable:!0,get:function(){return d(m).default}});var n=c(8636);Object.defineProperty(b,"backchannelLogoutHandler",{enumerable:!0,get:function(){return d(n).default}}),Object.defineProperty(b,"isLoggedOut",{enumerable:!0,get:function(){return n.isLoggedOut}}),Object.defineProperty(b,"deleteSub",{enumerable:!0,get:function(){return n.deleteSub}});var o=c(8277);Object.defineProperty(b,"AbstractClient",{enumerable:!0,get:function(){return o.AbstractClient}})},700:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613).__importDefault(c(236)),e=c(2386),f=c(1524);b.default=function(a,b,c,g){let h="function"==typeof a?a:()=>a;return async(a,i,j)=>{let k,l,m,n=await h(a),o=await b(n),p=(null==j?void 0:j.redirectUri)||(0,d.default)(n.baseURL,n.routes.callback),q=await g.read(n.transactionCookie.name,a,i);if(!q)throw new f.MissingStateCookieError;try{l=JSON.parse(q)}catch(a){throw new f.MalformedStateCookieError}let{max_age:r,code_verifier:s,nonce:t,state:u,response_type:v=n.authorizationParams.response_type}=l;try{m=await o.callbackParams(a,u)}catch(a){throw a.status=400,a.statusCode=400,a.openIdState=(0,e.decodeState)(u),a}if(!m.get("state"))throw new f.MissingStateParamError;try{k=await o.callback(p,m,{max_age:void 0!==r?+r:void 0,code_verifier:s,nonce:t,state:u,response_type:v},{exchangeBody:null==j?void 0:j.authorizationParams})}catch(a){throw a.status=400,a.statusCode=400,a.openIdState=(0,e.decodeState)(u),a}let w=(0,e.decodeState)(u),x=await c.fromTokenEndpointResponse(a,i,k);(null==j?void 0:j.afterCallback)&&(x=await j.afterCallback(x,w)),x&&await c.create(a.req,i.res,x),i.redirect(w.returnTo||n.baseURL)}}},991:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613),e=c(1509);b.default=function({handleLogin:a,handleLogout:b,handleCallback:c,handleProfile:h,handleBackchannelLogout:i}){return (j={})=>{var{onError:k}=j,l=d.__rest(j,["onError"]);let m=Object.assign({login:a,logout:b,callback:c,"backchannel-logout":i,me:l.profile||h},l),n=f(m,k),o=g(m,k);return(a,b)=>(0,e.isRequest)(a)?n(a,b):o(a,b)}};let f=(a,b)=>async(c,d)=>{let{params:e}=d,f=e.auth0;if(Array.isArray(f)){let a;if([f,...a]=f,a.length)return new Response(null,{status:404})}let g=f&&a.hasOwnProperty(f)&&a[f];try{if(g)return await g(c,d);return new Response(null,{status:404})}catch(a){return await (b||((a,b)=>{console.error(b)}))(c,a)||new Response(null,{status:a.status||500})}},g=(a,b)=>async(c,d)=>{let{query:{auth0:e}}=c;if(Array.isArray(e)){let a;if([e,...a]=e,a.length)return void d.status(404).end()}try{let b=e&&a.hasOwnProperty(e)&&a[e];b?await b(c,d):d.status(404).end()}catch(a){await (b||((a,b,c)=>{console.error(c),b.status(c.status||500).end()}))(c,d,a),d.writableEnded||d.status(200===d.statusCode?500:d.statusCode).end()}}},1128:(a,b,c)=>{"use strict";c.d(b,{lW:()=>f,M1:()=>e,FP:()=>d});let d=(0,c(2058).xl)();function e(a){throw Object.defineProperty(Error(`\`${a}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`),"__NEXT_ERROR_CODE",{value:"E251",enumerable:!1,configurable:!0})}function f(a,b){if(a.isDraftMode)switch(b.type){case"cache":case"private-cache":case"unstable-cache":case"prerender-runtime":case"request":return b.draftMode}}},1213:a=>{(()=>{"use strict";var b={993:a=>{var b=Object.prototype.hasOwnProperty,c="~";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,d,f,g){if("function"!=typeof d)throw TypeError("The listener must be a function");var h=new e(d,f||a,g),i=c?c+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function g(a,b){0==--a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(c=!1)),h.prototype.eventNames=function(){var a,d,e=[];if(0===this._eventsCount)return e;for(d in a=this._events)b.call(a,d)&&e.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e},h.prototype.listeners=function(a){var b=c?c+a:a,d=this._events[b];if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=Array(f);e<f;e++)g[e]=d[e].fn;return g},h.prototype.listenerCount=function(a){var b=c?c+a:a,d=this._events[b];return d?d.fn?1:d.length:0},h.prototype.emit=function(a,b,d,e,f,g){var h=c?c+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,d),!0;case 4:return k.fn.call(k.context,b,d,e),!0;case 5:return k.fn.call(k.context,b,d,e,f),!0;case 6:return k.fn.call(k.context,b,d,e,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,d);break;case 4:k[j].fn.call(k[j].context,b,d,e);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,d,e){var f=c?c+a:a;if(!this._events[f])return this;if(!b)return g(this,f),this;var h=this._events[f];if(h.fn)h.fn!==b||e&&!h.once||d&&h.context!==d||g(this,f);else{for(var i=0,j=[],k=h.length;i<k;i++)(h[i].fn!==b||e&&!h[i].once||d&&h[i].context!==d)&&j.push(h[i]);j.length?this._events[f]=1===j.length?j[0]:j:g(this,f)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=c?c+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=c,h.EventEmitter=h,a.exports=h},213:a=>{a.exports=(a,b)=>(b=b||(()=>{}),a.then(a=>new Promise(a=>{a(b())}).then(()=>a),a=>new Promise(a=>{a(b())}).then(()=>{throw a})))},574:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c){let d=0,e=a.length;for(;e>0;){let f=e/2|0,g=d+f;0>=c(a[g],b)?(d=++g,e-=f+1):e=f}return d}},821:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0});let d=c(574);class e{constructor(){this._queue=[]}enqueue(a,b){let c={priority:(b=Object.assign({priority:0},b)).priority,run:a};if(this.size&&this._queue[this.size-1].priority>=b.priority)return void this._queue.push(c);let e=d.default(this._queue,c,(a,b)=>b.priority-a.priority);this._queue.splice(e,0,c)}dequeue(){let a=this._queue.shift();return null==a?void 0:a.run}filter(a){return this._queue.filter(b=>b.priority===a.priority).map(a=>a.run)}get size(){return this._queue.length}}b.default=e},816:(a,b,c)=>{let d=c(213);class e extends Error{constructor(a){super(a),this.name="TimeoutError"}}let f=(a,b,c)=>new Promise((f,g)=>{if("number"!=typeof b||b<0)throw TypeError("Expected `milliseconds` to be a positive number");if(b===1/0)return void f(a);let h=setTimeout(()=>{if("function"==typeof c){try{f(c())}catch(a){g(a)}return}let d="string"==typeof c?c:`Promise timed out after ${b} milliseconds`,h=c instanceof Error?c:new e(d);"function"==typeof a.cancel&&a.cancel(),g(h)},b);d(a.then(f,g),()=>{clearTimeout(h)})});a.exports=f,a.exports.default=f,a.exports.TimeoutError=e}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a](f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab="//";var e={};(()=>{Object.defineProperty(e,"__esModule",{value:!0});let a=d(993),b=d(816),c=d(821),f=()=>{},g=new b.TimeoutError;class h extends a{constructor(a){var b,d,e,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=f,this._resolveIdle=f,!("number"==typeof(a=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:c.default},a)).intervalCap&&a.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(d=null==(b=a.intervalCap)?void 0:b.toString())?d:""}\` (${typeof a.intervalCap})`);if(void 0===a.interval||!(Number.isFinite(a.interval)&&a.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(g=null==(e=a.interval)?void 0:e.toString())?g:""}\` (${typeof a.interval})`);this._carryoverConcurrencyCount=a.carryoverConcurrencyCount,this._isIntervalIgnored=a.intervalCap===1/0||0===a.interval,this._intervalCap=a.intervalCap,this._interval=a.interval,this._queue=new a.queueClass,this._queueClass=a.queueClass,this.concurrency=a.concurrency,this._timeout=a.timeout,this._throwOnTimeout=!0===a.throwOnTimeout,this._isPaused=!1===a.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=f,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=f,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let a=Date.now();if(void 0===this._intervalId){let b=this._intervalEnd-a;if(!(b<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},b)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let a=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let b=this._queue.dequeue();return!!b&&(this.emit("active"),b(),a&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(a){if(!("number"==typeof a&&a>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${a}\` (${typeof a})`);this._concurrency=a,this._processQueue()}async add(a,c={}){return new Promise((d,e)=>{let f=async()=>{this._pendingCount++,this._intervalCount++;try{let f=void 0===this._timeout&&void 0===c.timeout?a():b.default(Promise.resolve(a()),void 0===c.timeout?this._timeout:c.timeout,()=>{(void 0===c.throwOnTimeout?this._throwOnTimeout:c.throwOnTimeout)&&e(g)});d(await f)}catch(a){e(a)}this._next()};this._queue.enqueue(f,c),this._tryToStartAnother(),this.emit("add")})}async addAll(a,b){return Promise.all(a.map(async a=>this.add(a,b)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(a=>{let b=this._resolveEmpty;this._resolveEmpty=()=>{b(),a()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(a=>{let b=this._resolveIdle;this._resolveIdle=()=>{b(),a()}})}get size(){return this._queue.size}sizeBy(a){return this._queue.filter(a).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(a){this._timeout=a}}e.default=h})(),a.exports=e})()},1239:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.setIsUsingOwnInstance=b.setIsUsingNamedExports=void 0;let c=!1,d=!1,e=()=>{if(c&&d)throw Error("You cannot mix creating your own instance with `initAuth0` and using named exports like `import { handleAuth } from '@auth0/nextjs-auth0'`")};b.setIsUsingNamedExports=()=>{c=!0,e()},b.setIsUsingOwnInstance=()=>{d=!0,e()}},1252:(a,b)=>{"use strict";function c(a,b){if(!b)return a;let c=a.endsWith(".")?"":".";return`${a}${c} CAUSE: ${b.message}`}Object.defineProperty(b,"__esModule",{value:!0}),b.ProfileHandlerError=b.LogoutHandlerError=b.LoginHandlerError=b.CallbackHandlerError=b.HandlerError=b.AccessTokenError=b.AccessTokenErrorCode=b.AuthError=b.appendCause=void 0,b.appendCause=c;class d extends Error{constructor(a){super(c(a.message,a.cause)),this.code=a.code,this.name=a.name,this.cause=a.cause,this.status=a.status}}b.AuthError=d,function(a){a.MISSING_SESSION="ERR_MISSING_SESSION",a.MISSING_ACCESS_TOKEN="ERR_MISSING_ACCESS_TOKEN",a.MISSING_REFRESH_TOKEN="ERR_MISSING_REFRESH_TOKEN",a.EXPIRED_ACCESS_TOKEN="ERR_EXPIRED_ACCESS_TOKEN",a.INSUFFICIENT_SCOPE="ERR_INSUFFICIENT_SCOPE",a.FAILED_REFRESH_GRANT="ERR_FAILED_REFRESH_GRANT"}(b.AccessTokenErrorCode||(b.AccessTokenErrorCode={}));class e extends d{constructor(a,b,c){super({code:a,message:b,name:"AccessTokenError",cause:c}),Error.captureStackTrace(this,this.constructor),Object.setPrototypeOf(this,e.prototype)}}b.AccessTokenError=e;class f extends d{constructor(a){let b;"status"in a.cause&&(b=a.cause.status),super(Object.assign(Object.assign({},a),{status:b}))}}b.HandlerError=f;class g extends f{constructor(a){super({code:g.code,message:"Callback handler failed.",name:"CallbackHandlerError",cause:a}),Object.setPrototypeOf(this,g.prototype)}}b.CallbackHandlerError=g,g.code="ERR_CALLBACK_HANDLER_FAILURE";class h extends f{constructor(a){super({code:h.code,message:"Login handler failed.",name:"LoginHandlerError",cause:a}),Object.setPrototypeOf(this,h.prototype)}}b.LoginHandlerError=h,h.code="ERR_LOGIN_HANDLER_FAILURE";class i extends f{constructor(a){super({code:i.code,message:"Logout handler failed.",name:"LogoutHandlerError",cause:a}),Object.setPrototypeOf(this,i.prototype)}}b.LogoutHandlerError=i,i.code="ERR_LOGOUT_HANDLER_FAILURE";class j extends f{constructor(a){super({code:j.code,message:"Profile handler failed.",name:"ProfileHandlerError",cause:a}),Object.setPrototypeOf(this,j.prototype)}}b.ProfileHandlerError=j,j.code="ERR_PROFILE_HANDLER_FAILURE"},1302:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.updateSessionFactory=b.touchSessionFactory=b.set=b.get=b.SessionCache=b.accessTokenFactory=b.sessionFactory=b.fromTokenEndpointResponse=b.fromJson=b.Session=void 0;var e=c(5194);Object.defineProperty(b,"Session",{enumerable:!0,get:function(){return d(e).default}}),Object.defineProperty(b,"fromJson",{enumerable:!0,get:function(){return e.fromJson}}),Object.defineProperty(b,"fromTokenEndpointResponse",{enumerable:!0,get:function(){return e.fromTokenEndpointResponse}});var f=c(9841);Object.defineProperty(b,"sessionFactory",{enumerable:!0,get:function(){return d(f).default}});var g=c(1383);Object.defineProperty(b,"accessTokenFactory",{enumerable:!0,get:function(){return d(g).default}});var h=c(3364);Object.defineProperty(b,"SessionCache",{enumerable:!0,get:function(){return d(h).default}}),Object.defineProperty(b,"get",{enumerable:!0,get:function(){return h.get}}),Object.defineProperty(b,"set",{enumerable:!0,get:function(){return h.set}});var i=c(2564);Object.defineProperty(b,"touchSessionFactory",{enumerable:!0,get:function(){return d(i).default}});var j=c(2892);Object.defineProperty(b,"updateSessionFactory",{enumerable:!0,get:function(){return d(j).default}})},1378:(a,b,c)=>{"use strict";c.d(b,{Q:()=>d});var d=function(a){return a[a.SeeOther=303]="SeeOther",a[a.TemporaryRedirect=307]="TemporaryRedirect",a[a.PermanentRedirect=308]="PermanentRedirect",a}({})},1383:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(1252),e=c(3282),f=c(1302),g=c(3364),h=c(6218);b.default=function(a,b,c){return async(i,j,k)=>{let l=j?k:i,m=j?i:void 0,n=await a(m?(0,g.getAuth0ReqRes)(m,j)[0]:new h.Auth0NextRequestCookies),o=await b(n),p=await (0,f.get)({sessionCache:c,req:m,res:j}),[q]=p,[,r]=p;if(!q)throw new d.AccessTokenError(d.AccessTokenErrorCode.MISSING_SESSION,"The user does not have a valid session.");if(!q.accessToken&&!q.refreshToken)throw new d.AccessTokenError(d.AccessTokenErrorCode.MISSING_ACCESS_TOKEN,"The user does not have a valid access token.");if(!q.accessTokenExpiresAt)throw new d.AccessTokenError(d.AccessTokenErrorCode.EXPIRED_ACCESS_TOKEN,"Expiration information for the access token is not available. The user will need to sign in again.");if(l&&l.scopes){let a=q.accessTokenScope;if(!a||0===a.length)throw new d.AccessTokenError(d.AccessTokenErrorCode.INSUFFICIENT_SCOPE,"An access token with the requested scopes could not be provided. The user will need to sign in again.");let b=(0,e.intersect)(l.scopes,a.split(" "));if(!(0,e.match)(l.scopes,[...b]))throw new d.AccessTokenError(d.AccessTokenErrorCode.INSUFFICIENT_SCOPE,`Could not retrieve an access token with scopes "${l.scopes.join(" ")}". The user will need to sign in again.`)}if(!q.refreshToken&&1e3*q.accessTokenExpiresAt-6e4<Date.now())throw new d.AccessTokenError(d.AccessTokenErrorCode.EXPIRED_ACCESS_TOKEN,"The access token expired and a refresh token is not available. The user will need to sign in again.");if((null==l?void 0:l.refresh)&&!q.refreshToken)throw new d.AccessTokenError(d.AccessTokenErrorCode.MISSING_REFRESH_TOKEN,"A refresh token is required to refresh the access token, but none is present.");if(q.refreshToken&&1e3*q.accessTokenExpiresAt-6e4<Date.now()||q.refreshToken&&l&&l.refresh){let a=await o.refresh(q.refreshToken,{exchangeBody:null==l?void 0:l.authorizationParams}),b=(0,f.fromTokenEndpointResponse)(a,n);return Object.assign(q,Object.assign(Object.assign({},b),{refreshToken:b.refreshToken||q.refreshToken,user:Object.assign(Object.assign({},q.user),b.user)})),(null==l?void 0:l.afterRefresh)&&(q=m?await l.afterRefresh(m,j,q):await l.afterRefresh(q)),await (0,f.set)({sessionCache:c,req:m,res:j,session:q,iat:r}),{accessToken:a.access_token}}if(!q.accessToken)throw new d.AccessTokenError(d.AccessTokenErrorCode.MISSING_ACCESS_TOKEN,"The user does not have a valid access token.");return{accessToken:q.accessToken}}}},1458:(a,b,c)=>{"use strict";c.d(b,{o:()=>f});var d=c(4115);class e extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new e}}class f extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,e){if("symbol"==typeof c)return d.l.get(b,c,e);let f=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===f);if(void 0!==g)return d.l.get(b,g,e)},set(b,c,e,f){if("symbol"==typeof c)return d.l.set(b,c,e,f);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return d.l.set(b,h??c,e,f)},has(b,c){if("symbol"==typeof c)return d.l.has(b,c);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);return void 0!==f&&d.l.has(b,f)},deleteProperty(b,c){if("symbol"==typeof c)return d.l.deleteProperty(b,c);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);return void 0===f||d.l.deleteProperty(b,f)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return e.callable;default:return d.l.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new f(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},1509:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isNextApiRequest=b.isRequest=void 0,b.isRequest=a=>a instanceof Request||a.headers instanceof Headers||"boolean"==typeof a.bodyUsed,b.isNextApiRequest=a=>!(0,b.isRequest)(a)&&"query"in a},1524:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.htmlSafe=b.BackchannelLogoutError=b.UserInfoError=b.DiscoveryError=b.IdentityProviderError=b.ApplicationError=b.MissingStateCookieError=b.MalformedStateCookieError=b.MissingStateParamError=b.EscapedError=void 0;class c extends Error{constructor(a){super(l(a)),Object.setPrototypeOf(this,c.prototype)}}b.EscapedError=c;class d extends Error{constructor(){super(d.message),this.status=400,this.statusCode=400,Object.setPrototypeOf(this,d.prototype)}}b.MissingStateParamError=d,d.message="Missing state parameter in Authorization Response.";class e extends Error{constructor(){super(e.message),this.status=400,this.statusCode=400,Object.setPrototypeOf(this,e.prototype)}}b.MalformedStateCookieError=e,e.message="Your state cookie is not valid JSON.";class f extends Error{constructor(){super(f.message),this.status=400,this.statusCode=400,Object.setPrototypeOf(this,f.prototype)}}b.MissingStateCookieError=f,f.message="Missing state cookie from login request (check login URL, callback URL and cookie config).";class g extends c{constructor(a){super(a.message),Object.setPrototypeOf(this,g.prototype)}}b.ApplicationError=g;class h extends c{constructor(a){super(a.message),this.error=l(a.error),this.errorDescription=l(a.error_description),Object.setPrototypeOf(this,h.prototype)}}b.IdentityProviderError=h;class i extends c{constructor(a,b){super(`Discovery requests failing for ${b}, ${a.message}`),Object.setPrototypeOf(this,i.prototype)}}b.DiscoveryError=i;class j extends c{constructor(a){super(`Userinfo request failing with: ${a}`),Object.setPrototypeOf(this,j.prototype)}}b.UserInfoError=j;class k extends Error{constructor(a,b){super(b),this.code=a,this.description=b,Object.setPrototypeOf(this,k.prototype)}}function l(a){return a&&a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}b.BackchannelLogoutError=k,b.htmlSafe=l},1550:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(1302),f=c(6663),g=c(1252),h=c(9178),i=c(6218);b.default=function(a,b,c,d){let e=j(a,b,c,d),f=k(a,b,c,d);return(0,h.getHandler)(e,f)};let j=(a,b,c,f)=>async(h,j,k={})=>{try{let g=await a(new i.Auth0NextRequest(h)),j=await b(g),l=new d.NextResponse;if(!await f.isAuthenticated(h,l)){let a=new d.NextResponse(null,{status:204});return l.headers.forEach((b,c)=>a.headers.set(c,b)),a}let m=await f.get(h,l);if(l.headers.set("Cache-Control","no-store"),k.refetch){let{accessToken:a}=await c(h,l);if(!a)throw Error("No access token available to refetch the profile");let b=await j.userinfo(a),g=(0,e.fromJson)(Object.assign(Object.assign({},m),{user:Object.assign(Object.assign({},m.user),b)}));return k.afterRefetch&&(g=await k.afterRefetch(h,g)),await f.set(h,l,g),d.NextResponse.json(g.user,l)}return d.NextResponse.json(m.user,l)}catch(a){throw new g.ProfileHandlerError(a)}},k=(a,b,c,d)=>async(h,j,k={})=>{try{(0,f.assertReqRes)(h,j);let g=await a(new i.Auth0NextApiRequest(h)),l=await b(g);if(!await d.isAuthenticated(h,j))return void j.status(204).end();let m=await d.get(h,j);if(j.setHeader("Cache-Control","no-store"),k.refetch){let{accessToken:a}=await c(h,j);if(!a)throw Error("No access token available to refetch the profile");let b=await l.userinfo(a),f=(0,e.fromJson)(Object.assign(Object.assign({},m),{user:Object.assign(Object.assign({},m.user),b)}));k.afterRefetch&&(f=await k.afterRefetch(h,j,f)),await d.set(h,j,f),j.json(f.user);return}j.json(m.user)}catch(a){throw new g.ProfileHandlerError(a)}}},1583:(a,b,c)=>{"use strict";c.d(b,{CB:()=>d,Yq:()=>e,l_:()=>f});class d extends Error{constructor({page:a}){super(`The middleware "${a}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class e extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class f extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},1607:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StatefulSession=void 0;let d=c(7613).__importDefault(c(2252)),e=c(9437),f=c(1931),g=c(2312),h=(0,d.default)("stateful-session");class i extends e.AbstractSession{async getStore(a){return this.store||(this.store=a.session.store),this.store}async getKeys(a){if(!this.keys){let b=a.secret,c=Array.isArray(b)?b:[b];this.keys=await Promise.all(c.map(g.signing))}return this.keys}async getSession(a){let b=await this.getConfig(a),{name:c}=b.session,d=a.getCookies(),e=await this.getKeys(b),g=await (0,f.getCookieValue)(c,d[c],e);if(g){let a=await this.getStore(b);return h("reading session from %s store",g),a.get(g)}}async setSession(a,b,c,d,e,g,i,j){let k=await this.getConfig(a),l=await this.getStore(k),{name:m,genId:n}=k.session,o=a.getCookies(),p=await this.getKeys(k),q=await (0,f.getCookieValue)(m,o[m],p);q&&j&&(h("regenerating session id %o to prevent session fixation",q),await l.delete(q),q=void 0),q||h("generated new session id %o",q=await n(a,c)),h("set session %o",q);let r=await (0,f.generateCookieValue)(m,q,p[0]);b.setCookie(m,r,i),await l.set(q,{header:{iat:e,uat:d,exp:g},data:c})}async deleteSession(a,b,c){let d=await this.getConfig(a),{name:e}=d.session,g=a.getCookies(),i=await this.getKeys(d),j=await (0,f.getCookieValue)(e,g[e],i);if(j){let a=await this.getStore(d);h("deleting session %o",j),b.clearCookie(e,c),await a.delete(j)}}}b.StatefulSession=i},1862:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(1302),e=c(6663),f=c(6218),g=c(4970);b.default=function(a,b){let c=h(a,b),d=i(a,b);return(a,b)=>"function"==typeof a?c(a,b):d(a)};let h=(a,b)=>(e,g={})=>async h=>{let{routes:{login:i}}=await a(new f.Auth0NextRequestCookies),[j]=await (0,d.get)({sessionCache:b});if(!(null==j?void 0:j.user)){let a="function"==typeof g.returnTo?await g.returnTo(h):g.returnTo,{redirect:b}=c(8012);b(`${i}${g.returnTo?`?returnTo=${a}`:""}`)}return e(h)},i=(a,b)=>({getServerSideProps:c,returnTo:d}={})=>async f=>{(0,e.assertCtx)(f);let{routes:{login:h}}=await a(new g.NodeRequest(f.req)),i=await b.get(f.req,f.res);if(!(null==i?void 0:i.user))return{redirect:{destination:`${h}?returnTo=${encodeURIComponent(d||f.resolvedUrl)}`,permanent:!1}};let j={props:{}};return(c&&(j=await c(f)),j.props instanceof Promise)?Object.assign(Object.assign({},j),{props:j.props.then(a=>Object.assign({user:i.user},a))}):Object.assign(Object.assign({},j),{props:Object.assign({user:i.user},j.props)})}},1931:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateCookieValue=b.getCookieValue=void 0;let d=c(7613).__importStar(c(2743));b.getCookieValue=async(a,b,c)=>{if(!b)return;let[e,f]=b.split("."),g={protected:d.base64url.encode(JSON.stringify({alg:"HS256",b64:!1,crit:["b64"]})),payload:`${a}=${e}`,signature:f};for(let a of c)try{return await d.flattenedVerify(g,a,{algorithms:["HS256"]}),e}catch(a){}},b.generateCookieValue=async(a,b,c)=>{let{signature:e}=await new d.FlattenedSign(new TextEncoder().encode(`${a}=${b}`)).setProtectedHeader({alg:"HS256",b64:!1,crit:["b64"]}).sign(c);return`${b}.${e}`}},2058:(a,b,c)=>{"use strict";c.d(b,{xl:()=>g});let d=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class e{disable(){throw d}getStore(){}run(){throw d}exit(){throw d}enterWith(){throw d}static bind(a){return a}}let f="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function g(){return f?new f:new e}},2252:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613).__importDefault(c(3720));b.default=a=>(0,d.default)("nextjs-auth0").extend(a)},2300:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(6663),f=c(1252),g=c(6218),h=c(9178);b.default=function(a,b){let c=j(a,b),d=k(a,b);return(0,h.getHandler)(c,d)};let i=(a,b,c,d)=>{let e=Object.assign({},c);return Object.assign(Object.assign({},e),{afterCallback:((c,d)=>(e,f)=>{if(d)if(d.startsWith("org_")){if(!e.user.org_id)throw Error("Organization Id (org_id) claim must be a string present in the ID token");if(e.user.org_id!==d)throw Error(`Organization Id (org_id) claim value mismatch in the ID token; expected "${d}", found "${e.user.org_id}"`)}else{if(!e.user.org_name)throw Error("Organization Name (org_name) claim must be a string present in the ID token");if(e.user.org_name!==d.toLowerCase())throw Error(`Organization Name (org_name) claim value mismatch in the ID token; expected "${d}", found "${e.user.org_name}"`)}if(c)if(b)return c(a,b,e,f);else return c(a,e,f);return e})(e.afterCallback,e.organization||d.organization)})},j=(a,b)=>async(c,e,h={})=>{try{let e=new g.Auth0NextRequest(c),f=await b(e),j=new g.Auth0NextResponse(new d.NextResponse);return await a(e,j,i(c,void 0,h,f)),j.res}catch(a){throw new f.CallbackHandlerError(a)}},k=(a,b)=>async(c,d,h={})=>{try{let f=new g.Auth0NextApiRequest(c),j=await b(f);return(0,e.assertReqRes)(c,d),await a(f,new g.Auth0NextApiResponse(d),i(c,d,h,j))}catch(a){throw new f.CallbackHandlerError(a)}}},2312:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.signing=b.encryption=void 0;let d=c(7613).__importDefault(c(6153)),e="sha256";b.encryption=a=>(0,d.default)(e,a,"","JWE CEK",32),b.signing=a=>(0,d.default)(e,a,"","JWS Cookie Signing",32)},2340:(a,b,c)=>{"use strict";function d(a){return"object"==typeof a&&null!==a&&"digest"in a&&"BAILOUT_TO_CLIENT_SIDE_RENDERING"===a.digest}c.d(b,{C:()=>d})},2386:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decodeState=b.encodeState=void 0;let d=c(7613),e=d.__importStar(c(2743));b.encodeState=function(a){let{nonce:b,code_verifier:c,max_age:f}=a,g=d.__rest(a,["nonce","code_verifier","max_age"]);return e.base64url.encode(JSON.stringify(g))},b.decodeState=function(a){try{return JSON.parse(new TextDecoder().decode(e.base64url.decode(a)))}catch(a){return}}},2564:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(1302);b.default=function(a){return async(b,c)=>{let[e,f]=await (0,d.get)({sessionCache:a,req:b,res:c});e&&await (0,d.set)({req:b,res:c,session:e,sessionCache:a,iat:f})}}},2634:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}c.r(b),c.d(b,{ImageResponse:()=>d,NextRequest:()=>f.J,NextResponse:()=>g.R,URLPattern:()=>l,after:()=>n,connection:()=>t,unstable_rootParams:()=>N,userAgent:()=>k,userAgentFromString:()=>j});var e,f=c(2742),g=c(388),h=c(4449),i=c.n(h);function j(a){return{...i()(a),isBot:void 0!==a&&/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}}function k({headers:a}){return j(a.get("user-agent")||void 0)}let l="undefined"==typeof URLPattern?void 0:URLPattern;var m=c(5379);function n(a){let b=m.J.getStore();if(!b)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:c}=b;return c.after(a)}var o=c(1128),p=c(107),q=c(4979),r=c(5770),s=c(8823);function t(){let a=m.J.getStore(),b=o.FP.getStore();if(a){if(b&&"after"===b.phase&&!(0,s.iC)())throw Object.defineProperty(Error(`Route ${a.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(a.forceStatic)return Promise.resolve(void 0);if(a.dynamicShouldError)throw Object.defineProperty(new q.f(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(b)switch(b.type){case"cache":{let b=Object.defineProperty(Error(`Route ${a.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E752",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,t),a.invalidDynamicUsageError??=b,b}case"private-cache":{let b=Object.defineProperty(Error(`Route ${a.route} used "connection" inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E753",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,t),a.invalidDynamicUsageError??=b,b}case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,r.W5)(b.renderSignal,a.route,"`connection()`");case"prerender-ppr":return(0,p.Ui)(a.route,"connection",b.dynamicTracking);case"prerender-legacy":return(0,p.xI)("connection",a,b);case"request":return(0,p.Pk)(b),Promise.resolve(void 0)}}(0,o.M1)("connection")}var u=c(9809);let v=/^[A-Za-z_$][A-Za-z0-9_$]*$/,w=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","_debugInfo","toJSON","$$typeof","__esModule"]);c(7918);let{env:x,stdout:y}=(null==(e=globalThis)?void 0:e.process)??{},z=x&&!x.NO_COLOR&&(x.FORCE_COLOR||(null==y?void 0:y.isTTY)&&!x.CI&&"dumb"!==x.TERM),A=(a,b,c,d)=>{let e=a.substring(0,d)+c,f=a.substring(d+b.length),g=f.indexOf(b);return~g?e+A(f,b,c,g):e+f},B=(a,b,c=a)=>z?d=>{let e=""+d,f=e.indexOf(b,a.length);return~f?a+A(e,b,c,f)+b:a+e+b}:String,C=B("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m");B("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),B("\x1b[3m","\x1b[23m"),B("\x1b[4m","\x1b[24m"),B("\x1b[7m","\x1b[27m"),B("\x1b[8m","\x1b[28m"),B("\x1b[9m","\x1b[29m"),B("\x1b[30m","\x1b[39m");let D=B("\x1b[31m","\x1b[39m"),E=B("\x1b[32m","\x1b[39m"),F=B("\x1b[33m","\x1b[39m");B("\x1b[34m","\x1b[39m");let G=B("\x1b[35m","\x1b[39m");B("\x1b[38;2;173;127;168m","\x1b[39m"),B("\x1b[36m","\x1b[39m");let H=B("\x1b[37m","\x1b[39m");B("\x1b[90m","\x1b[39m"),B("\x1b[40m","\x1b[49m"),B("\x1b[41m","\x1b[49m"),B("\x1b[42m","\x1b[49m"),B("\x1b[43m","\x1b[49m"),B("\x1b[44m","\x1b[49m"),B("\x1b[45m","\x1b[49m"),B("\x1b[46m","\x1b[49m"),B("\x1b[47m","\x1b[49m");var I=c(3788);let J={wait:H(C("○")),error:D(C("⨯")),warn:F(C("⚠")),ready:"▲",info:H(C(" ")),event:E(C("✓")),trace:G(C("\xbb"))},K={log:"log",warn:"warn",error:"error"},L=new I.q(1e4,a=>a.length),M=new WeakMap;async function N(){!function(...a){let b=a.join(" ");L.has(b)||(L.set(b,b),function(...a){!function(a,...b){(""===b[0]||void 0===b[0])&&1===b.length&&b.shift();let c=a in K?K[a]:"log",d=J[a];0===b.length?console[c](""):1===b.length&&"string"==typeof b[0]?console[c](" "+d+" "+b[0]):console[c](" "+d,...b)}("warn",...a)}(...a))}("`unstable_rootParams()` is deprecated and will be removed in an upcoming major release. Import specific root params from `next/root-params` instead.");let a=m.J.getStore();if(!a)throw Object.defineProperty(new u.z("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let b=o.FP.getStore();if(!b)throw Object.defineProperty(Error(`Route ${a.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(b.type){case"cache":case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return function(a,b,c){switch(c.type){case"prerender-client":{let a="`unstable_rootParams`";throw Object.defineProperty(new u.z(`${a} must not be used within a client component. Next.js should be preventing ${a} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0})}case"prerender":{let d=c.fallbackRouteParams;if(d){for(let e in a)if(d.has(e)){let d=M.get(a);if(d)return d;let e=(0,r.W5)(c.renderSignal,b.route,"`unstable_rootParams`");return M.set(a,e),e}}break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d){for(let e in a)if(d.has(e))return function(a,b,c,d){let e=M.get(a);if(e)return e;let f={...a},g=Promise.resolve(f);return M.set(a,g),Object.keys(a).forEach(e=>{w.has(e)||(b.has(e)?Object.defineProperty(f,e,{get(){var a;let b=(a="unstable_rootParams",v.test(e)?"`"+a+"."+e+"`":"`"+a+"["+JSON.stringify(e)+"]`");"prerender-ppr"===d.type?(0,p.Ui)(c.route,b,d.dynamicTracking):(0,p.xI)(b,c,d)},enumerable:!0}):g[e]=a[e])}),g}(a,d,b,c)}}}return Promise.resolve(a)}(b.rootParams,a,b);case"private-cache":case"prerender-runtime":case"request":return Promise.resolve(b.rootParams);default:return b}}},2742:(a,b,c)=>{"use strict";c.d(b,{J:()=>i});var d=c(4700),e=c(6206),f=c(1583),g=c(7028);let h=Symbol("internal request");class i extends Request{constructor(a,b={}){let c="string"!=typeof a&&"url"in a?a.url:String(a);(0,e.qU)(c),a instanceof Request?super(a,b):super(c,b);let f=new d.X(c,{headers:(0,e.Cu)(this.headers),nextConfig:b.nextConfig});this[h]={cookies:new g.tm(this.headers),nextUrl:f,url:f.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[h].cookies}get nextUrl(){return this[h].nextUrl}get page(){throw new f.Yq}get ua(){throw new f.l_}get url(){return this[h].url}}},2743:(a,b,c)=>{"use strict";c.r(b),c.d(b,{CompactEncrypt:()=>bc,CompactSign:()=>bf,EmbeddedJWK:()=>bo,EncryptJWT:()=>bk,FlattenedEncrypt:()=>aY,FlattenedSign:()=>be,GeneralEncrypt:()=>a$,GeneralSign:()=>bh,SignJWT:()=>bj,UnsecuredJWT:()=>bx,base64url:()=>e,calculateJwkThumbprint:()=>bm,calculateJwkThumbprintUri:()=>bn,compactDecrypt:()=>aQ,compactVerify:()=>a3,createLocalJWKSet:()=>bt,createRemoteJWKSet:()=>bw,cryptoRuntime:()=>bH,decodeJwt:()=>bB,decodeProtectedHeader:()=>bA,errors:()=>d,exportJWK:()=>aV,exportPKCS8:()=>aU,exportSPKI:()=>aT,flattenedDecrypt:()=>aP,flattenedVerify:()=>a2,generalDecrypt:()=>aR,generalVerify:()=>a4,generateKeyPair:()=>bF,generateSecret:()=>bG,importJWK:()=>aF,importPKCS8:()=>aE,importSPKI:()=>aC,importX509:()=>aD,jwtDecrypt:()=>bb,jwtVerify:()=>ba});var d={};c.r(d),c.d(d,{JOSEAlgNotAllowed:()=>w,JOSEError:()=>t,JOSENotSupported:()=>x,JWEDecompressionFailed:()=>z,JWEDecryptionFailed:()=>y,JWEInvalid:()=>A,JWKInvalid:()=>D,JWKSInvalid:()=>E,JWKSMultipleMatchingKeys:()=>G,JWKSNoMatchingKey:()=>F,JWKSTimeout:()=>H,JWSInvalid:()=>B,JWSSignatureVerificationFailed:()=>I,JWTClaimValidationFailed:()=>u,JWTExpired:()=>v,JWTInvalid:()=>C});var e={};c.r(e),c.d(e,{decode:()=>bz,encode:()=>by});let f=crypto,g=async(a,b)=>{let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await f.subtle.digest(c,b))},h=new TextEncoder,i=new TextDecoder;function j(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;return a.forEach(a=>{b.set(a,c),c+=a.length}),b}function k(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function l(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return k(c,b,0),k(c,a%0x100000000,4),c}function m(a){let b=new Uint8Array(4);return k(b,a),b}function n(a){return j(m(a.length),a)}async function o(a,b,c){let d=Math.ceil((b>>3)/32),e=new Uint8Array(32*d);for(let b=0;b<d;b++){let d=new Uint8Array(4+a.length+c.length);d.set(m(b+1)),d.set(a,4),d.set(c,4+a.length),e.set(await g("sha256",d),32*b)}return e.slice(0,b>>3)}let p=a=>{let b=a;"string"==typeof b&&(b=h.encode(b));let c=[];for(let a=0;a<b.length;a+=32768)c.push(String.fromCharCode.apply(null,b.subarray(a,a+32768)));return btoa(c.join(""))},q=a=>p(a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),r=a=>{let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c},s=a=>{let b=a;b instanceof Uint8Array&&(b=i.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return r(b)}catch(a){throw TypeError("The input to be decoded is not correctly encoded.")}};class t extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(a){var b;super(a),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null==(b=Error.captureStackTrace)||b.call(Error,this,this.constructor)}}class u extends t{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=b,this.reason=c}}class v extends t{static get code(){return"ERR_JWT_EXPIRED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_EXPIRED",this.claim=b,this.reason=c}}class w extends t{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class x extends t{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class y extends t{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class z extends t{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class A extends t{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class B extends t{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class C extends t{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class D extends t{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class E extends t{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class F extends t{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class G extends t{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator;class H extends t{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class I extends t{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}let J=f.getRandomValues.bind(f);function K(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new x(`Unsupported JWE Algorithm: ${a}`)}}let L=a=>J(new Uint8Array(K(a)>>3)),M=(a,b)=>{if(b.length<<3!==K(a))throw new A("Invalid Initialization Vector length")},N=(a,b)=>{let c=a.byteLength<<3;if(c!==b)throw new A(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)};function O(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function P(a,b){return a.name===b}function Q(a){return parseInt(a.name.slice(4),10)}function R(a,b){if(b.length&&!b.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(b.length>2){let c=b.pop();a+=`one of ${b.join(", ")}, or ${c}.`}else 2===b.length?a+=`one of ${b[0]} or ${b[1]}.`:a+=`${b[0]}.`;throw TypeError(a)}}function S(a,b,...c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if(!P(a.algorithm,"AES-GCM"))throw O("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw O(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!P(a.algorithm,"AES-KW"))throw O("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw O(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw O("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!P(a.algorithm,"PBKDF2"))throw O("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!P(a.algorithm,"RSA-OAEP"))throw O("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}R(a,c)}function T(a,b,...c){if(c.length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor&&b.constructor.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let U=(a,...b)=>T("Key must be ",a,...b);function V(a,b,...c){return T(`Key for the ${a} algorithm must be `,b,...c)}let W=["CryptoKey"];async function X(a,b,c,d,e,g){let h,i;if(!(b instanceof Uint8Array))throw TypeError(U(b,"Uint8Array"));let k=parseInt(a.slice(1,4),10),m=await f.subtle.importKey("raw",b.subarray(k>>3),"AES-CBC",!1,["decrypt"]),n=await f.subtle.importKey("raw",b.subarray(0,k>>3),{hash:`SHA-${k<<1}`,name:"HMAC"},!1,["sign"]),o=j(g,d,c,l(g.length<<3)),p=new Uint8Array((await f.subtle.sign("HMAC",n,o)).slice(0,k>>3));try{h=((a,b)=>{if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");if(a.length!==b.length)throw TypeError("Input buffers must have the same length");let c=a.length,d=0,e=-1;for(;++e<c;)d|=a[e]^b[e];return 0===d})(e,p)}catch(a){}if(!h)throw new y;try{i=new Uint8Array(await f.subtle.decrypt({iv:d,name:"AES-CBC"},m,c))}catch(a){}if(!i)throw new y;return i}async function Y(a,b,c,d,e,g){let h;b instanceof Uint8Array?h=await f.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):(S(b,a,"decrypt"),h=b);try{return new Uint8Array(await f.subtle.decrypt({additionalData:g,iv:d,name:"AES-GCM",tagLength:128},h,j(c,e)))}catch(a){throw new y}}let Z=async(a,b,c,d,e,f)=>{if(!(b instanceof CryptoKey)&&!(b instanceof Uint8Array))throw TypeError(U(b,...W,"Uint8Array"));switch(M(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&N(b,parseInt(a.slice(-3),10)),X(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&N(b,parseInt(a.slice(1,4),10)),Y(a,b,c,d,e,f);default:throw new x("Unsupported JWE Content Encryption Algorithm")}},$=async()=>{throw new x('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},_=async()=>{throw new x('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},aa=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0};function ab(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}let ac=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function ad(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function ae(a,b,c){if(a instanceof CryptoKey)return S(a,b,c),a;if(a instanceof Uint8Array)return f.subtle.importKey("raw",a,"AES-KW",!0,[c]);throw TypeError(U(a,...W,"Uint8Array"))}let af=async(a,b,c)=>{let d=await ae(b,a,"wrapKey");ad(d,a);let e=await f.subtle.importKey("raw",c,...ac);return new Uint8Array(await f.subtle.wrapKey("raw",e,d,"AES-KW"))},ag=async(a,b,c)=>{let d=await ae(b,a,"unwrapKey");ad(d,a);let e=await f.subtle.unwrapKey("raw",c,d,"AES-KW",...ac);return new Uint8Array(await f.subtle.exportKey("raw",e))};async function ah(a,b,c,d,e=new Uint8Array(0),g=new Uint8Array(0)){let i;if(!(a instanceof CryptoKey))throw TypeError(U(a,...W));if(S(a,"ECDH"),!(b instanceof CryptoKey))throw TypeError(U(b,...W));S(b,"ECDH","deriveBits");let k=j(n(h.encode(c)),n(e),n(g),m(d));return i="X25519"===a.algorithm.name?256:"X448"===a.algorithm.name?448:Math.ceil(parseInt(a.algorithm.namedCurve.substr(-3),10)/8)<<3,o(new Uint8Array(await f.subtle.deriveBits({name:a.algorithm.name,public:a},b,i)),d,k)}async function ai(a){if(!(a instanceof CryptoKey))throw TypeError(U(a,...W));return f.subtle.generateKey(a.algorithm,!0,["deriveBits"])}function aj(a){if(!(a instanceof CryptoKey))throw TypeError(U(a,...W));return["P-256","P-384","P-521"].includes(a.algorithm.namedCurve)||"X25519"===a.algorithm.name||"X448"===a.algorithm.name}async function ak(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new A("PBES2 Salt Input must be 8 or more octets");let e=j(h.encode(b),new Uint8Array([0]),a),g=parseInt(b.slice(13,16),10),i={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},k=await function(a,b){if(a instanceof Uint8Array)return f.subtle.importKey("raw",a,"PBKDF2",!1,["deriveBits"]);if(a instanceof CryptoKey)return S(a,b,"deriveBits","deriveKey"),a;throw TypeError(U(a,...W,"Uint8Array"))}(d,b);if(k.usages.includes("deriveBits"))return new Uint8Array(await f.subtle.deriveBits(i,k,g));if(k.usages.includes("deriveKey"))return f.subtle.deriveKey(i,k,{length:g,name:"AES-KW"},!1,["wrapKey","unwrapKey"]);throw TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}let al=async(a,b,c,d=2048,e=J(new Uint8Array(16)))=>{let f=await ak(e,a,d,b);return{encryptedKey:await af(a.slice(-6),f,c),p2c:d,p2s:q(e)}},am=async(a,b,c,d,e)=>{let f=await ak(e,a,d,b);return ag(a.slice(-6),f,c)};function an(a){switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new x(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}let ao=(a,b)=>{if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}},ap=async(a,b,c)=>{if(!(b instanceof CryptoKey))throw TypeError(U(b,...W));if(S(b,a,"encrypt","wrapKey"),ao(a,b),b.usages.includes("encrypt"))return new Uint8Array(await f.subtle.encrypt(an(a),b,c));if(b.usages.includes("wrapKey")){let d=await f.subtle.importKey("raw",c,...ac);return new Uint8Array(await f.subtle.wrapKey("raw",d,b,an(a)))}throw TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},aq=async(a,b,c)=>{if(!(b instanceof CryptoKey))throw TypeError(U(b,...W));if(S(b,a,"decrypt","unwrapKey"),ao(a,b),b.usages.includes("decrypt"))return new Uint8Array(await f.subtle.decrypt(an(a),b,c));if(b.usages.includes("unwrapKey")){let d=await f.subtle.unwrapKey("raw",c,b,an(a),...ac);return new Uint8Array(await f.subtle.exportKey("raw",d))}throw TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function ar(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new x(`Unsupported JWE Algorithm: ${a}`)}}let as=a=>J(new Uint8Array(ar(a)>>3)),at=(a,b)=>{let c=(a.match(/.{1,64}/g)||[]).join("\n");return`-----BEGIN ${b}-----
${c}
-----END ${b}-----`},au=async(a,b,c)=>{if(!(c instanceof CryptoKey))throw TypeError(U(c,...W));if(!c.extractable)throw TypeError("CryptoKey is not extractable");if(c.type!==a)throw TypeError(`key is not a ${a} key`);return at(p(new Uint8Array(await f.subtle.exportKey(b,c))),`${a.toUpperCase()} KEY`)},av=(a,b,c=0)=>{0===c&&(b.unshift(b.length),b.unshift(6));let d=a.indexOf(b[0],c);if(-1===d)return!1;let e=a.subarray(d,d+b.length);return e.length===b.length&&(e.every((a,c)=>a===b[c])||av(a,b,d+1))},aw=a=>{switch(!0){case av(a,[42,134,72,206,61,3,1,7]):return"P-256";case av(a,[43,129,4,0,34]):return"P-384";case av(a,[43,129,4,0,35]):return"P-521";case av(a,[43,101,110]):return"X25519";case av(a,[43,101,111]):return"X448";case av(a,[43,101,112]):return"Ed25519";case av(a,[43,101,113]):return"Ed448";default:throw new x("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},ax=async(a,b,c,d,e)=>{var g;let h,i,j=new Uint8Array(atob(c.replace(a,"")).split("").map(a=>a.charCodeAt(0))),k="spki"===b;switch(d){case"PS256":case"PS384":case"PS512":h={name:"RSA-PSS",hash:`SHA-${d.slice(-3)}`},i=k?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":h={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${d.slice(-3)}`},i=k?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h={name:"RSA-OAEP",hash:`SHA-${parseInt(d.slice(-3),10)||1}`},i=k?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":h={name:"ECDSA",namedCurve:"P-256"},i=k?["verify"]:["sign"];break;case"ES384":h={name:"ECDSA",namedCurve:"P-384"},i=k?["verify"]:["sign"];break;case"ES512":h={name:"ECDSA",namedCurve:"P-521"},i=k?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let a=aw(j);h=a.startsWith("P-")?{name:"ECDH",namedCurve:a}:{name:a},i=k?[]:["deriveBits"];break}case"EdDSA":h={name:aw(j)},i=k?["verify"]:["sign"];break;default:throw new x('Invalid or unsupported "alg" (Algorithm) value')}return f.subtle.importKey(b,j,h,null!=(g=null==e?void 0:e.extractable)&&g,i)},ay=(a,b,c)=>ax(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",a,b,c);function az(a){let b=[],c=0;for(;c<a.length;){let d=aA(a.subarray(c));b.push(d),c+=d.byteLength}return b}function aA(a){let b=0,c=31&a[0];if(b++,31===c){for(c=0;a[b]>=128;)c=128*c+a[b]-128,b++;c=128*c+a[b]-128,b++}let d=0;if(a[b]<128)d=a[b],b++;else if(128===d){for(d=0;0!==a[b+d]||0!==a[b+d+1];){if(d>a.byteLength)throw TypeError("invalid indefinite form length");d++}let c=b+d+2;return{byteLength:c,contents:a.subarray(b,b+d),raw:a.subarray(0,c)}}else{let c=127&a[b];b++,d=0;for(let e=0;e<c;e++)d=256*d+a[b],b++}let e=b+d;return{byteLength:e,contents:a.subarray(b,e),raw:a.subarray(0,e)}}let aB=async a=>{var b,c;if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:d,keyUsages:e}=function(a){let b,c;switch(a.kty){case"oct":switch(a.alg){case"HS256":case"HS384":case"HS512":b={name:"HMAC",hash:`SHA-${a.alg.slice(-3)}`},c=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new x(`${a.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":b={name:"AES-GCM"},c=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":b={name:"AES-KW"},c=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":b={name:"PBKDF2"},c=["deriveBits"];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"EdDSA":b={name:a.crv},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new x('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),g=[d,null!=(b=a.ext)&&b,null!=(c=a.key_ops)?c:e];if("PBKDF2"===d.name)return f.subtle.importKey("raw",s(a.k),...g);let h={...a};return delete h.alg,delete h.use,f.subtle.importKey("jwk",h,...g)};async function aC(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return ay(a,b,c)}async function aD(a,b,c){let d;if("string"!=typeof a||0!==a.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');try{d=at(function(a){let b=az(az(aA(a).contents)[0].contents);return p(b[160===b[0].raw[0]?6:5].raw)}(r(a.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""))),"PUBLIC KEY")}catch(a){throw TypeError("Failed to parse the X.509 certificate",{cause:a})}return ay(d,b,c)}async function aE(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return ax(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",a,b,c)}async function aF(a,b,c){var d;if(!ab(a))throw TypeError("JWK must be an object");switch(b||(b=a.alg),a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=c||(c=!0!==a.ext),c)return aB({...a,alg:b,ext:null!=(d=a.ext)&&d});return s(a.k);case"RSA":if(void 0!==a.oth)throw new x('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return aB({...a,alg:b});default:throw new x('Unsupported "kty" (Key Type) Parameter value')}}let aG=(a,b,c)=>{a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(a)?((a,b)=>{if(!(b instanceof Uint8Array)){if(!(b instanceof CryptoKey))throw TypeError(V(a,b,...W,"Uint8Array"));if("secret"!==b.type)throw TypeError(`${W.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(a,b):((a,b,c)=>{if(!(b instanceof CryptoKey))throw TypeError(V(a,b,...W));if("secret"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${W.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(a,b,c)};async function aH(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError(U(c,"Uint8Array"));let g=parseInt(a.slice(1,4),10),h=await f.subtle.importKey("raw",c.subarray(g>>3),"AES-CBC",!1,["encrypt"]),i=await f.subtle.importKey("raw",c.subarray(0,g>>3),{hash:`SHA-${g<<1}`,name:"HMAC"},!1,["sign"]),k=new Uint8Array(await f.subtle.encrypt({iv:d,name:"AES-CBC"},h,b)),m=j(e,d,k,l(e.length<<3));return{ciphertext:k,tag:new Uint8Array((await f.subtle.sign("HMAC",i,m)).slice(0,g>>3))}}async function aI(a,b,c,d,e){let g;c instanceof Uint8Array?g=await f.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):(S(c,a,"encrypt"),g=c);let h=new Uint8Array(await f.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},g,b)),i=h.slice(-16);return{ciphertext:h.slice(0,-16),tag:i}}let aJ=async(a,b,c,d,e)=>{if(!(c instanceof CryptoKey)&&!(c instanceof Uint8Array))throw TypeError(U(c,...W,"Uint8Array"));switch(M(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&N(c,parseInt(a.slice(-3),10)),aH(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&N(c,parseInt(a.slice(1,4),10)),aI(a,b,c,d,e);default:throw new x("Unsupported JWE Content Encryption Algorithm")}};async function aK(a,b,c,d){let e=a.slice(0,7);d||(d=L(e));let{ciphertext:f,tag:g}=await aJ(e,c,b,d,new Uint8Array(0));return{encryptedKey:f,iv:q(d),tag:q(g)}}async function aL(a,b,c,d,e){return Z(a.slice(0,7),b,c,d,e,new Uint8Array(0))}async function aM(a,b,c,d,e){switch(aG(a,b,"decrypt"),a){case"dir":if(void 0!==c)throw new A("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new A("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!ab(d.epk))throw new A('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!aj(b))throw new x("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await aF(d.epk,a);if(void 0!==d.apu){if("string"!=typeof d.apu)throw new A('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=s(d.apu)}catch(a){throw new A("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new A('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=s(d.apv)}catch(a){throw new A("Failed to base64url decode the apv")}}let h=await ah(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?ar(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new A("JWE Encrypted Key missing");return ag(a.slice(-6),h,c)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new A("JWE Encrypted Key missing");return aq(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new A("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new A('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=(null==e?void 0:e.maxPBES2Count)||1e4;if(d.p2c>g)throw new A('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new A('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=s(d.p2s)}catch(a){throw new A("Failed to base64url decode the p2s")}return am(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new A("JWE Encrypted Key missing");return ag(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new A("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new A('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new A('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=s(d.iv)}catch(a){throw new A("Failed to base64url decode the iv")}try{f=s(d.tag)}catch(a){throw new A("Failed to base64url decode the tag")}return aL(a,b,c,e,f)}default:throw new x('Invalid or unsupported "alg" (JWE Algorithm) header value')}}let aN=function(a,b,c,d,e){let f;if(void 0!==e.crit&&void 0===d.crit)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new x(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)},aO=(a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)};async function aP(a,b,c){var d;let e,f,g,k,l,m,n;if(!ab(a))throw new A("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new A("JOSE Header missing");if("string"!=typeof a.iv)throw new A("JWE Initialization Vector missing or incorrect type");if("string"!=typeof a.ciphertext)throw new A("JWE Ciphertext missing or incorrect type");if("string"!=typeof a.tag)throw new A("JWE Authentication Tag missing or incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new A("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new A("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new A("JWE AAD incorrect type");if(void 0!==a.header&&!ab(a.header))throw new A("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!ab(a.unprotected))throw new A("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=s(a.protected);e=JSON.parse(i.decode(b))}catch(a){throw new A("JWE Protected Header is invalid")}if(!aa(e,a.header,a.unprotected))throw new A("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let o={...e,...a.header,...a.unprotected};if(aN(A,new Map,null==c?void 0:c.crit,e,o),void 0!==o.zip){if(!e||!e.zip)throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==o.zip)throw new x('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:p,enc:q}=o;if("string"!=typeof p||!p)throw new A("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof q||!q)throw new A("missing JWE Encryption Algorithm (enc) in JWE Header");let r=c&&aO("keyManagementAlgorithms",c.keyManagementAlgorithms),t=c&&aO("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(r&&!r.has(p))throw new w('"alg" (Algorithm) Header Parameter not allowed');if(t&&!t.has(q))throw new w('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==a.encrypted_key)try{f=s(a.encrypted_key)}catch(a){throw new A("Failed to base64url decode the encrypted_key")}let u=!1;"function"==typeof b&&(b=await b(e,a),u=!0);try{g=await aM(p,b,f,o,c)}catch(a){if(a instanceof TypeError||a instanceof A||a instanceof x)throw a;g=as(q)}try{k=s(a.iv)}catch(a){throw new A("Failed to base64url decode the iv")}try{l=s(a.tag)}catch(a){throw new A("Failed to base64url decode the tag")}let v=h.encode(null!=(d=a.protected)?d:"");m=void 0!==a.aad?j(v,h.encode("."),h.encode(a.aad)):v;try{n=s(a.ciphertext)}catch(a){throw new A("Failed to base64url decode the ciphertext")}let y=await Z(q,g,n,k,l,m);"DEF"===o.zip&&(y=await ((null==c?void 0:c.inflateRaw)||$)(y));let z={plaintext:y};if(void 0!==a.protected&&(z.protectedHeader=e),void 0!==a.aad)try{z.additionalAuthenticatedData=s(a.aad)}catch(a){throw new A("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(z.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(z.unprotectedHeader=a.header),u)?{...z,key:b}:z}async function aQ(a,b,c){if(a instanceof Uint8Array&&(a=i.decode(a)),"string"!=typeof a)throw new A("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:j}=a.split(".");if(5!==j)throw new A("Invalid Compact JWE");let k=await aP({ciphertext:g,iv:f||void 0,protected:d||void 0,tag:h||void 0,encrypted_key:e||void 0},b,c),l={plaintext:k.plaintext,protectedHeader:k.protectedHeader};return"function"==typeof b?{...l,key:k.key}:l}async function aR(a,b,c){if(!ab(a))throw new A("General JWE must be an object");if(!Array.isArray(a.recipients)||!a.recipients.every(ab))throw new A("JWE Recipients missing or incorrect type");if(!a.recipients.length)throw new A("JWE Recipients has no members");for(let d of a.recipients)try{return await aP({aad:a.aad,ciphertext:a.ciphertext,encrypted_key:d.encrypted_key,header:d.header,iv:a.iv,protected:a.protected,tag:a.tag,unprotected:a.unprotected},b,c)}catch(a){}throw new y}let aS=async a=>{if(a instanceof Uint8Array)return{kty:"oct",k:q(a)};if(!(a instanceof CryptoKey))throw TypeError(U(a,...W,"Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...g}=await f.subtle.exportKey("jwk",a);return g};async function aT(a){return au("public","spki",a)}async function aU(a){return au("private","pkcs8",a)}async function aV(a){return aS(a)}async function aW(a,b,c,d,e={}){let f,g,h;switch(aG(a,c,"encrypt"),a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!aj(c))throw new x("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:i,apv:j}=e,{epk:k}=e;k||(k=(await ai(c)).privateKey);let{x:l,y:m,crv:n,kty:o}=await aV(k),p=await ah(c,k,"ECDH-ES"===a?b:a,"ECDH-ES"===a?ar(b):parseInt(a.slice(-5,-2),10),i,j);if(g={epk:{x:l,crv:n,kty:o}},"EC"===o&&(g.epk.y=m),i&&(g.apu=q(i)),j&&(g.apv=q(j)),"ECDH-ES"===a){h=p;break}h=d||as(b);let r=a.slice(-6);f=await af(r,p,h);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||as(b),f=await ap(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||as(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await al(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||as(b),f=await af(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||as(b);let{iv:i}=e;({encryptedKey:f,...g}=await aK(a,c,h,i));break}default:throw new x('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}let aX=Symbol();class aY{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=a}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}async encrypt(a,b){let c,d,e,f,g,k,l;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new A("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!aa(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new A("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let m={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(aN(A,new Map,null==b?void 0:b.crit,this._protectedHeader,m),void 0!==m.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==m.zip)throw new x('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:n,enc:o}=m;if("string"!=typeof n||!n)throw new A('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof o||!o)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===n){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===n&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let e;({cek:d,encryptedKey:c,parameters:e}=await aW(n,o,a,this._cek,this._keyManagementParameters)),e&&(b&&aX in b?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...e}:this.setUnprotectedHeader(e):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...e}:this.setProtectedHeader(e))}if(this._iv||(this._iv=L(o)),f=this._protectedHeader?h.encode(q(JSON.stringify(this._protectedHeader))):h.encode(""),this._aad?(g=q(this._aad),e=j(f,h.encode("."),h.encode(g))):e=f,"DEF"===m.zip){let a=await ((null==b?void 0:b.deflateRaw)||_)(this._plaintext);({ciphertext:k,tag:l}=await aJ(o,a,d,this._iv,e))}else({ciphertext:k,tag:l}=await aJ(o,this._plaintext,d,this._iv,e));let p={ciphertext:q(k),iv:q(this._iv),tag:q(l)};return c&&(p.encrypted_key=q(c)),g&&(p.aad=g),this._protectedHeader&&(p.protected=i.decode(f)),this._sharedUnprotectedHeader&&(p.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(p.header=this._unprotectedHeader),p}}class aZ{constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addRecipient(...a){return this.parent.addRecipient(...a)}encrypt(...a){return this.parent.encrypt(...a)}done(){return this.parent}}class a${constructor(a){this._recipients=[],this._plaintext=a}addRecipient(a,b){let c=new aZ(this,a,{crit:null==b?void 0:b.crit});return this._recipients.push(c),c}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}async encrypt(a){var b,c,d;let e;if(!this._recipients.length)throw new A("at least one recipient must be added");if(a={deflateRaw:null==a?void 0:a.deflateRaw},1===this._recipients.length){let[b]=this._recipients,c=await new aY(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(b.unprotectedHeader).encrypt(b.key,{...b.options,...a}),d={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(d.aad=c.aad),c.protected&&(d.protected=c.protected),c.unprotected&&(d.unprotected=c.unprotected),c.encrypted_key&&(d.recipients[0].encrypted_key=c.encrypted_key),c.header&&(d.recipients[0].header=c.header),d}for(let a=0;a<this._recipients.length;a++){let b=this._recipients[a];if(!aa(this._protectedHeader,this._unprotectedHeader,b.unprotectedHeader))throw new A("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let c={...this._protectedHeader,...this._unprotectedHeader,...b.unprotectedHeader},{alg:d}=c;if("string"!=typeof d||!d)throw new A('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===d||"ECDH-ES"===d)throw new A('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof c.enc||!c.enc)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==c.enc)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=c.enc;if(aN(A,new Map,b.options.crit,this._protectedHeader,c),void 0!==c.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let f=as(e),g={ciphertext:"",iv:"",recipients:[],tag:""};for(let h=0;h<this._recipients.length;h++){let i=this._recipients[h],j={};g.recipients.push(j);let k=({...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader}).alg.startsWith("PBES2")?2048+h:void 0;if(0===h){let b=await new aY(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(f).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(i.unprotectedHeader).setKeyManagementParameters({p2c:k}).encrypt(i.key,{...i.options,...a,[aX]:!0});g.ciphertext=b.ciphertext,g.iv=b.iv,g.tag=b.tag,b.aad&&(g.aad=b.aad),b.protected&&(g.protected=b.protected),b.unprotected&&(g.unprotected=b.unprotected),j.encrypted_key=b.encrypted_key,b.header&&(j.header=b.header);continue}let{encryptedKey:l,parameters:m}=await aW((null==(b=i.unprotectedHeader)?void 0:b.alg)||(null==(c=this._protectedHeader)?void 0:c.alg)||(null==(d=this._unprotectedHeader)?void 0:d.alg),e,i.key,f,{p2c:k});j.encrypted_key=q(l),(i.unprotectedHeader||m)&&(j.header={...i.unprotectedHeader,...m})}return g}}function a_(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:a.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"EdDSA":return{name:b.name};default:throw new x(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}function a0(a,b,c){if(b instanceof CryptoKey)return!function(a,b,...c){switch(b){case"HS256":case"HS384":case"HS512":{if(!P(a.algorithm,"HMAC"))throw O("HMAC");let c=parseInt(b.slice(2),10);if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!P(a.algorithm,"RSASSA-PKCS1-v1_5"))throw O("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!P(a.algorithm,"RSA-PSS"))throw O("RSA-PSS");let c=parseInt(b.slice(2),10);if(Q(a.algorithm.hash)!==c)throw O(`SHA-${c}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw O("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!P(a.algorithm,"ECDSA"))throw O("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw O(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}R(a,c)}(b,a,c),b;if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(U(b,...W));return f.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}throw TypeError(U(b,...W,"Uint8Array"))}let a1=async(a,b,c,d)=>{let e=await a0(a,b,"verify");ao(a,e);let g=a_(a,e.algorithm);try{return await f.subtle.verify(g,e,c,d)}catch(a){return!1}};async function a2(a,b,c){var d;let e,f;if(!ab(a))throw new B("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new B('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new B("JWS Protected Header incorrect type");if(void 0===a.payload)throw new B("JWS Payload missing");if("string"!=typeof a.signature)throw new B("JWS Signature missing or incorrect type");if(void 0!==a.header&&!ab(a.header))throw new B("JWS Unprotected Header incorrect type");let g={};if(a.protected)try{let b=s(a.protected);g=JSON.parse(i.decode(b))}catch(a){throw new B("JWS Protected Header is invalid")}if(!aa(g,a.header))throw new B("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let k={...g,...a.header},l=aN(B,new Map([["b64",!0]]),null==c?void 0:c.crit,g,k),m=!0;if(l.has("b64")&&"boolean"!=typeof(m=g.b64))throw new B('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:n}=k;if("string"!=typeof n||!n)throw new B('JWS "alg" (Algorithm) Header Parameter missing or invalid');let o=c&&aO("algorithms",c.algorithms);if(o&&!o.has(n))throw new w('"alg" (Algorithm) Header Parameter not allowed');if(m){if("string"!=typeof a.payload)throw new B("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new B("JWS Payload must be a string or an Uint8Array instance");let p=!1;"function"==typeof b&&(b=await b(g,a),p=!0),aG(n,b,"verify");let q=j(h.encode(null!=(d=a.protected)?d:""),h.encode("."),"string"==typeof a.payload?h.encode(a.payload):a.payload);try{e=s(a.signature)}catch(a){throw new B("Failed to base64url decode the signature")}if(!await a1(n,b,e,q))throw new I;if(m)try{f=s(a.payload)}catch(a){throw new B("Failed to base64url decode the payload")}else f="string"==typeof a.payload?h.encode(a.payload):a.payload;let r={payload:f};return(void 0!==a.protected&&(r.protectedHeader=g),void 0!==a.header&&(r.unprotectedHeader=a.header),p)?{...r,key:b}:r}async function a3(a,b,c){if(a instanceof Uint8Array&&(a=i.decode(a)),"string"!=typeof a)throw new B("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new B("Invalid Compact JWS");let h=await a2({payload:e,protected:d,signature:f},b,c),j={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...j,key:h.key}:j}async function a4(a,b,c){if(!ab(a))throw new B("General JWS must be an object");if(!Array.isArray(a.signatures)||!a.signatures.every(ab))throw new B("JWS Signatures missing or incorrect type");for(let d of a.signatures)try{return await a2({header:d.header,payload:a.payload,protected:d.protected,signature:d.signature},b,c)}catch(a){}throw new I}let a5=a=>Math.floor(a.getTime()/1e3),a6=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,a7=a=>{let b=a6.exec(a);if(!b)throw TypeError("Invalid time period format");let c=parseFloat(b[1]);switch(b[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(c);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*c);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*c);case"day":case"days":case"d":return Math.round(86400*c);case"week":case"weeks":case"w":return Math.round(604800*c);default:return Math.round(0x1e187e0*c)}},a8=a=>a.toLowerCase().replace(/^application\//,""),a9=(a,b,c={})=>{let d,e,{typ:f}=c;if(f&&("string"!=typeof a.typ||a8(a.typ)!==a8(f)))throw new u('unexpected "typ" JWT header value',"typ","check_failed");try{d=JSON.parse(i.decode(b))}catch(a){}if(!ab(d))throw new C("JWT Claims Set must be a top-level JSON object");let{requiredClaims:g=[],issuer:h,subject:j,audience:k,maxTokenAge:l}=c;for(let a of(void 0!==l&&g.push("iat"),void 0!==k&&g.push("aud"),void 0!==j&&g.push("sub"),void 0!==h&&g.push("iss"),new Set(g.reverse())))if(!(a in d))throw new u(`missing required "${a}" claim`,a,"missing");if(h&&!(Array.isArray(h)?h:[h]).includes(d.iss))throw new u('unexpected "iss" claim value',"iss","check_failed");if(j&&d.sub!==j)throw new u('unexpected "sub" claim value',"sub","check_failed");if(k&&!((a,b)=>"string"==typeof a?b.includes(a):!!Array.isArray(a)&&b.some(Set.prototype.has.bind(new Set(a))))(d.aud,"string"==typeof k?[k]:k))throw new u('unexpected "aud" claim value',"aud","check_failed");switch(typeof c.clockTolerance){case"string":e=a7(c.clockTolerance);break;case"number":e=c.clockTolerance;break;case"undefined":e=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:m}=c,n=a5(m||new Date);if((void 0!==d.iat||l)&&"number"!=typeof d.iat)throw new u('"iat" claim must be a number',"iat","invalid");if(void 0!==d.nbf){if("number"!=typeof d.nbf)throw new u('"nbf" claim must be a number',"nbf","invalid");if(d.nbf>n+e)throw new u('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==d.exp){if("number"!=typeof d.exp)throw new u('"exp" claim must be a number',"exp","invalid");if(d.exp<=n-e)throw new v('"exp" claim timestamp check failed',"exp","check_failed")}if(l){let a=n-d.iat;if(a-e>("number"==typeof l?l:a7(l)))throw new v('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(a<0-e)throw new u('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return d};async function ba(a,b,c){var d;let e=await a3(a,b,c);if((null==(d=e.protectedHeader.crit)?void 0:d.includes("b64"))&&!1===e.protectedHeader.b64)throw new C("JWTs MUST NOT use unencoded payload");let f={payload:a9(e.protectedHeader,e.payload,c),protectedHeader:e.protectedHeader};return"function"==typeof b?{...f,key:e.key}:f}async function bb(a,b,c){let d=await aQ(a,b,c),e=a9(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new u('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new u('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new u('replicated "aud" claim header parameter mismatch',"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}class bc{constructor(a){this._flattened=new aY(a)}setContentEncryptionKey(a){return this._flattened.setContentEncryptionKey(a),this}setInitializationVector(a){return this._flattened.setInitializationVector(a),this}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}setKeyManagementParameters(a){return this._flattened.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this._flattened.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}let bd=async(a,b,c)=>{let d=await a0(a,b,"sign");return ao(a,d),new Uint8Array(await f.subtle.sign(a_(a,d.algorithm),d,c))};class be{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new B("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!aa(this._protectedHeader,this._unprotectedHeader))throw new B("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader},e=aN(B,new Map([["b64",!0]]),null==b?void 0:b.crit,this._protectedHeader,d),f=!0;if(e.has("b64")&&"boolean"!=typeof(f=this._protectedHeader.b64))throw new B('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:g}=d;if("string"!=typeof g||!g)throw new B('JWS "alg" (Algorithm) Header Parameter missing or invalid');aG(g,a,"sign");let k=this._payload;f&&(k=h.encode(q(k)));let l=j(c=this._protectedHeader?h.encode(q(JSON.stringify(this._protectedHeader))):h.encode(""),h.encode("."),k),m={signature:q(await bd(g,a,l)),payload:""};return f&&(m.payload=i.decode(k)),this._unprotectedHeader&&(m.header=this._unprotectedHeader),this._protectedHeader&&(m.protected=i.decode(c)),m}}class bf{constructor(a){this._flattened=new be(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}class bg{constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setProtectedHeader(a){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=a,this}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addSignature(...a){return this.parent.addSignature(...a)}sign(...a){return this.parent.sign(...a)}done(){return this.parent}}class bh{constructor(a){this._signatures=[],this._payload=a}addSignature(a,b){let c=new bg(this,a,b);return this._signatures.push(c),c}async sign(){if(!this._signatures.length)throw new B("at least one signature must be added");let a={signatures:[],payload:""};for(let b=0;b<this._signatures.length;b++){let c=this._signatures[b],d=new be(this._payload);d.setProtectedHeader(c.protectedHeader),d.setUnprotectedHeader(c.unprotectedHeader);let{payload:e,...f}=await d.sign(c.key,c.options);if(0===b)a.payload=e;else if(a.payload!==e)throw new B("inconsistent use of JWS Unencoded Payload (RFC7797)");a.signatures.push(f)}return a}}class bi{constructor(a){if(!ab(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:a}:this._payload={...this._payload,nbf:a5(new Date)+a7(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:a}:this._payload={...this._payload,exp:a5(new Date)+a7(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:a5(new Date)}:this._payload={...this._payload,iat:a},this}}class bj extends bi{setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){var c;let d=new bf(h.encode(JSON.stringify(this._payload)));if(d.setProtectedHeader(this._protectedHeader),Array.isArray(null==(c=this._protectedHeader)?void 0:c.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new C("JWTs MUST NOT use unencoded payload");return d.sign(a,b)}}class bk extends bi{setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(a,b){let c=new bc(h.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),c.setProtectedHeader(this._protectedHeader),this._iv&&c.setInitializationVector(this._iv),this._cek&&c.setContentEncryptionKey(this._cek),this._keyManagementParameters&&c.setKeyManagementParameters(this._keyManagementParameters),c.encrypt(a,b)}}let bl=(a,b)=>{if("string"!=typeof a||!a)throw new D(`${b} missing or invalid`)};async function bm(a,b){let c;if(!ab(a))throw TypeError("JWK must be an object");if(null!=b||(b="sha256"),"sha256"!==b&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(a.kty){case"EC":bl(a.crv,'"crv" (Curve) Parameter'),bl(a.x,'"x" (X Coordinate) Parameter'),bl(a.y,'"y" (Y Coordinate) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x,y:a.y};break;case"OKP":bl(a.crv,'"crv" (Subtype of Key Pair) Parameter'),bl(a.x,'"x" (Public Key) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x};break;case"RSA":bl(a.e,'"e" (Exponent) Parameter'),bl(a.n,'"n" (Modulus) Parameter'),c={e:a.e,kty:a.kty,n:a.n};break;case"oct":bl(a.k,'"k" (Key Value) Parameter'),c={k:a.k,kty:a.kty};break;default:throw new x('"kty" (Key Type) Parameter missing or unsupported')}let d=h.encode(JSON.stringify(c));return q(await g(b,d))}async function bn(a,b){null!=b||(b="sha256");let c=await bm(a,b);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${b.slice(-3)}:${c}`}async function bo(a,b){let c={...a,...null==b?void 0:b.header};if(!ab(c.jwk))throw new B('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let d=await aF({...c.jwk,ext:!0},c.alg,!0);if(d instanceof Uint8Array||"public"!==d.type)throw new B('"jwk" (JSON Web Key) Header Parameter must be a public key');return d}function bp(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(bq)}function bq(a){return ab(a)}class br{constructor(a){if(this._cached=new WeakMap,!bp(a))throw new E("JSON Web Key Set malformed");this._jwks=function(a){return"function"==typeof structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}(a)}async getKey(a,b){let{alg:c,kid:d}={...a,...null==b?void 0:b.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new x('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this._jwks.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&"string"==typeof a.alg&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b&&"EdDSA"===c&&(b="Ed25519"===a.crv||"Ed448"===a.crv),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES256K":b="secp256k1"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new F;if(1!==h){let a=new G,{_cached:b}=this;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await bs(b,a,c)}catch(a){continue}},a}return bs(this._cached,g,c)}}async function bs(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await aF({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new E("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function bt(a){let b=new br(a);return async function(a,c){return b.getKey(a,c)}}let bu=async(a,b,c)=>{let d,e,f=!1;"function"==typeof AbortController&&(d=new AbortController,e=setTimeout(()=>{f=!0,d.abort()},b));let g=await fetch(a.href,{signal:d?d.signal:void 0,redirect:"manual",headers:c.headers}).catch(a=>{if(f)throw new H;throw a});if(void 0!==e&&clearTimeout(e),200!==g.status)throw new t("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await g.json()}catch(a){throw new t("Failed to parse the JSON Web Key Set HTTP response as JSON")}};class bv extends br{constructor(a,b){if(super({keys:[]}),this._jwks=void 0,!(a instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(a.href),this._options={agent:null==b?void 0:b.agent,headers:null==b?void 0:b.headers},this._timeoutDuration="number"==typeof(null==b?void 0:b.timeoutDuration)?null==b?void 0:b.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==b?void 0:b.cooldownDuration)?null==b?void 0:b.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==b?void 0:b.cacheMaxAge)?null==b?void 0:b.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(a,b){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(a,b)}catch(c){if(c instanceof F&&!1===this.coolingDown())return await this.reload(),super.getKey(a,b);throw c}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=bu(this._url,this._timeoutDuration,this._options).then(a=>{if(!bp(a))throw new E("JSON Web Key Set malformed");this._jwks={keys:a.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(a=>{throw this._pendingFetch=void 0,a})),await this._pendingFetch}}function bw(a,b){let c=new bv(a,b);return async function(a,b){return c.getKey(a,b)}}class bx extends bi{encode(){let a=q(JSON.stringify({alg:"none"})),b=q(JSON.stringify(this._payload));return`${a}.${b}.`}static decode(a,b){let c;if("string"!=typeof a)throw new C("Unsecured JWT must be a string");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g||""!==f)throw new C("Invalid Unsecured JWT");try{if(c=JSON.parse(i.decode(s(d))),"none"!==c.alg)throw Error()}catch(a){throw new C("Invalid Unsecured JWT")}return{payload:a9(c,s(e),b),header:c}}}let by=q,bz=s;function bA(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(i.decode(bz(b)));if(!ab(a))throw Error();return a}catch(a){throw TypeError("Invalid Token or Protected Header formatting")}}function bB(a){let b,c;if("string"!=typeof a)throw new C("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new C("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new C("Invalid JWT");if(!d)throw new C("JWTs must contain a payload");try{b=bz(d)}catch(a){throw new C("Failed to base64url decode the payload")}try{c=JSON.parse(i.decode(b))}catch(a){throw new C("Failed to parse the decoded payload as JSON")}if(!ab(c))throw new C("Invalid JWT Claims Set");return c}async function bC(a,b){var c;let d,e,g;switch(a){case"HS256":case"HS384":case"HS512":d=parseInt(a.slice(-3),10),e={name:"HMAC",hash:`SHA-${d}`,length:d},g=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return J(new Uint8Array((d=parseInt(a.slice(-3),10))>>3));case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW",length:d=parseInt(a.slice(1,4),10)},g=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":e={name:"AES-GCM",length:d=parseInt(a.slice(1,4),10)},g=["encrypt","decrypt"];break;default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return f.subtle.generateKey(e,null!=(c=null==b?void 0:b.extractable)&&c,g)}function bD(a){var b;let c=null!=(b=null==a?void 0:a.modulusLength)?b:2048;if("number"!=typeof c||c<2048)throw new x("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return c}async function bE(a,b){var c,d,e;let g,h;switch(a){case"PS256":case"PS384":case"PS512":g={name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bD(b)},h=["sign","verify"];break;case"RS256":case"RS384":case"RS512":g={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bD(b)},h=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g={name:"RSA-OAEP",hash:`SHA-${parseInt(a.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bD(b)},h=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":g={name:"ECDSA",namedCurve:"P-256"},h=["sign","verify"];break;case"ES384":g={name:"ECDSA",namedCurve:"P-384"},h=["sign","verify"];break;case"ES512":g={name:"ECDSA",namedCurve:"P-521"},h=["sign","verify"];break;case"EdDSA":h=["sign","verify"];let i=null!=(c=null==b?void 0:b.crv)?c:"Ed25519";switch(i){case"Ed25519":case"Ed448":g={name:i};break;default:throw new x("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{h=["deriveKey","deriveBits"];let a=null!=(d=null==b?void 0:b.crv)?d:"P-256";switch(a){case"P-256":case"P-384":case"P-521":g={name:"ECDH",namedCurve:a};break;case"X25519":case"X448":g={name:a};break;default:throw new x("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new x('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return f.subtle.generateKey(g,null!=(e=null==b?void 0:b.extractable)&&e,h)}async function bF(a,b){return bE(a,b)}async function bG(a,b){return bC(a,b)}let bH="WebCryptoAPI"},2782:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(4970);class f extends e.Auth0Response{constructor(a){super(a)}setCookie(a,b,c){this.res.cookies.set(a,b,c)}clearCookie(a,b){this.setCookie(a,"",Object.assign(Object.assign({},b),{expires:new Date(0)}))}redirect(a,b=302){let c=this.res;for(let e of(this.res=new d.NextResponse(null,{status:b}),c.headers.forEach((a,b)=>{this.res.headers.set(b,a)}),this.res.headers.set("location",a),c.cookies.getAll()))this.res.cookies.set(e)}setHeader(a,b){this.res.headers.set(a,b)}send204(){let a=this.res;this.res=new d.NextResponse(null,{status:204}),a.headers.forEach((a,b)=>{this.res.headers.set(b,a)})}}b.default=f},2813:(a,b,c)=>{a.exports=function(a){function b(a){let c,e,f,g=null;function h(...a){if(!h.enabled)return;let d=Number(new Date);h.diff=d-(c||d),h.prev=c,h.curr=d,c=d,a[0]=b.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let e=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(c,d)=>{if("%%"===c)return"%";e++;let f=b.formatters[d];if("function"==typeof f){let b=a[e];c=f.call(h,b),a.splice(e,1),e--}return c}),b.formatArgs.call(h,a),(h.log||b.log).apply(h,a)}return h.namespace=a,h.useColors=b.useColors(),h.color=b.selectColor(a),h.extend=d,h.destroy=b.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(e!==b.namespaces&&(e=b.namespaces,f=b.enabled(a)),f),set:a=>{g=a}}),"function"==typeof b.init&&b.init(h),h}function d(a,c){let d=b(this.namespace+(void 0===c?":":c)+a);return d.log=this.log,d}function e(a,b){let c=0,d=0,e=-1,f=0;for(;c<a.length;)if(d<b.length&&(b[d]===a[c]||"*"===b[d]))"*"===b[d]?(e=d,f=c):c++,d++;else{if(-1===e)return!1;d=e+1,c=++f}for(;d<b.length&&"*"===b[d];)d++;return d===b.length}return b.debug=b,b.default=b,b.coerce=function(a){return a instanceof Error?a.stack||a.message:a},b.disable=function(){let a=[...b.names,...b.skips.map(a=>"-"+a)].join(",");return b.enable(""),a},b.enable=function(a){for(let c of(b.save(a),b.namespaces=a,b.names=[],b.skips=[],("string"==typeof a?a:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===c[0]?b.skips.push(c.slice(1)):b.names.push(c)},b.enabled=function(a){for(let c of b.skips)if(e(a,c))return!1;for(let c of b.names)if(e(a,c))return!0;return!1},b.humanize=c(8194),b.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(c=>{b[c]=a[c]}),b.names=[],b.skips=[],b.formatters={},b.selectColor=function(a){let c=0;for(let b=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b)|0;return b.colors[Math.abs(c)%b.colors.length]},b.enable(b.load()),b}},2892:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(1302);b.default=function(a){return async(b,c,e)=>{let f=c?e:b,g=c?b:void 0,[h,i]=await (0,d.get)({sessionCache:a,req:g,res:c});h&&f&&f.user&&await (0,d.set)({req:g,res:c,session:f,sessionCache:a,iat:i})}}},2898:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});class c{}b.default=c},2997:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b._initAuth=void 0;let d=c(7613),e=c(667),f=c(6453),g=c(1302),h=c(7625),i=c(7753),j=c(3868),k=d.__importDefault(c(251));b._initAuth=({params:a,genId:b,clientGetter:c})=>{let d=(0,i.configSingletonGetter)(a,b),l=c(j.telemetry),m=new e.TransientStore(d),n=new g.SessionCache(d),o=(0,e.loginHandler)(d,l,m),p=(0,e.logoutHandler)(d,l,n),q=(0,e.callbackHandler)(d,l,n,m),r=(0,e.backchannelLogoutHandler)(d,l),s=(0,g.sessionFactory)(n),t=(0,g.touchSessionFactory)(n),u=(0,g.updateSessionFactory)(n),v=(0,g.accessTokenFactory)(d,l,n),w=(0,h.withApiAuthRequiredFactory)(n),x=(0,h.withPageAuthRequiredFactory)(d,n),y=(0,f.loginHandler)(o,d),z=(0,f.logoutHandler)(p),A=(0,f.callbackHandler)(q,d),B=(0,f.backchannelLogoutHandler)(r,d),C=(0,f.profileHandler)(d,l,v,n),D=(0,f.handlerFactory)({handleLogin:y,handleLogout:z,handleCallback:A,handleProfile:C,handleBackchannelLogout:B});return{getSession:s,touchSession:t,updateSession:u,getAccessToken:v,withApiAuthRequired:w,withPageAuthRequired:x,handleLogin:y,handleLogout:z,handleCallback:A,handleBackchannelLogout:B,handleProfile:C,handleAuth:D,withMiddlewareAuthRequired:(0,k.default)(d,n)}}},3038:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613),e=c(9088),f=d.__importDefault(c(7994)),g=c(1524);class h extends f.default{constructor(a){super(a),this.res=a}setCookie(a,b,c){let d=this.res.getHeader("Set-Cookie")||[];Array.isArray(d)||(d=[d]),this.res.setHeader("Set-Cookie",[...d.filter(b=>!b.startsWith(`${a}=`)),(0,e.serialize)(a,b,c)])}redirect(a,b=302){this.res.writableEnded||(this.res.writeHead(b,{Location:this.res.getHeader("Location")||a}),this.res.end((0,g.htmlSafe)(a)))}send204(){this.res.statusCode=204,this.res.end()}setHeader(a,b){this.res.setHeader(a,b)}}b.default=h},3180:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});class c{clearCookie(a,b={}){let{domain:c,path:d,secure:e,sameSite:f}=b,g={domain:c,path:d,maxAge:0};"none"===f&&(g.secure=e,g.sameSite=f),this.setCookie(a,"",g)}}b.default=c},3198:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(4970);class e extends d.Auth0RequestCookies{constructor(){super()}getCookies(){let{cookies:a}=c(7924);return a().getAll().reduce((a,{name:b,value:c})=>Object.assign(Object.assign({},a),{[b]:c}),{})}}b.default=e},3282:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.match=b.intersect=void 0,b.intersect=function(a,b){let c=new Set(a),d=new Set(b);return new Set([...c].filter(a=>d.has(a)))},b.match=function(a,b){let c=new Set(a),d=new Set(b);if(c.size!==d.size)return!1;for(let b=0;b<a.length;b+=1){let c=a[b];if(!d.has(c))return!1}return!0}},3364:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.set=b.get=b.getAuth0ReqRes=void 0;let d=c(667),e=c(5194),f=c(4970),g=c(6218),h=c(1509);b.getAuth0ReqRes=(a,b)=>(0,h.isRequest)(a)?[new g.Auth0NextRequest(a),new g.Auth0NextResponse(b)]:(0,h.isNextApiRequest)(a)?[new g.Auth0NextApiRequest(a),new g.Auth0NextApiResponse(b)]:[new f.NodeRequest(a),new f.NodeResponse(b)];class i{constructor(a){this.getConfig=a,this.cache=new WeakMap,this.iatCache=new WeakMap}getSessionStore(a){return this.sessionStore||(this.sessionStore=a.session.store?new d.StatefulSession(a):new d.StatelessSession(a)),this.sessionStore}async init(a,c,f=!0){if(!this.cache.has(a)){let[g]=(0,b.getAuth0ReqRes)(a,c),h=await this.getConfig(g),i=this.getSessionStore(h),[j,k]=await i.read(g),l=(0,e.fromJson)(j);l&&h.backchannelLogout&&await (0,d.isLoggedOut)(l.user,h)?(this.cache.set(a,null),await this.save(a,c)):(this.iatCache.set(a,k),this.cache.set(a,l),h.session.rolling&&h.session.autoSave&&f&&await this.save(a,c))}}async save(a,c){let[d,e]=(0,b.getAuth0ReqRes)(a,c),f=await this.getConfig(d),g=this.getSessionStore(f);await g.save(d,e,this.cache.get(a),this.iatCache.get(a))}async create(a,c,e){let[f]=(0,b.getAuth0ReqRes)(a,c),g=await this.getConfig(f);g.backchannelLogout&&await (0,d.deleteSub)(e.user.sub,g),this.cache.set(a,e),await this.save(a,c)}async delete(a,b){await this.init(a,b,!1),this.cache.set(a,null),await this.save(a,b)}async isAuthenticated(a,b){await this.init(a,b);let c=this.cache.get(a);return!!(null==c?void 0:c.user)}async getIdToken(a,b){await this.init(a,b);let c=this.cache.get(a);return null==c?void 0:c.idToken}async set(a,b,c){await this.init(a,b,!1),this.cache.set(a,c),await this.save(a,b)}async get(a,b){return await this.init(a,b),this.cache.get(a)}async fromTokenEndpointResponse(a,c,d){let[f]=(0,b.getAuth0ReqRes)(a,c),g=await this.getConfig(f);return(0,e.fromTokenEndpointResponse)(d,g)}}b.default=i;let j=async({sessionCache:a,req:c,res:f})=>{if(c&&f)return[await a.get(c,f)];let h=new g.Auth0NextRequestCookies,i=await a.getConfig(h),j=a.getSessionStore(i),{session:{rolling:k,autoSave:l}}=i,[m,n]=await j.read(h),o=(0,e.fromJson)(m);return o&&i.backchannelLogout&&await (0,d.isLoggedOut)(o.user,i)?(await (0,b.set)({session:null,sessionCache:a}),[]):(k&&l&&await (0,b.set)({session:o,sessionCache:a,iat:n}),[o,n])};b.get=j,b.set=async({session:a,sessionCache:b,iat:c,req:d,res:e})=>{if(d&&e)return b.set(d,e,a);let f=new g.Auth0NextRequestCookies,h=await b.getConfig(f),i=b.getSessionStore(h);await i.save(f,new g.Auth0NextResponseCookies,a,c)}},3476:(a,b,c)=>{"use strict";let d,e,f;function g(a,b){if(null==a)return!1;try{return a instanceof b||Object.getPrototypeOf(a)[Symbol.toStringTag]===b.prototype[Symbol.toStringTag]}catch{return!1}}c.r(b),c.d(b,{OperationProcessingError:()=>u,UnsupportedOperationError:()=>t,authorizationCodeGrantRequest:()=>aK,calculatePKCECodeChallenge:()=>L,clientCredentialsGrantRequest:()=>aS,clockSkew:()=>h,clockTolerance:()=>i,customFetch:()=>j,deviceAuthorizationRequest:()=>bh,deviceCodeGrantRequest:()=>bj,discoveryRequest:()=>E,expectNoNonce:()=>aN,expectNoState:()=>bd,experimentalCustomFetch:()=>bp,experimentalUseMtlsAlias:()=>br,experimental_customFetch:()=>bq,experimental_jwksCache:()=>bw,experimental_useMtlsAlias:()=>bs,experimental_validateDetachedSignatureResponse:()=>bt,experimental_validateJwtAccessToken:()=>bu,generateKeyPair:()=>bl,generateRandomCodeVerifier:()=>I,generateRandomNonce:()=>K,generateRandomState:()=>J,genericTokenEndpointRequest:()=>aT,getValidatedIdTokenClaims:()=>ay,introspectionRequest:()=>aY,isOAuth2Error:()=>ag,issueRequestObject:()=>$,jweDecrypt:()=>l,jwksCache:()=>m,modifyAssertion:()=>k,parseWwwAuthenticateChallenges:()=>aj,processAuthorizationCodeOAuth2Response:()=>aQ,processAuthorizationCodeOpenIDResponse:()=>aP,processClientCredentialsResponse:()=>aU,processDeviceAuthorizationResponse:()=>bi,processDeviceCodeResponse:()=>bk,processDiscoveryResponse:()=>G,processIntrospectionResponse:()=>aZ,processPushedAuthorizationResponse:()=>ak,processRefreshTokenResponse:()=>aE,processRevocationResponse:()=>aW,processUserInfoResponse:()=>as,protectedResourceRequest:()=>al,pushedAuthorizationRequest:()=>af,refreshTokenGrantRequest:()=>av,revocationRequest:()=>aV,skipAuthTimeCheck:()=>aO,skipStateCheck:()=>bc,skipSubjectCheck:()=>aq,useMtlsAlias:()=>n,userInfoRequest:()=>am,validateAuthResponse:()=>be,validateDetachedSignatureResponse:()=>a9,validateIdTokenSignature:()=>az,validateJwtAccessToken:()=>bo,validateJwtAuthResponse:()=>a6,validateJwtIntrospectionSignature:()=>aC,validateJwtUserInfoSignature:()=>aB,validateJwtUserinfoSignature:()=>bv}),"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="oauth4webapi/v2.17.0");let h=Symbol(),i=Symbol(),j=Symbol(),k=Symbol(),l=Symbol(),m=Symbol(),n=Symbol(),o=new TextEncoder,p=new TextDecoder;function q(a){return"string"==typeof a?o.encode(a):p.decode(a)}function r(a){if("string"==typeof a)try{let b=atob(a.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}catch(a){throw new v("The input to be decoded is not correctly encoded.",{cause:a})}var b=a;b instanceof ArrayBuffer&&(b=new Uint8Array(b));let c=[];for(let a=0;a<b.byteLength;a+=32768)c.push(String.fromCharCode.apply(null,b.subarray(a,a+32768)));return btoa(c.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class s{constructor(a){this.cache=new Map,this._cache=new Map,this.maxSize=a}get(a){let b=this.cache.get(a);return b||((b=this._cache.get(a))?(this.update(a,b),b):void 0)}has(a){return this.cache.has(a)||this._cache.has(a)}set(a,b){return this.cache.has(a)?this.cache.set(a,b):this.update(a,b),this}delete(a){return this.cache.has(a)?this.cache.delete(a):!!this._cache.has(a)&&this._cache.delete(a)}update(a,b){this.cache.set(a,b),this.cache.size>=this.maxSize&&(this._cache=this.cache,this.cache=new Map)}}class t extends Error{constructor(a){super(a??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class u extends Error{constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}let v=u,w=new s(100);function x(a){return a instanceof CryptoKey}function y(a){return x(a)&&"private"===a.type}let z=["PS256","ES256","RS256","PS384","ES384","RS384","PS512","ES512","RS512","EdDSA"];function A(a){try{let b=a.headers.get("dpop-nonce");b&&w.set(new URL(a.url).origin,b)}catch{}return a}function B(a){return!(null===a||"object"!=typeof a||Array.isArray(a))}function C(a){g(a,Headers)&&(a=Object.fromEntries(a.entries()));let b=new Headers(a);if(d&&!b.has("user-agent")&&b.set("user-agent",d),b.has("authorization"))throw TypeError('"options.headers" must not include the "authorization" header name');if(b.has("dpop"))throw TypeError('"options.headers" must not include the "dpop" header name');return b}function D(a){if("function"==typeof a&&(a=a()),!(a instanceof AbortSignal))throw TypeError('"options.signal" must return or be an instance of AbortSignal');return a}async function E(a,b){if(!(a instanceof URL))throw TypeError('"issuerIdentifier" must be an instance of URL');if("https:"!==a.protocol&&"http:"!==a.protocol)throw TypeError('"issuer.protocol" must be "https:" or "http:"');let c=new URL(a.href);switch(b?.algorithm){case void 0:case"oidc":c.pathname=`${c.pathname}/.well-known/openid-configuration`.replace("//","/");break;case"oauth2":"/"===c.pathname?c.pathname=".well-known/oauth-authorization-server":c.pathname=`.well-known/oauth-authorization-server/${c.pathname}`.replace("//","/");break;default:throw TypeError('"options.algorithm" must be "oidc" (default), or "oauth2"')}let d=C(b?.headers);return d.set("accept","application/json"),(b?.[j]||fetch)(c.href,{headers:Object.fromEntries(d.entries()),method:"GET",redirect:"manual",signal:b?.signal?D(b.signal):null}).then(A)}function F(a){return"string"==typeof a&&0!==a.length}async function G(a,b){let c;if(!(a instanceof URL))throw TypeError('"expectedIssuer" must be an instance of URL');if(!g(b,Response))throw TypeError('"response" must be an instance of Response');if(200!==b.status)throw new v('"response" is not a conform Authorization Server Metadata response');aX(b);try{c=await b.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}if(!B(c))throw new v('"response" body must be a top level object');if(!F(c.issuer))throw new v('"response" body "issuer" property must be a non-empty string');if(new URL(c.issuer).href!==a.href)throw new v('"response" body "issuer" does not match "expectedIssuer"');return c}function H(){return r(crypto.getRandomValues(new Uint8Array(32)))}function I(){return H()}function J(){return H()}function K(){return H()}async function L(a){if(!F(a))throw TypeError('"codeVerifier" must be a non-empty string');return r(await crypto.subtle.digest("SHA-256",q(a)))}function M(a){if(a instanceof CryptoKey)return{key:a};if(!(a?.key instanceof CryptoKey))return{};if(void 0!==a.kid&&!F(a.kid))throw TypeError('"kid" must be a non-empty string');return{key:a.key,kid:a.kid,modifyAssertion:a[k]}}function N(a){return encodeURIComponent(a).replace(/%20/g,"+")}function O(a){switch(a.algorithm.name){case"RSA-PSS":switch(a.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new t("unsupported RsaHashedKeyAlgorithm hash name")}case"RSASSA-PKCS1-v1_5":switch(a.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new t("unsupported RsaHashedKeyAlgorithm hash name")}case"ECDSA":switch(a.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new t("unsupported EcKeyAlgorithm namedCurve")}case"Ed25519":case"Ed448":return"EdDSA";default:throw new t("unsupported CryptoKey algorithm name")}}function P(a){let b=a?.[h];return"number"==typeof b&&Number.isFinite(b)?b:0}function Q(a){let b=a?.[i];return"number"==typeof b&&Number.isFinite(b)&&-1!==Math.sign(b)?b:30}function R(){return Math.floor(Date.now()/1e3)}async function S(a,b,c,d,e){let f={alg:O(c),kid:d},g=function(a,b){let c=R()+P(b);return{jti:H(),aud:[a.issuer,a.token_endpoint],exp:c+60,iat:c,nbf:c,iss:b.client_id,sub:b.client_id}}(a,b);return e?.(f,g),Z(f,g,c)}function T(a){if("object"!=typeof a||null===a)throw TypeError('"as" must be an object');if(!F(a.issuer))throw TypeError('"as.issuer" property must be a non-empty string');return!0}function U(a){if("object"!=typeof a||null===a)throw TypeError('"client" must be an object');if(!F(a.client_id))throw TypeError('"client.client_id" property must be a non-empty string');return!0}function V(a){if(!F(a))throw TypeError('"client.client_secret" property must be a non-empty string');return a}function W(a,b){if(void 0!==b)throw TypeError(`"options.clientPrivateKey" property must not be provided when ${a} client authentication method is used.`)}function X(a,b){if(void 0!==b)throw TypeError(`"client.client_secret" property must not be provided when ${a} client authentication method is used.`)}async function Y(a,b,c,d,e){switch(c.delete("client_secret"),c.delete("client_assertion_type"),c.delete("client_assertion"),b.token_endpoint_auth_method){case void 0:case"client_secret_basic":W("client_secret_basic",e),d.set("authorization",function(a,b){let c=N(a),d=N(b),e=btoa(`${c}:${d}`);return`Basic ${e}`}(b.client_id,V(b.client_secret)));break;case"client_secret_post":W("client_secret_post",e),c.set("client_id",b.client_id),c.set("client_secret",V(b.client_secret));break;case"private_key_jwt":{if(X("private_key_jwt",b.client_secret),void 0===e)throw TypeError('"options.clientPrivateKey" must be provided when "client.token_endpoint_auth_method" is "private_key_jwt"');let{key:d,kid:f,modifyAssertion:g}=M(e);if(!y(d))throw TypeError('"options.clientPrivateKey.key" must be a private CryptoKey');c.set("client_id",b.client_id),c.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),c.set("client_assertion",await S(a,b,d,f,g));break}case"tls_client_auth":case"self_signed_tls_client_auth":case"none":X(b.token_endpoint_auth_method,b.client_secret),W(b.token_endpoint_auth_method,e),c.set("client_id",b.client_id);break;default:throw new t("unsupported client token_endpoint_auth_method")}}async function Z(a,b,c){if(!c.usages.includes("sign"))throw TypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"');let d=`${r(q(JSON.stringify(a)))}.${r(q(JSON.stringify(b)))}`,e=r(await crypto.subtle.sign(a2(c),c,q(d)));return`${d}.${e}`}async function $(a,b,c,d){let e;T(a),U(b),c=new URLSearchParams(c);let{key:f,kid:g,modifyAssertion:h}=M(d);if(!y(f))throw TypeError('"privateKey.key" must be a private CryptoKey');c.set("client_id",b.client_id);let i=R()+P(b),j={...Object.fromEntries(c.entries()),jti:H(),aud:a.issuer,exp:i+60,iat:i,nbf:i,iss:b.client_id};c.has("resource")&&(e=c.getAll("resource"))&&e.length>1&&(j.resource=e);{let a=c.get("max_age");if(null!==a&&(j.max_age=parseInt(a,10),!Number.isFinite(j.max_age)))throw new v('"max_age" parameter must be a number')}{let a=c.get("claims");if(null!==a){try{j.claims=JSON.parse(a)}catch(a){throw new v('failed to parse the "claims" parameter as JSON',{cause:a})}if(!B(j.claims))throw new v('"claims" parameter must be a JSON with a top level object')}}{let a=c.get("authorization_details");if(null!==a){try{j.authorization_details=JSON.parse(a)}catch(a){throw new v('failed to parse the "authorization_details" parameter as JSON',{cause:a})}if(!Array.isArray(j.authorization_details))throw new v('"authorization_details" parameter must be a JSON with a top level array')}}let k={alg:O(f),typ:"oauth-authz-req+jwt",kid:g};return h?.(k,j),Z(k,j,f)}async function _(a,b,c,d,e,f){let{privateKey:g,publicKey:h,nonce:i=w.get(c.origin)}=b;if(!y(g))throw TypeError('"DPoP.privateKey" must be a private CryptoKey');if(!(x(h)&&"public"===h.type))throw TypeError('"DPoP.publicKey" must be a public CryptoKey');if(void 0!==i&&!F(i))throw TypeError('"DPoP.nonce" must be a non-empty string or undefined');if(!h.extractable)throw TypeError('"DPoP.publicKey.extractable" must be true');let j=R()+e,l={alg:O(g),typ:"dpop+jwt",jwk:await ab(h)},m={iat:j,jti:H(),htm:d,nonce:i,htu:`${c.origin}${c.pathname}`,ath:f?r(await crypto.subtle.digest("SHA-256",q(f))):void 0};b[k]?.(l,m),a.set("dpop",await Z(l,m,g))}async function aa(a){let{kty:b,e:c,n:d,x:f,y:g,crv:h}=await crypto.subtle.exportKey("jwk",a),i={kty:b,e:c,n:d,x:f,y:g,crv:h};return e.set(a,i),i}async function ab(a){return e||(e=new WeakMap),e.get(a)||aa(a)}function ac(a,b,c){if("string"!=typeof a){if(c)throw TypeError(`"as.mtls_endpoint_aliases.${b}" must be a string`);throw TypeError(`"as.${b}" must be a string`)}return new URL(a)}function ad(a,b,c=!1){return c&&a.mtls_endpoint_aliases&&b in a.mtls_endpoint_aliases?ac(a.mtls_endpoint_aliases[b],b,c):ac(a[b],b,c)}function ae(a,b){return!!(a.use_mtls_endpoint_aliases||b?.[n])}async function af(a,b,c,d){T(a),U(b);let e=ad(a,"pushed_authorization_request_endpoint",ae(b,d)),f=new URLSearchParams(c);f.set("client_id",b.client_id);let g=C(d?.headers);return g.set("accept","application/json"),d?.DPoP!==void 0&&await _(g,d.DPoP,e,"POST",P(b)),at(a,b,"POST",e,f,g,d)}function ag(a){return!("object"!=typeof a||Array.isArray(a))&&null!==a&&void 0!==a.error}let ah=/((?:,|, )?[0-9a-zA-Z!#$%&'*+-.^_`|~]+=)/,ai=/(?:^|, ?)([0-9a-zA-Z!#$%&'*+\-.^_`|~]+)(?=$|[ ,])/g;function aj(a){if(!g(a,Response))throw TypeError('"response" must be an instance of Response');let b=a.headers.get("www-authenticate");if(null===b)return;let c=[];for(let{1:a,index:d}of b.matchAll(ai))c.push([a,d]);if(c.length)return c.map(([a,c],d,e)=>{let f=e[d+1];return function(a,b){let c=b.split(ah).slice(1);if(!c.length)return{scheme:a.toLowerCase(),parameters:{}};c[c.length-1]=c[c.length-1].replace(/,$/,"");let d={};for(let a=1;a<c.length;a+=2){var e;let b=a;if('"'===c[b][0])for(;'"'!==c[b].slice(-1)&&++a<c.length;)c[b]+=c[a];d[c[b-1].replace(/^(?:, ?)|=$/g,"").toLowerCase()]=(e=c[b]).length>=2&&'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}return{scheme:a.toLowerCase(),parameters:d}}(a,f?b.slice(c,f[1]):b.slice(c))})}async function ak(a,b,c){let d;if(T(a),U(b),!g(c,Response))throw TypeError('"response" must be an instance of Response');if(201!==c.status){let a;if(a=await a0(c))return a;throw new v('"response" is not a conform Pushed Authorization Request Endpoint response')}aX(c);try{d=await c.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}if(!B(d))throw new v('"response" body must be a top level object');if(!F(d.request_uri))throw new v('"response" body "request_uri" property must be a non-empty string');if("number"!=typeof d.expires_in||d.expires_in<=0)throw new v('"response" body "expires_in" property must be a positive number');return d}async function al(a,b,c,d,e,f){if(!F(a))throw TypeError('"accessToken" must be a non-empty string');if(!(c instanceof URL))throw TypeError('"url" must be an instance of URL');return d=C(d),f?.DPoP===void 0?d.set("authorization",`Bearer ${a}`):(await _(d,f.DPoP,c,b.toUpperCase(),P({[h]:f?.[h]}),a),d.set("authorization",`DPoP ${a}`)),(f?.[j]||fetch)(c.href,{body:e,headers:Object.fromEntries(d.entries()),method:b,redirect:"manual",signal:f?.signal?D(f.signal):null}).then(A)}async function am(a,b,c,d){T(a),U(b);let e=ad(a,"userinfo_endpoint",ae(b,d)),f=C(d?.headers);return b.userinfo_signed_response_alg?f.set("accept","application/jwt"):(f.set("accept","application/json"),f.append("accept","application/jwt")),al(c,"GET",e,f,null,{...d,[h]:P(b)})}function an(a,b,c,d){f||(f=new WeakMap),f.set(a,{jwks:b,uat:c,get age(){return R()-this.uat}}),d&&Object.assign(d,{jwks:structuredClone(b),uat:c})}function ao(a,b){f?.delete(a),delete b?.jwks,delete b?.uat}async function ap(a,b,c){var d;let e,g,h,{alg:i,kid:j}=c;if(function(a){if(!z.includes(a))throw new t('unsupported JWS "alg" identifier')}(i),!f?.has(a)&&!("object"!=typeof(d=b?.[m])||null===d||!("uat"in d)||"number"!=typeof d.uat||R()-d.uat>=300)&&"jwks"in d&&B(d.jwks)&&Array.isArray(d.jwks.keys)&&Array.prototype.every.call(d.jwks.keys,B)&&an(a,b?.[m].jwks,b?.[m].uat),f?.has(a)){if({jwks:e,age:g}=f.get(a),g>=300)return ao(a,b?.[m]),ap(a,b,c)}else e=await a$(a,b).then(a_),g=0,an(a,e,R(),b?.[m]);switch(i.slice(0,2)){case"RS":case"PS":h="RSA";break;case"ES":h="EC";break;case"Ed":h="OKP";break;default:throw new t}let{0:k,length:l}=e.keys.filter(a=>{if(a.kty!==h||void 0!==j&&j!==a.kid||void 0!==a.alg&&i!==a.alg||void 0!==a.use&&"sig"!==a.use||a.key_ops?.includes("verify")===!1)return!1;switch(!0){case"ES256"===i&&"P-256"!==a.crv:case"ES384"===i&&"P-384"!==a.crv:case"ES512"===i&&"P-521"!==a.crv:case"EdDSA"===i&&"Ed25519"!==a.crv&&"Ed448"!==a.crv:return!1}return!0});if(!l){if(g>=60)return ao(a,b?.[m]),ap(a,b,c);throw new v("error when selecting a JWT verification key, no applicable keys found")}if(1!==l)throw new v('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required');let n=await bg(i,k);if("public"!==n.type)throw new v("jwks_uri must only contain public keys");return n}let aq=Symbol();function ar(a){return a.headers.get("content-type")?.split(";")[0]}async function as(a,b,c,d){let e;if(T(a),U(b),!g(d,Response))throw TypeError('"response" must be an instance of Response');if(200!==d.status)throw new v('"response" is not a conform UserInfo Endpoint response');if("application/jwt"===ar(d)){aX(d);let{claims:c,jwt:f}=await a5(await d.text(),ba.bind(void 0,b.userinfo_signed_response_alg,a.userinfo_signing_alg_values_supported),a3,P(b),Q(b),b[l]).then(aF.bind(void 0,b.client_id)).then(aH.bind(void 0,a.issuer));ax.set(d,f),e=c}else{if(b.userinfo_signed_response_alg)throw new v("JWT UserInfo Response expected");aX(d);try{e=await d.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}}if(!B(e))throw new v('"response" body must be a top level object');if(!F(e.sub))throw new v('"response" body "sub" property must be a non-empty string');if(c===aq);else{if(!F(c))throw new v('"expectedSubject" must be a non-empty string');if(e.sub!==c)throw new v('unexpected "response" body "sub" value')}return e}async function at(a,b,c,d,e,f,g){return await Y(a,b,e,f,g?.clientPrivateKey),f.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(g?.[j]||fetch)(d.href,{body:e,headers:Object.fromEntries(f.entries()),method:c,redirect:"manual",signal:g?.signal?D(g.signal):null}).then(A)}async function au(a,b,c,d,e){let f=ad(a,"token_endpoint",ae(b,e));d.set("grant_type",c);let g=C(e?.headers);return g.set("accept","application/json"),e?.DPoP!==void 0&&await _(g,e.DPoP,f,"POST",P(b)),at(a,b,"POST",f,d,g,e)}async function av(a,b,c,d){if(T(a),U(b),!F(c))throw TypeError('"refreshToken" must be a non-empty string');let e=new URLSearchParams(d?.additionalParameters);return e.set("refresh_token",c),au(a,b,"refresh_token",e,d)}let aw=new WeakMap,ax=new WeakMap;function ay(a){if(!a.id_token)return;let b=aw.get(a);if(!b)throw TypeError('"ref" was already garbage collected or did not resolve from the proper sources');return b[0]}async function az(a,b,c){let d;if(T(a),!aw.has(b))throw new v('"ref" does not contain an ID Token to verify the signature of');let{0:e,1:f,2:g}=aw.get(b)[1].split("."),h=JSON.parse(q(r(e)));if(h.alg.startsWith("HS"))throw new t;d=await ap(a,c,h),await a4(e,f,d,r(g))}async function aA(a,b,c){let d;if(T(a),!ax.has(b))throw new v('"ref" does not contain a processed JWT Response to verify the signature of');let{0:e,1:f,2:g}=ax.get(b).split("."),h=JSON.parse(q(r(e)));if(h.alg.startsWith("HS"))throw new t;d=await ap(a,c,h),await a4(e,f,d,r(g))}function aB(a,b,c){return aA(a,b,c)}function aC(a,b,c){return aA(a,b,c)}async function aD(a,b,c,d=!1,e=!1){let f;if(T(a),U(b),!g(c,Response))throw TypeError('"response" must be an instance of Response');if(200!==c.status){let a;if(a=await a0(c))return a;throw new v('"response" is not a conform Token Endpoint response')}aX(c);try{f=await c.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}if(!B(f))throw new v('"response" body must be a top level object');if(!F(f.access_token))throw new v('"response" body "access_token" property must be a non-empty string');if(!F(f.token_type))throw new v('"response" body "token_type" property must be a non-empty string');if(f.token_type=f.token_type.toLowerCase(),"dpop"!==f.token_type&&"bearer"!==f.token_type)throw new t("unsupported `token_type` value");if(void 0!==f.expires_in&&("number"!=typeof f.expires_in||f.expires_in<=0))throw new v('"response" body "expires_in" property must be a positive number');if(!e&&void 0!==f.refresh_token&&!F(f.refresh_token))throw new v('"response" body "refresh_token" property must be a non-empty string');if(void 0!==f.scope&&"string"!=typeof f.scope)throw new v('"response" body "scope" property must be a string');if(!d){if(void 0!==f.id_token&&!F(f.id_token))throw new v('"response" body "id_token" property must be a non-empty string');if(f.id_token){let{claims:c,jwt:d}=await a5(f.id_token,ba.bind(void 0,b.id_token_signed_response_alg,a.id_token_signing_alg_values_supported),a3,P(b),Q(b),b[l]).then(aM.bind(void 0,["aud","exp","iat","iss","sub"])).then(aI.bind(void 0,a.issuer)).then(aG.bind(void 0,b.client_id));if(Array.isArray(c.aud)&&1!==c.aud.length){if(void 0===c.azp)throw new v('ID Token "aud" (audience) claim includes additional untrusted audiences');if(c.azp!==b.client_id)throw new v('unexpected ID Token "azp" (authorized party) claim value')}if(void 0!==c.auth_time&&(!Number.isFinite(c.auth_time)||1!==Math.sign(c.auth_time)))throw new v('ID Token "auth_time" (authentication time) must be a positive number');aw.set(f,[c,d])}}return f}async function aE(a,b,c){return aD(a,b,c)}function aF(a,b){return void 0!==b.claims.aud?aG(a,b):b}function aG(a,b){if(Array.isArray(b.claims.aud)){if(!b.claims.aud.includes(a))throw new v('unexpected JWT "aud" (audience) claim value')}else if(b.claims.aud!==a)throw new v('unexpected JWT "aud" (audience) claim value');return b}function aH(a,b){return void 0!==b.claims.iss?aI(a,b):b}function aI(a,b){if(b.claims.iss!==a)throw new v('unexpected JWT "iss" (issuer) claim value');return b}let aJ=new WeakSet;async function aK(a,b,c,d,e,f){if(T(a),U(b),!aJ.has(c))throw TypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()');if(!F(d))throw TypeError('"redirectUri" must be a non-empty string');if(!F(e))throw TypeError('"codeVerifier" must be a non-empty string');let g=bb(c,"code");if(!g)throw new v('no authorization code in "callbackParameters"');let h=new URLSearchParams(f?.additionalParameters);return h.set("redirect_uri",d),h.set("code_verifier",e),h.set("code",g),au(a,b,"authorization_code",h,f)}let aL={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation"};function aM(a,b){for(let c of a)if(void 0===b.claims[c])throw new v(`JWT "${c}" (${aL[c]}) claim missing`);return b}let aN=Symbol(),aO=Symbol();async function aP(a,b,c,d,e){let f=await aD(a,b,c);if(ag(f))return f;if(!F(f.id_token))throw new v('"response" body "id_token" property must be a non-empty string');e??(e=b.default_max_age??aO);let g=ay(f);if((b.require_auth_time||e!==aO)&&void 0===g.auth_time)throw new v('ID Token "auth_time" (authentication time) claim missing');if(e!==aO){if("number"!=typeof e||e<0)throw TypeError('"maxAge" must be a non-negative number');let a=R()+P(b),c=Q(b);if(g.auth_time+e<a-c)throw new v("too much time has elapsed since the last End-User authentication")}switch(d){case void 0:case aN:if(void 0!==g.nonce)throw new v('unexpected ID Token "nonce" claim value');break;default:if(!F(d))throw TypeError('"expectedNonce" must be a non-empty string');if(void 0===g.nonce)throw new v('ID Token "nonce" claim missing');if(g.nonce!==d)throw new v('unexpected ID Token "nonce" claim value')}return f}async function aQ(a,b,c){let d=await aD(a,b,c,!0);if(ag(d))return d;if(void 0!==d.id_token){if("string"==typeof d.id_token&&d.id_token.length)throw new v("Unexpected ID Token returned, use processAuthorizationCodeOpenIDResponse() for OpenID Connect callback processing");delete d.id_token}return d}function aR(a,b){if("string"!=typeof b.header.typ||b.header.typ.toLowerCase().replace(/^application\//,"")!==a)throw new v('unexpected JWT "typ" header parameter value');return b}async function aS(a,b,c,d){return T(a),U(b),au(a,b,"client_credentials",new URLSearchParams(c),d)}async function aT(a,b,c,d,e){if(T(a),U(b),!F(c))throw TypeError('"grantType" must be a non-empty string');return au(a,b,c,new URLSearchParams(d),e)}async function aU(a,b,c){let d=await aD(a,b,c,!0,!0);return ag(d),d}async function aV(a,b,c,d){if(T(a),U(b),!F(c))throw TypeError('"token" must be a non-empty string');let e=ad(a,"revocation_endpoint",ae(b,d)),f=new URLSearchParams(d?.additionalParameters);f.set("token",c);let g=C(d?.headers);return g.delete("accept"),at(a,b,"POST",e,f,g,d)}async function aW(a){if(!g(a,Response))throw TypeError('"response" must be an instance of Response');if(200!==a.status){let b;if(b=await a0(a))return b;throw new v('"response" is not a conform Revocation Endpoint response')}}function aX(a){if(a.bodyUsed)throw TypeError('"response" body has been used already')}async function aY(a,b,c,d){if(T(a),U(b),!F(c))throw TypeError('"token" must be a non-empty string');let e=ad(a,"introspection_endpoint",ae(b,d)),f=new URLSearchParams(d?.additionalParameters);f.set("token",c);let g=C(d?.headers);return d?.requestJwtResponse??b.introspection_signed_response_alg?g.set("accept","application/token-introspection+jwt"):g.set("accept","application/json"),at(a,b,"POST",e,f,g,d)}async function aZ(a,b,c){let d;if(T(a),U(b),!g(c,Response))throw TypeError('"response" must be an instance of Response');if(200!==c.status){let a;if(a=await a0(c))return a;throw new v('"response" is not a conform Introspection Endpoint response')}if("application/token-introspection+jwt"===ar(c)){aX(c);let{claims:e,jwt:f}=await a5(await c.text(),ba.bind(void 0,b.introspection_signed_response_alg,a.introspection_signing_alg_values_supported),a3,P(b),Q(b),b[l]).then(aR.bind(void 0,"token-introspection+jwt")).then(aM.bind(void 0,["aud","iat","iss"])).then(aI.bind(void 0,a.issuer)).then(aG.bind(void 0,b.client_id));if(ax.set(c,f),!B(d=e.token_introspection))throw new v('JWT "token_introspection" claim must be a JSON object')}else{aX(c);try{d=await c.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}if(!B(d))throw new v('"response" body must be a top level object')}if("boolean"!=typeof d.active)throw new v('"response" body "active" property must be a boolean');return d}async function a$(a,b){T(a);let c=ad(a,"jwks_uri"),d=C(b?.headers);return d.set("accept","application/json"),d.append("accept","application/jwk-set+json"),(b?.[j]||fetch)(c.href,{headers:Object.fromEntries(d.entries()),method:"GET",redirect:"manual",signal:b?.signal?D(b.signal):null}).then(A)}async function a_(a){let b;if(!g(a,Response))throw TypeError('"response" must be an instance of Response');if(200!==a.status)throw new v('"response" is not a conform JSON Web Key Set response');aX(a);try{b=await a.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}if(!B(b))throw new v('"response" body must be a top level object');if(!Array.isArray(b.keys))throw new v('"response" body "keys" property must be an array');if(!Array.prototype.every.call(b.keys,B))throw new v('"response" body "keys" property members must be JWK formatted objects');return b}async function a0(a){if(a.status>399&&a.status<500){aX(a);try{let b=await a.json();if(B(b)&&"string"==typeof b.error&&b.error.length)return void 0!==b.error_description&&"string"!=typeof b.error_description&&delete b.error_description,void 0!==b.error_uri&&"string"!=typeof b.error_uri&&delete b.error_uri,void 0!==b.algs&&"string"!=typeof b.algs&&delete b.algs,void 0!==b.scope&&"string"!=typeof b.scope&&delete b.scope,b}catch{}}}function a1(a){if("number"!=typeof a.modulusLength||a.modulusLength<2048)throw new v(`${a.name} modulusLength must be at least 2048 bits`)}function a2(a){switch(a.algorithm.name){case"ECDSA":return{name:a.algorithm.name,hash:function(a){switch(a){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new t}}(a.algorithm.namedCurve)};case"RSA-PSS":switch(a1(a.algorithm),a.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:a.algorithm.name,saltLength:parseInt(a.algorithm.hash.name.slice(-3),10)>>3};default:throw new t}case"RSASSA-PKCS1-v1_5":return a1(a.algorithm),a.algorithm.name;case"Ed448":case"Ed25519":return a.algorithm.name}throw new t}let a3=Symbol();async function a4(a,b,c,d){let e=`${a}.${b}`;if(!await crypto.subtle.verify(a2(c),c,d,q(e)))throw new v("JWT signature verification failed")}async function a5(a,b,c,d,e,f){let g,h,i,{0:j,1:k,2:l,length:m}=a.split(".");if(5===m)if(void 0!==f)a=await f(a),{0:j,1:k,2:l,length:m}=a.split(".");else throw new t("JWE structure JWTs are not supported");if(3!==m)throw new v("Invalid JWT");try{g=JSON.parse(q(r(j)))}catch(a){throw new v("failed to parse JWT Header body as base64url encoded JSON",{cause:a})}if(!B(g))throw new v("JWT Header must be a top level object");if(b(g),void 0!==g.crit)throw new v('unexpected JWT "crit" header parameter');let n=r(l);c!==a3&&(h=await c(g),await a4(j,k,h,n));try{i=JSON.parse(q(r(k)))}catch(a){throw new v("failed to parse JWT Payload body as base64url encoded JSON",{cause:a})}if(!B(i))throw new v("JWT Payload must be a top level object");let o=R()+d;if(void 0!==i.exp){if("number"!=typeof i.exp)throw new v('unexpected JWT "exp" (expiration time) claim type');if(i.exp<=o-e)throw new v('unexpected JWT "exp" (expiration time) claim value, timestamp is <= now()')}if(void 0!==i.iat&&"number"!=typeof i.iat)throw new v('unexpected JWT "iat" (issued at) claim type');if(void 0!==i.iss&&"string"!=typeof i.iss)throw new v('unexpected JWT "iss" (issuer) claim type');if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new v('unexpected JWT "nbf" (not before) claim type');if(i.nbf>o+e)throw new v('unexpected JWT "nbf" (not before) claim value, timestamp is > now()')}if(void 0!==i.aud&&"string"!=typeof i.aud&&!Array.isArray(i.aud))throw new v('unexpected JWT "aud" (audience) claim type');return{header:g,claims:i,signature:n,key:h,jwt:a}}async function a6(a,b,c,d,e){if(T(a),U(b),c instanceof URL&&(c=c.searchParams),!(c instanceof URLSearchParams))throw TypeError('"parameters" must be an instance of URLSearchParams, or URL');let f=bb(c,"response");if(!f)throw new v('"parameters" does not contain a JARM response');let{claims:g}=await a5(f,ba.bind(void 0,b.authorization_signed_response_alg,a.authorization_signing_alg_values_supported),ap.bind(void 0,a,e),P(b),Q(b),b[l]).then(aM.bind(void 0,["aud","exp","iss"])).then(aI.bind(void 0,a.issuer)).then(aG.bind(void 0,b.client_id)),h=new URLSearchParams;for(let[a,b]of Object.entries(g))"string"==typeof b&&"aud"!==a&&h.set(a,b);return be(a,b,h,d)}async function a7(a,b,c){let d;switch(a){case"RS256":case"PS256":case"ES256":d="SHA-256";break;case"RS384":case"PS384":case"ES384":d="SHA-384";break;case"RS512":case"PS512":case"ES512":d="SHA-512";break;case"EdDSA":if("Ed25519"===c.algorithm.name){d="SHA-512";break}throw new t;default:throw new t}let e=await crypto.subtle.digest(d,q(b));return r(e.slice(0,e.byteLength/2))}async function a8(a,b,c,d){return b===await a7(c,a,d)}async function a9(a,b,c,d,e,f,g){if(T(a),U(b),c instanceof URL){if(!c.hash.length)throw TypeError('"parameters" as an instance of URL must contain a hash (fragment) with the Authorization Response parameters');c=new URLSearchParams(c.hash.slice(1))}if(!(c instanceof URLSearchParams))throw TypeError('"parameters" must be an instance of URLSearchParams');let h=bb(c=new URLSearchParams(c),"id_token");switch(c.delete("id_token"),e){case void 0:case bd:break;default:if(!F(e))throw TypeError('"expectedState" must be a non-empty string')}let i=be({...a,authorization_response_iss_parameter_supported:!1},b,c,e);if(ag(i))return i;if(!h)throw new v('"parameters" does not contain an ID Token');let j=bb(c,"code");if(!j)throw new v('"parameters" does not contain an Authorization Code');let k=["aud","exp","iat","iss","sub","nonce","c_hash"];"string"==typeof e&&k.push("s_hash");let{claims:m,header:n,key:o}=await a5(h,ba.bind(void 0,b.id_token_signed_response_alg,a.id_token_signing_alg_values_supported),ap.bind(void 0,a,g),P(b),Q(b),b[l]).then(aM.bind(void 0,k)).then(aI.bind(void 0,a.issuer)).then(aG.bind(void 0,b.client_id)),p=P(b),q=R()+p;if(m.iat<q-3600)throw new v('unexpected JWT "iat" (issued at) claim value, it is too far in the past');if("string"!=typeof m.c_hash||await a8(j,m.c_hash,n.alg,o)!==!0)throw new v('invalid ID Token "c_hash" (code hash) claim value');if(void 0!==m.s_hash&&"string"!=typeof e)throw new v('could not verify ID Token "s_hash" (state hash) claim value');if("string"==typeof e&&("string"!=typeof m.s_hash||await a8(e,m.s_hash,n.alg,o)!==!0))throw new v('invalid ID Token "s_hash" (state hash) claim value');if(void 0!==m.auth_time&&(!Number.isFinite(m.auth_time)||1!==Math.sign(m.auth_time)))throw new v('ID Token "auth_time" (authentication time) must be a positive number');if(f??(f=b.default_max_age??aO),(b.require_auth_time||f!==aO)&&void 0===m.auth_time)throw new v('ID Token "auth_time" (authentication time) claim missing');if(f!==aO){if("number"!=typeof f||f<0)throw TypeError('"maxAge" must be a non-negative number');let a=R()+P(b),c=Q(b);if(m.auth_time+f<a-c)throw new v("too much time has elapsed since the last End-User authentication")}if(!F(d))throw TypeError('"expectedNonce" must be a non-empty string');if(m.nonce!==d)throw new v('unexpected ID Token "nonce" claim value');if(Array.isArray(m.aud)&&1!==m.aud.length){if(void 0===m.azp)throw new v('ID Token "aud" (audience) claim includes additional untrusted audiences');if(m.azp!==b.client_id)throw new v('unexpected ID Token "azp" (authorized party) claim value')}return i}function ba(a,b,c){if(void 0!==a){if(c.alg!==a)throw new v('unexpected JWT "alg" header parameter');return}if(Array.isArray(b)){if(!b.includes(c.alg))throw new v('unexpected JWT "alg" header parameter');return}if("RS256"!==c.alg)throw new v('unexpected JWT "alg" header parameter')}function bb(a,b){let{0:c,length:d}=a.getAll(b);if(d>1)throw new v(`"${b}" parameter must be provided only once`);return c}let bc=Symbol(),bd=Symbol();function be(a,b,c,d){var e;if(T(a),U(b),c instanceof URL&&(c=c.searchParams),!(c instanceof URLSearchParams))throw TypeError('"parameters" must be an instance of URLSearchParams, or URL');if(bb(c,"response"))throw new v('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()');let f=bb(c,"iss"),g=bb(c,"state");if(!f&&a.authorization_response_iss_parameter_supported)throw new v('response parameter "iss" (issuer) missing');if(f&&f!==a.issuer)throw new v('unexpected "iss" (issuer) response parameter value');switch(d){case void 0:case bd:if(void 0!==g)throw new v('unexpected "state" response parameter encountered');break;case bc:break;default:if(!F(d))throw new v('"expectedState" must be a non-empty string');if(void 0===g)throw new v('response parameter "state" missing');if(g!==d)throw new v('unexpected "state" response parameter value')}let h=bb(c,"error");if(h)return{error:h,error_description:bb(c,"error_description"),error_uri:bb(c,"error_uri")};let i=bb(c,"id_token"),j=bb(c,"token");if(void 0!==i||void 0!==j)throw new t("implicit and hybrid flows are not supported");return e=new URLSearchParams(c),aJ.add(e),e}function bf(a,b){switch(a){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${a.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"EdDSA":switch(b){case"Ed25519":case"Ed448":return b;default:throw new t}default:throw new t}}async function bg(a,b){let{ext:c,key_ops:d,use:e,...f}=b;return crypto.subtle.importKey("jwk",f,bf(a,b.crv),!0,["verify"])}async function bh(a,b,c,d){T(a),U(b);let e=ad(a,"device_authorization_endpoint",ae(b,d)),f=new URLSearchParams(c);f.set("client_id",b.client_id);let g=C(d?.headers);return g.set("accept","application/json"),at(a,b,"POST",e,f,g,d)}async function bi(a,b,c){let d;if(T(a),U(b),!g(c,Response))throw TypeError('"response" must be an instance of Response');if(200!==c.status){let a;if(a=await a0(c))return a;throw new v('"response" is not a conform Device Authorization Endpoint response')}aX(c);try{d=await c.json()}catch(a){throw new v('failed to parse "response" body as JSON',{cause:a})}if(!B(d))throw new v('"response" body must be a top level object');if(!F(d.device_code))throw new v('"response" body "device_code" property must be a non-empty string');if(!F(d.user_code))throw new v('"response" body "user_code" property must be a non-empty string');if(!F(d.verification_uri))throw new v('"response" body "verification_uri" property must be a non-empty string');if("number"!=typeof d.expires_in||d.expires_in<=0)throw new v('"response" body "expires_in" property must be a positive number');if(void 0!==d.verification_uri_complete&&!F(d.verification_uri_complete))throw new v('"response" body "verification_uri_complete" property must be a non-empty string');if(void 0!==d.interval&&("number"!=typeof d.interval||d.interval<=0))throw new v('"response" body "interval" property must be a positive number');return d}async function bj(a,b,c,d){if(T(a),U(b),!F(c))throw TypeError('"deviceCode" must be a non-empty string');let e=new URLSearchParams(d?.additionalParameters);return e.set("device_code",c),au(a,b,"urn:ietf:params:oauth:grant-type:device_code",e,d)}async function bk(a,b,c){return aD(a,b,c)}async function bl(a,b){if(!F(a))throw TypeError('"alg" must be a non-empty string');let c=bf(a,"EdDSA"===a?b?.crv??"Ed25519":void 0);return(a.startsWith("PS")||a.startsWith("RS"))&&Object.assign(c,{modulusLength:b?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])}),crypto.subtle.generateKey(c,b?.extractable??!1,["sign","verify"])}function bm(a){let b=new URL(a);return b.search="",b.hash="",b.href}async function bn(a,b,c,d,e){let f=b.headers.get("dpop");if(null===f)throw new v("operation indicated DPoP use but the request has no DPoP HTTP Header");if(b.headers.get("authorization")?.toLowerCase().startsWith("dpop ")===!1)throw new v("operation indicated DPoP use but the request's Authorization HTTP Header scheme is not DPoP");if("string"!=typeof d.cnf?.jkt)throw new v("operation indicated DPoP use but the JWT Access Token has no jkt confirmation claim");let g=P(e),h=await a5(f,ba.bind(void 0,void 0,a?.dpop_signing_alg_values_supported||z),async({jwk:a,alg:b})=>{if(!a)throw new v("DPoP Proof is missing the jwk header parameter");let c=await bg(b,a);if("public"!==c.type)throw new v("DPoP Proof jwk header parameter must contain a public key");return c},g,Q(e),void 0).then(aR.bind(void 0,"dpop+jwt")).then(aM.bind(void 0,["iat","jti","ath","htm","htu"]));if(Math.abs(R()+g-h.claims.iat)>300)throw new v("DPoP Proof iat is not recent enough");if(h.claims.htm!==b.method)throw new v("DPoP Proof htm mismatch");if("string"!=typeof h.claims.htu||bm(h.claims.htu)!==bm(b.url))throw new v("DPoP Proof htu mismatch");{let a=r(await crypto.subtle.digest("SHA-256",o.encode(c)));if(h.claims.ath!==a)throw new v("DPoP Proof ath mismatch")}{let a;switch(h.header.jwk.kty){case"EC":a={crv:h.header.jwk.crv,kty:h.header.jwk.kty,x:h.header.jwk.x,y:h.header.jwk.y};break;case"OKP":a={crv:h.header.jwk.crv,kty:h.header.jwk.kty,x:h.header.jwk.x};break;case"RSA":a={e:h.header.jwk.e,kty:h.header.jwk.kty,n:h.header.jwk.n};break;default:throw new t}let b=r(await crypto.subtle.digest("SHA-256",o.encode(JSON.stringify(a))));if(d.cnf.jkt!==b)throw new v("JWT Access Token confirmation mismatch")}}async function bo(a,b,c,d){if(T(a),!g(b,Request))throw TypeError('"request" must be an instance of Request');if(!F(c))throw new v('"expectedAudience" must be a non-empty string');let e=b.headers.get("authorization");if(null===e)throw new v('"request" is missing an Authorization HTTP Header');let{0:f,1:h,length:i}=e.split(" ");switch(f=f.toLowerCase()){case"dpop":case"bearer":break;default:throw new t("unsupported Authorization HTTP Header scheme")}if(2!==i)throw new v("invalid Authorization HTTP Header format");let j=["iss","exp","aud","sub","iat","jti","client_id"];(d?.requireDPoP||"dpop"===f||b.headers.has("dpop"))&&j.push("cnf");let{claims:k}=await a5(h,ba.bind(void 0,void 0,z),ap.bind(void 0,a,d),P(d),Q(d),void 0).then(aR.bind(void 0,"at+jwt")).then(aM.bind(void 0,j)).then(aI.bind(void 0,a.issuer)).then(aG.bind(void 0,c));for(let a of["client_id","jti","sub"])if("string"!=typeof k[a])throw new v(`unexpected JWT "${a}" claim type`);if("cnf"in k){if(!B(k.cnf))throw new v('unexpected JWT "cnf" (confirmation) claim value');let{0:a,length:b}=Object.keys(k.cnf);if(b){if(1!==b)throw new t("multiple confirmation claims are not supported");if("jkt"!==a)throw new t("unsupported JWT Confirmation method")}}return(d?.requireDPoP||"dpop"===f||k.cnf?.jkt!==void 0||b.headers.has("dpop"))&&await bn(a,b,h,k,d),k}let bp=j,bq=j,br=n,bs=n,bt=(...a)=>a9(...a),bu=(...a)=>bo(...a),bv=(...a)=>(function(a,b,c){return aA(a,b,c)})(...a),bw=m},3486:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.clientGetter=b.EdgeClient=void 0;let d=c(7613),e=d.__importStar(c(3476)),f=d.__importStar(c(2743)),g=c(8277),h=c(1524),i=c(1252),j=d.__importDefault(c(236));class k extends g.AbstractClient{constructor(a,b){if(super(a,b),this.config=a,this.telemetry=b,"code"!==a.authorizationParams.response_type)throw Error("This SDK only supports `response_type=code` when used in an Edge runtime.");this.httpOptions=()=>{let c=new Headers;if(a.enableTelemetry){let{name:a,version:d}=b;c.set("User-Agent",`${a}/${d}`),c.set("Auth0-Client",(a=>{let b=new TextEncoder().encode(a),c=[];for(let a=0;a<b.length;a+=32768)c.push(String.fromCharCode.apply(null,b.subarray(a,a+32768)));return btoa(c.join(""))})(JSON.stringify({name:a,version:d,env:{edge:!0}})))}return{signal:AbortSignal.timeout(this.config.httpTimeout),headers:c}}}async getClient(){if(this.as)return[this.as,this.client];let a=new URL(this.config.issuerBaseURL);try{this.as=await e.discoveryRequest(a,this.httpOptions()).then(b=>e.processDiscoveryResponse(a,b))}catch(a){throw new h.DiscoveryError(a,this.config.issuerBaseURL)}if(this.config.pushedAuthorizationRequests&&!this.as.pushed_authorization_request_endpoint)throw TypeError("pushed_authorization_request_endpoint must be configured on the issuer to use pushedAuthorizationRequests");return this.client=Object.assign(Object.assign({client_id:this.config.clientID},!this.config.clientAssertionSigningKey&&{client_secret:this.config.clientSecret}),{token_endpoint_auth_method:this.config.clientAuthMethod,id_token_signed_response_alg:this.config.idTokenSigningAlg,[e.clockTolerance]:this.config.clockTolerance}),[this.as,this.client]}async authorizationUrl(a){let[b,c]=await this.getClient();if(this.config.pushedAuthorizationRequests){let{clientAssertionSigningKey:d,clientAssertionSigningAlg:g}=this.config,i=d;!i||i instanceof CryptoKey||(i=await f.importPKCS8(i,g||"RS256"));let j=await e.pushedAuthorizationRequest(b,c,a,Object.assign(Object.assign({},i&&{clientPrivateKey:i,[e.modifyAssertion](a,c){Array.isArray(c.aud)&&(c.aud=b.issuer)}}),this.httpOptions())),k=await e.processPushedAuthorizationResponse(b,c,j);if(e.isOAuth2Error(k))throw new h.IdentityProviderError({message:k.error_description||k.error,error:k.error,error_description:k.error_description});a={request_uri:k.request_uri}}let d=new URL(b.authorization_endpoint);return d.searchParams.set("client_id",this.config.clientID),Object.entries(a).forEach(([a,b])=>{null!=b&&d.searchParams.set(a,String(b))}),d.toString()}async callbackParams(a,b){let c,[d,f]=await this.getClient(),g="GET"===a.getMethod().toUpperCase()?new URL(a.getUrl()):new URLSearchParams(await a.getBody());try{c=e.validateAuthResponse(d,f,g,b)}catch(a){throw new h.ApplicationError(a)}if(e.isOAuth2Error(c))throw new h.IdentityProviderError({message:c.error_description||c.error,error:c.error,error_description:c.error_description});return c}async callback(a,b,c,d){let[g,i]=await this.getClient(),{clientAssertionSigningKey:j,clientAssertionSigningAlg:k}=this.config,l=j;!l||l instanceof CryptoKey||(l=await f.importPKCS8(l,k||"RS256"));let m=await e.authorizationCodeGrantRequest(g,i,b,a,c.code_verifier,Object.assign(Object.assign({additionalParameters:d.exchangeBody},l&&{clientPrivateKey:l,[e.modifyAssertion](a,b){Array.isArray(b.aud)&&(b.aud=g.issuer)}}),this.httpOptions())),n=await e.processAuthorizationCodeOpenIDResponse(g,i,m,c.nonce,c.max_age);if(e.isOAuth2Error(n))throw new h.IdentityProviderError({message:n.error_description||n.error,error:n.error,error_description:n.error_description});return n}async endSessionUrl(a){let[b]=await this.getClient(),c=new URL(b.issuer);if(this.config.idpLogout&&(this.config.auth0Logout||c.hostname.match("\\.auth0\\.com$")&&!1!==this.config.auth0Logout)){let{post_logout_redirect_uri:c}=a,e=d.__rest(a,["post_logout_redirect_uri"]),f=new URL((0,j.default)(b.issuer,"/v2/logout"));return c&&f.searchParams.set("returnTo",c),f.searchParams.set("client_id",this.config.clientID),Object.entries(e).forEach(([a,b])=>{null!=b&&f.searchParams.set(a,b)}),f.toString()}if(!b.end_session_endpoint)throw Error("RP Initiated Logout is not supported on your Authorization Server.");let e=new URL(b.end_session_endpoint);return Object.entries(a).forEach(([a,b])=>{null!=b&&e.searchParams.set(a,b)}),e.searchParams.set("client_id",this.config.clientID),e.toString()}async userinfo(a){let[b,c]=await this.getClient(),d=await e.userInfoRequest(b,c,a,this.httpOptions());try{return await e.processUserInfoResponse(b,c,e.skipSubjectCheck,d)}catch(a){throw new h.UserInfoError(a.message)}}async refresh(a,b){let[c,d]=await this.getClient(),{clientAssertionSigningKey:g,clientAssertionSigningAlg:j}=this.config,k=g;!k||k instanceof CryptoKey||(k=await f.importPKCS8(k,j||"RS256"));let l=await e.refreshTokenGrantRequest(c,d,a,Object.assign(Object.assign({additionalParameters:b.exchangeBody},k&&{clientPrivateKey:k,[e.modifyAssertion](a,b){Array.isArray(b.aud)&&(b.aud=c.issuer)}}),this.httpOptions())),m=await e.processRefreshTokenResponse(c,d,l);if(e.isOAuth2Error(m))throw new i.AccessTokenError(i.AccessTokenErrorCode.FAILED_REFRESH_GRANT,"The request to refresh the access token failed.",new h.IdentityProviderError({message:m.error_description||m.error,error:m.error,error_description:m.error_description}));return m}generateRandomCodeVerifier(){return e.generateRandomCodeVerifier()}generateRandomNonce(){return e.generateRandomNonce()}calculateCodeChallenge(a){return e.calculatePKCECodeChallenge(a)}async getIssuerMetadata(){let[a]=await this.getClient();return a}}b.EdgeClient=k,b.clientGetter=a=>{let b;return async c=>(b||(b=new k(c,a)),b)}},3720:(a,b,c)=>{b.formatArgs=function(b){if(b[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+b[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;b.splice(1,0,c,"color: inherit");let d=0,e=0;b[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),b.splice(e,0,c)},b.save=function(a){try{a?b.storage.setItem("debug",a):b.storage.removeItem("debug")}catch(a){}},b.load=function(){let a;try{a=b.storage.getItem("debug")||b.storage.getItem("DEBUG")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a},b.useColors=function(){let a;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},b.storage=function(){try{return localStorage}catch(a){}}(),b.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),b.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],b.log=console.debug||console.log||(()=>{}),a.exports=c(2813)(b);let{formatters:d}=a.exports;d.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},3788:(a,b,c)=>{"use strict";c.d(b,{q:()=>f});class d{constructor(a,b,c){this.prev=null,this.next=null,this.key=a,this.data=b,this.size=c}}class e{constructor(){this.prev=null,this.next=null}}class f{constructor(a,b){this.cache=new Map,this.totalSize=0,this.maxSize=a,this.calculateSize=b,this.head=new e,this.tail=new e,this.head.next=this.tail,this.tail.prev=this.head}addToHead(a){a.prev=this.head,a.next=this.head.next,this.head.next.prev=a,this.head.next=a}removeNode(a){a.prev.next=a.next,a.next.prev=a.prev}moveToHead(a){this.removeNode(a),this.addToHead(a)}removeTail(){let a=this.tail.prev;return this.removeNode(a),a}set(a,b){let c=(null==this.calculateSize?void 0:this.calculateSize.call(this,b))??1;if(c>this.maxSize)return void console.warn("Single item size exceeds maxSize");let e=this.cache.get(a);if(e)e.data=b,this.totalSize=this.totalSize-e.size+c,e.size=c,this.moveToHead(e);else{let e=new d(a,b,c);this.cache.set(a,e),this.addToHead(e),this.totalSize+=c}for(;this.totalSize>this.maxSize&&this.cache.size>0;){let a=this.removeTail();this.cache.delete(a.key),this.totalSize-=a.size}}has(a){return this.cache.has(a)}get(a){let b=this.cache.get(a);if(b)return this.moveToHead(b),b.data}*[Symbol.iterator](){let a=this.head.next;for(;a&&a!==this.tail;){let b=a;yield[b.key,b.data],a=a.next}}remove(a){let b=this.cache.get(a);b&&(this.removeNode(b),this.cache.delete(a),this.totalSize-=b.size)}get size(){return this.cache.size}get currentSize(){return this.totalSize}}},3817:(a,b,c)=>{(()=>{"use strict";var b={491:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ContextAPI=void 0;let d=c(223),e=c(172),f=c(930),g="context",h=new d.NoopContextManager;class i{constructor(){}static getInstance(){return this._instance||(this._instance=new i),this._instance}setGlobalContextManager(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}active(){return this._getContextManager().active()}with(a,b,c,...d){return this._getContextManager().with(a,b,c,...d)}bind(a,b){return this._getContextManager().bind(a,b)}_getContextManager(){return(0,e.getGlobal)(g)||h}disable(){this._getContextManager().disable(),(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.ContextAPI=i},930:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagAPI=void 0;let d=c(56),e=c(912),f=c(957),g=c(172);class h{constructor(){function a(a){return function(...b){let c=(0,g.getGlobal)("diag");if(c)return c[a](...b)}}let b=this;b.setLogger=(a,c={logLevel:f.DiagLogLevel.INFO})=>{var d,h,i;if(a===b){let a=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=a.stack)?d:a.message),!1}"number"==typeof c&&(c={logLevel:c});let j=(0,g.getGlobal)("diag"),k=(0,e.createLogLevelDiagLogger)(null!=(h=c.logLevel)?h:f.DiagLogLevel.INFO,a);if(j&&!c.suppressOverrideMessage){let a=null!=(i=Error().stack)?i:"<failed to generate stacktrace>";j.warn(`Current logger will be overwritten from ${a}`),k.warn(`Current logger will overwrite one already registered from ${a}`)}return(0,g.registerGlobal)("diag",k,b,!0)},b.disable=()=>{(0,g.unregisterGlobal)("diag",b)},b.createComponentLogger=a=>new d.DiagComponentLogger(a),b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}static instance(){return this._instance||(this._instance=new h),this._instance}}b.DiagAPI=h},653:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.MetricsAPI=void 0;let d=c(660),e=c(172),f=c(930),g="metrics";class h{constructor(){}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalMeterProvider(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}getMeterProvider(){return(0,e.getGlobal)(g)||d.NOOP_METER_PROVIDER}getMeter(a,b,c){return this.getMeterProvider().getMeter(a,b,c)}disable(){(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.MetricsAPI=h},181:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.PropagationAPI=void 0;let d=c(172),e=c(874),f=c(194),g=c(277),h=c(369),i=c(930),j="propagation",k=new e.NoopTextMapPropagator;class l{constructor(){this.createBaggage=h.createBaggage,this.getBaggage=g.getBaggage,this.getActiveBaggage=g.getActiveBaggage,this.setBaggage=g.setBaggage,this.deleteBaggage=g.deleteBaggage}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalPropagator(a){return(0,d.registerGlobal)(j,a,i.DiagAPI.instance())}inject(a,b,c=f.defaultTextMapSetter){return this._getGlobalPropagator().inject(a,b,c)}extract(a,b,c=f.defaultTextMapGetter){return this._getGlobalPropagator().extract(a,b,c)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,d.unregisterGlobal)(j,i.DiagAPI.instance())}_getGlobalPropagator(){return(0,d.getGlobal)(j)||k}}b.PropagationAPI=l},997:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceAPI=void 0;let d=c(172),e=c(846),f=c(139),g=c(607),h=c(930),i="trace";class j{constructor(){this._proxyTracerProvider=new e.ProxyTracerProvider,this.wrapSpanContext=f.wrapSpanContext,this.isSpanContextValid=f.isSpanContextValid,this.deleteSpan=g.deleteSpan,this.getSpan=g.getSpan,this.getActiveSpan=g.getActiveSpan,this.getSpanContext=g.getSpanContext,this.setSpan=g.setSpan,this.setSpanContext=g.setSpanContext}static getInstance(){return this._instance||(this._instance=new j),this._instance}setGlobalTracerProvider(a){let b=(0,d.registerGlobal)(i,this._proxyTracerProvider,h.DiagAPI.instance());return b&&this._proxyTracerProvider.setDelegate(a),b}getTracerProvider(){return(0,d.getGlobal)(i)||this._proxyTracerProvider}getTracer(a,b){return this.getTracerProvider().getTracer(a,b)}disable(){(0,d.unregisterGlobal)(i,h.DiagAPI.instance()),this._proxyTracerProvider=new e.ProxyTracerProvider}}b.TraceAPI=j},277:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.deleteBaggage=b.setBaggage=b.getActiveBaggage=b.getBaggage=void 0;let d=c(491),e=(0,c(780).createContextKey)("OpenTelemetry Baggage Key");function f(a){return a.getValue(e)||void 0}b.getBaggage=f,b.getActiveBaggage=function(){return f(d.ContextAPI.getInstance().active())},b.setBaggage=function(a,b){return a.setValue(e,b)},b.deleteBaggage=function(a){return a.deleteValue(e)}},993:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.BaggageImpl=void 0;class c{constructor(a){this._entries=a?new Map(a):new Map}getEntry(a){let b=this._entries.get(a);if(b)return Object.assign({},b)}getAllEntries(){return Array.from(this._entries.entries()).map(([a,b])=>[a,b])}setEntry(a,b){let d=new c(this._entries);return d._entries.set(a,b),d}removeEntry(a){let b=new c(this._entries);return b._entries.delete(a),b}removeEntries(...a){let b=new c(this._entries);for(let c of a)b._entries.delete(c);return b}clear(){return new c}}b.BaggageImpl=c},830:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataSymbol=void 0,b.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataFromString=b.createBaggage=void 0;let d=c(930),e=c(993),f=c(830),g=d.DiagAPI.instance();b.createBaggage=function(a={}){return new e.BaggageImpl(new Map(Object.entries(a)))},b.baggageEntryMetadataFromString=function(a){return"string"!=typeof a&&(g.error(`Cannot create baggage metadata from unknown type: ${typeof a}`),a=""),{__TYPE__:f.baggageEntryMetadataSymbol,toString:()=>a}}},67:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.context=void 0,b.context=c(491).ContextAPI.getInstance()},223:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopContextManager=void 0;let d=c(780);class e{active(){return d.ROOT_CONTEXT}with(a,b,c,...d){return b.call(c,...d)}bind(a,b){return b}enable(){return this}disable(){return this}}b.NoopContextManager=e},780:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ROOT_CONTEXT=b.createContextKey=void 0,b.createContextKey=function(a){return Symbol.for(a)};class c{constructor(a){let b=this;b._currentContext=a?new Map(a):new Map,b.getValue=a=>b._currentContext.get(a),b.setValue=(a,d)=>{let e=new c(b._currentContext);return e._currentContext.set(a,d),e},b.deleteValue=a=>{let d=new c(b._currentContext);return d._currentContext.delete(a),d}}}b.ROOT_CONTEXT=new c},506:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.diag=void 0,b.diag=c(930).DiagAPI.instance()},56:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagComponentLogger=void 0;let d=c(172);class e{constructor(a){this._namespace=a.namespace||"DiagComponentLogger"}debug(...a){return f("debug",this._namespace,a)}error(...a){return f("error",this._namespace,a)}info(...a){return f("info",this._namespace,a)}warn(...a){return f("warn",this._namespace,a)}verbose(...a){return f("verbose",this._namespace,a)}}function f(a,b,c){let e=(0,d.getGlobal)("diag");if(e)return c.unshift(b),e[a](...c)}b.DiagComponentLogger=e},972:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagConsoleLogger=void 0;let c=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class d{constructor(){for(let a=0;a<c.length;a++)this[c[a].n]=function(a){return function(...b){if(console){let c=console[a];if("function"!=typeof c&&(c=console.log),"function"==typeof c)return c.apply(console,b)}}}(c[a].c)}}b.DiagConsoleLogger=d},912:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createLogLevelDiagLogger=void 0;let d=c(957);b.createLogLevelDiagLogger=function(a,b){function c(c,d){let e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<d.DiagLogLevel.NONE?a=d.DiagLogLevel.NONE:a>d.DiagLogLevel.ALL&&(a=d.DiagLogLevel.ALL),b=b||{},{error:c("error",d.DiagLogLevel.ERROR),warn:c("warn",d.DiagLogLevel.WARN),info:c("info",d.DiagLogLevel.INFO),debug:c("debug",d.DiagLogLevel.DEBUG),verbose:c("verbose",d.DiagLogLevel.VERBOSE)}}},957:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagLogLevel=void 0,function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(b.DiagLogLevel||(b.DiagLogLevel={}))},172:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.unregisterGlobal=b.getGlobal=b.registerGlobal=void 0;let d=c(200),e=c(521),f=c(130),g=e.VERSION.split(".")[0],h=Symbol.for(`opentelemetry.js.api.${g}`),i=d._globalThis;b.registerGlobal=function(a,b,c,d=!1){var f;let g=i[h]=null!=(f=i[h])?f:{version:e.VERSION};if(!d&&g[a]){let b=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${a}`);return c.error(b.stack||b.message),!1}if(g.version!==e.VERSION){let b=Error(`@opentelemetry/api: Registration of version v${g.version} for ${a} does not match previously registered API v${e.VERSION}`);return c.error(b.stack||b.message),!1}return g[a]=b,c.debug(`@opentelemetry/api: Registered a global for ${a} v${e.VERSION}.`),!0},b.getGlobal=function(a){var b,c;let d=null==(b=i[h])?void 0:b.version;if(d&&(0,f.isCompatible)(d))return null==(c=i[h])?void 0:c[a]},b.unregisterGlobal=function(a,b){b.debug(`@opentelemetry/api: Unregistering a global for ${a} v${e.VERSION}.`);let c=i[h];c&&delete c[a]}},130:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.isCompatible=b._makeCompatibilityCheck=void 0;let d=c(521),e=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f(a){let b=new Set([a]),c=new Set,d=a.match(e);if(!d)return()=>!1;let f={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=f.prerelease)return function(b){return b===a};function g(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;let d=a.match(e);if(!d)return g(a);let h={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=h.prerelease||f.major!==h.major)return g(a);if(0===f.major)return f.minor===h.minor&&f.patch<=h.patch?(b.add(a),!0):g(a);return f.minor<=h.minor?(b.add(a),!0):g(a)}}b._makeCompatibilityCheck=f,b.isCompatible=f(d.VERSION)},886:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.metrics=void 0,b.metrics=c(653).MetricsAPI.getInstance()},901:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ValueType=void 0,function(a){a[a.INT=0]="INT",a[a.DOUBLE=1]="DOUBLE"}(b.ValueType||(b.ValueType={}))},102:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createNoopMeter=b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=b.NOOP_OBSERVABLE_GAUGE_METRIC=b.NOOP_OBSERVABLE_COUNTER_METRIC=b.NOOP_UP_DOWN_COUNTER_METRIC=b.NOOP_HISTOGRAM_METRIC=b.NOOP_COUNTER_METRIC=b.NOOP_METER=b.NoopObservableUpDownCounterMetric=b.NoopObservableGaugeMetric=b.NoopObservableCounterMetric=b.NoopObservableMetric=b.NoopHistogramMetric=b.NoopUpDownCounterMetric=b.NoopCounterMetric=b.NoopMetric=b.NoopMeter=void 0;class c{constructor(){}createHistogram(a,c){return b.NOOP_HISTOGRAM_METRIC}createCounter(a,c){return b.NOOP_COUNTER_METRIC}createUpDownCounter(a,c){return b.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(a,c){return b.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(a,c){return b.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(a,c){return b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(a,b){}removeBatchObservableCallback(a){}}b.NoopMeter=c;class d{}b.NoopMetric=d;class e extends d{add(a,b){}}b.NoopCounterMetric=e;class f extends d{add(a,b){}}b.NoopUpDownCounterMetric=f;class g extends d{record(a,b){}}b.NoopHistogramMetric=g;class h{addCallback(a){}removeCallback(a){}}b.NoopObservableMetric=h;class i extends h{}b.NoopObservableCounterMetric=i;class j extends h{}b.NoopObservableGaugeMetric=j;class k extends h{}b.NoopObservableUpDownCounterMetric=k,b.NOOP_METER=new c,b.NOOP_COUNTER_METRIC=new e,b.NOOP_HISTOGRAM_METRIC=new g,b.NOOP_UP_DOWN_COUNTER_METRIC=new f,b.NOOP_OBSERVABLE_COUNTER_METRIC=new i,b.NOOP_OBSERVABLE_GAUGE_METRIC=new j,b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new k,b.createNoopMeter=function(){return b.NOOP_METER}},660:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NOOP_METER_PROVIDER=b.NoopMeterProvider=void 0;let d=c(102);class e{getMeter(a,b,c){return d.NOOP_METER}}b.NoopMeterProvider=e,b.NOOP_METER_PROVIDER=new e},200:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(46),b)},651:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b._globalThis=void 0,b._globalThis="object"==typeof globalThis?globalThis:c.g},46:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(651),b)},939:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.propagation=void 0,b.propagation=c(181).PropagationAPI.getInstance()},874:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTextMapPropagator=void 0;class c{inject(a,b){}extract(a,b){return a}fields(){return[]}}b.NoopTextMapPropagator=c},194:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.defaultTextMapSetter=b.defaultTextMapGetter=void 0,b.defaultTextMapGetter={get(a,b){if(null!=a)return a[b]},keys:a=>null==a?[]:Object.keys(a)},b.defaultTextMapSetter={set(a,b,c){null!=a&&(a[b]=c)}}},845:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.trace=void 0,b.trace=c(997).TraceAPI.getInstance()},403:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NonRecordingSpan=void 0;let d=c(476);class e{constructor(a=d.INVALID_SPAN_CONTEXT){this._spanContext=a}spanContext(){return this._spanContext}setAttribute(a,b){return this}setAttributes(a){return this}addEvent(a,b){return this}setStatus(a){return this}updateName(a){return this}end(a){}isRecording(){return!1}recordException(a,b){}}b.NonRecordingSpan=e},614:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracer=void 0;let d=c(491),e=c(607),f=c(403),g=c(139),h=d.ContextAPI.getInstance();class i{startSpan(a,b,c=h.active()){var d;if(null==b?void 0:b.root)return new f.NonRecordingSpan;let i=c&&(0,e.getSpanContext)(c);return"object"==typeof(d=i)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&(0,g.isSpanContextValid)(i)?new f.NonRecordingSpan(i):new f.NonRecordingSpan}startActiveSpan(a,b,c,d){let f,g,i;if(arguments.length<2)return;2==arguments.length?i=b:3==arguments.length?(f=b,i=c):(f=b,g=c,i=d);let j=null!=g?g:h.active(),k=this.startSpan(a,f,j),l=(0,e.setSpan)(j,k);return h.with(l,i,void 0,k)}}b.NoopTracer=i},124:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracerProvider=void 0;let d=c(614);class e{getTracer(a,b,c){return new d.NoopTracer}}b.NoopTracerProvider=e},125:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracer=void 0;let d=new(c(614)).NoopTracer;class e{constructor(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}startSpan(a,b,c){return this._getTracer().startSpan(a,b,c)}startActiveSpan(a,b,c,d){let e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)}_getTracer(){if(this._delegate)return this._delegate;let a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):d}}b.ProxyTracer=e},846:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracerProvider=void 0;let d=c(125),e=new(c(124)).NoopTracerProvider;class f{getTracer(a,b,c){var e;return null!=(e=this.getDelegateTracer(a,b,c))?e:new d.ProxyTracer(this,a,b,c)}getDelegate(){var a;return null!=(a=this._delegate)?a:e}setDelegate(a){this._delegate=a}getDelegateTracer(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)}}b.ProxyTracerProvider=f},996:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SamplingDecision=void 0,function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(b.SamplingDecision||(b.SamplingDecision={}))},607:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getSpanContext=b.setSpanContext=b.deleteSpan=b.setSpan=b.getActiveSpan=b.getSpan=void 0;let d=c(780),e=c(403),f=c(491),g=(0,d.createContextKey)("OpenTelemetry Context Key SPAN");function h(a){return a.getValue(g)||void 0}function i(a,b){return a.setValue(g,b)}b.getSpan=h,b.getActiveSpan=function(){return h(f.ContextAPI.getInstance().active())},b.setSpan=i,b.deleteSpan=function(a){return a.deleteValue(g)},b.setSpanContext=function(a,b){return i(a,new e.NonRecordingSpan(b))},b.getSpanContext=function(a){var b;return null==(b=h(a))?void 0:b.spanContext()}},325:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceStateImpl=void 0;let d=c(564);class e{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),e=c.indexOf("=");if(-1!==e){let f=c.slice(0,e),g=c.slice(e+1,b.length);(0,d.validateKey)(f)&&(0,d.validateValue)(g)&&a.set(f,g)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new e;return a._internalState=new Map(this._internalState),a}}b.TraceStateImpl=e},564:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.validateValue=b.validateKey=void 0;let c="[_0-9a-z-*/]",d=`[a-z]${c}{0,255}`,e=`[a-z0-9]${c}{0,240}@[a-z]${c}{0,13}`,f=RegExp(`^(?:${d}|${e})$`),g=/^[ -~]{0,255}[!-~]$/,h=/,|=/;b.validateKey=function(a){return f.test(a)},b.validateValue=function(a){return g.test(a)&&!h.test(a)}},98:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createTraceState=void 0;let d=c(325);b.createTraceState=function(a){return new d.TraceStateImpl(a)}},476:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.INVALID_SPAN_CONTEXT=b.INVALID_TRACEID=b.INVALID_SPANID=void 0;let d=c(475);b.INVALID_SPANID="0000000000000000",b.INVALID_TRACEID="00000000000000000000000000000000",b.INVALID_SPAN_CONTEXT={traceId:b.INVALID_TRACEID,spanId:b.INVALID_SPANID,traceFlags:d.TraceFlags.NONE}},357:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanKind=void 0,function(a){a[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER"}(b.SpanKind||(b.SpanKind={}))},139:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.wrapSpanContext=b.isSpanContextValid=b.isValidSpanId=b.isValidTraceId=void 0;let d=c(476),e=c(403),f=/^([0-9a-f]{32})$/i,g=/^[0-9a-f]{16}$/i;function h(a){return f.test(a)&&a!==d.INVALID_TRACEID}function i(a){return g.test(a)&&a!==d.INVALID_SPANID}b.isValidTraceId=h,b.isValidSpanId=i,b.isSpanContextValid=function(a){return h(a.traceId)&&i(a.spanId)},b.wrapSpanContext=function(a){return new e.NonRecordingSpan(a)}},847:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanStatusCode=void 0,function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(b.SpanStatusCode||(b.SpanStatusCode={}))},475:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceFlags=void 0,function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(b.TraceFlags||(b.TraceFlags={}))},521:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VERSION=void 0,b.VERSION="1.6.0"}},d={};function e(a){var c=d[a];if(void 0!==c)return c.exports;var f=d[a]={exports:{}},g=!0;try{b[a].call(f.exports,f,f.exports,e),g=!1}finally{g&&delete d[a]}return f.exports}e.ab="//";var f={};(()=>{Object.defineProperty(f,"__esModule",{value:!0}),f.trace=f.propagation=f.metrics=f.diag=f.context=f.INVALID_SPAN_CONTEXT=f.INVALID_TRACEID=f.INVALID_SPANID=f.isValidSpanId=f.isValidTraceId=f.isSpanContextValid=f.createTraceState=f.TraceFlags=f.SpanStatusCode=f.SpanKind=f.SamplingDecision=f.ProxyTracerProvider=f.ProxyTracer=f.defaultTextMapSetter=f.defaultTextMapGetter=f.ValueType=f.createNoopMeter=f.DiagLogLevel=f.DiagConsoleLogger=f.ROOT_CONTEXT=f.createContextKey=f.baggageEntryMetadataFromString=void 0;var a=e(369);Object.defineProperty(f,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var b=e(780);Object.defineProperty(f,"createContextKey",{enumerable:!0,get:function(){return b.createContextKey}}),Object.defineProperty(f,"ROOT_CONTEXT",{enumerable:!0,get:function(){return b.ROOT_CONTEXT}});var c=e(972);Object.defineProperty(f,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}});var d=e(957);Object.defineProperty(f,"DiagLogLevel",{enumerable:!0,get:function(){return d.DiagLogLevel}});var g=e(102);Object.defineProperty(f,"createNoopMeter",{enumerable:!0,get:function(){return g.createNoopMeter}});var h=e(901);Object.defineProperty(f,"ValueType",{enumerable:!0,get:function(){return h.ValueType}});var i=e(194);Object.defineProperty(f,"defaultTextMapGetter",{enumerable:!0,get:function(){return i.defaultTextMapGetter}}),Object.defineProperty(f,"defaultTextMapSetter",{enumerable:!0,get:function(){return i.defaultTextMapSetter}});var j=e(125);Object.defineProperty(f,"ProxyTracer",{enumerable:!0,get:function(){return j.ProxyTracer}});var k=e(846);Object.defineProperty(f,"ProxyTracerProvider",{enumerable:!0,get:function(){return k.ProxyTracerProvider}});var l=e(996);Object.defineProperty(f,"SamplingDecision",{enumerable:!0,get:function(){return l.SamplingDecision}});var m=e(357);Object.defineProperty(f,"SpanKind",{enumerable:!0,get:function(){return m.SpanKind}});var n=e(847);Object.defineProperty(f,"SpanStatusCode",{enumerable:!0,get:function(){return n.SpanStatusCode}});var o=e(475);Object.defineProperty(f,"TraceFlags",{enumerable:!0,get:function(){return o.TraceFlags}});var p=e(98);Object.defineProperty(f,"createTraceState",{enumerable:!0,get:function(){return p.createTraceState}});var q=e(139);Object.defineProperty(f,"isSpanContextValid",{enumerable:!0,get:function(){return q.isSpanContextValid}}),Object.defineProperty(f,"isValidTraceId",{enumerable:!0,get:function(){return q.isValidTraceId}}),Object.defineProperty(f,"isValidSpanId",{enumerable:!0,get:function(){return q.isValidSpanId}});var r=e(476);Object.defineProperty(f,"INVALID_SPANID",{enumerable:!0,get:function(){return r.INVALID_SPANID}}),Object.defineProperty(f,"INVALID_TRACEID",{enumerable:!0,get:function(){return r.INVALID_TRACEID}}),Object.defineProperty(f,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return r.INVALID_SPAN_CONTEXT}});let s=e(67);Object.defineProperty(f,"context",{enumerable:!0,get:function(){return s.context}});let t=e(506);Object.defineProperty(f,"diag",{enumerable:!0,get:function(){return t.diag}});let u=e(886);Object.defineProperty(f,"metrics",{enumerable:!0,get:function(){return u.metrics}});let v=e(939);Object.defineProperty(f,"propagation",{enumerable:!0,get:function(){return v.propagation}});let w=e(845);Object.defineProperty(f,"trace",{enumerable:!0,get:function(){return w.trace}}),f.default={context:s.context,diag:t.diag,metrics:u.metrics,propagation:v.propagation,trace:w.trace}})(),a.exports=f})()},3868:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Session=b.SessionCache=b.ApplicationError=b.IdentityProviderError=b.MissingStateParamError=b.MalformedStateCookieError=b.MissingStateCookieError=b.ProfileHandlerError=b.LogoutHandlerError=b.LoginHandlerError=b.CallbackHandlerError=b.HandlerError=b.AccessTokenError=b.AccessTokenErrorCode=b.AuthError=b.telemetry=void 0;let d=c(7613),e=c(1302);Object.defineProperty(b,"SessionCache",{enumerable:!0,get:function(){return e.SessionCache}}),Object.defineProperty(b,"Session",{enumerable:!0,get:function(){return e.Session}}),b.telemetry={name:"nextjs-auth0",version:d.__importDefault(c(6195)).default};var f=c(1252);Object.defineProperty(b,"AuthError",{enumerable:!0,get:function(){return f.AuthError}}),Object.defineProperty(b,"AccessTokenErrorCode",{enumerable:!0,get:function(){return f.AccessTokenErrorCode}}),Object.defineProperty(b,"AccessTokenError",{enumerable:!0,get:function(){return f.AccessTokenError}}),Object.defineProperty(b,"HandlerError",{enumerable:!0,get:function(){return f.HandlerError}}),Object.defineProperty(b,"CallbackHandlerError",{enumerable:!0,get:function(){return f.CallbackHandlerError}}),Object.defineProperty(b,"LoginHandlerError",{enumerable:!0,get:function(){return f.LoginHandlerError}}),Object.defineProperty(b,"LogoutHandlerError",{enumerable:!0,get:function(){return f.LogoutHandlerError}}),Object.defineProperty(b,"ProfileHandlerError",{enumerable:!0,get:function(){return f.ProfileHandlerError}});var g=c(667);Object.defineProperty(b,"MissingStateCookieError",{enumerable:!0,get:function(){return g.MissingStateCookieError}}),Object.defineProperty(b,"MalformedStateCookieError",{enumerable:!0,get:function(){return g.MalformedStateCookieError}}),Object.defineProperty(b,"MissingStateParamError",{enumerable:!0,get:function(){return g.MissingStateParamError}}),Object.defineProperty(b,"IdentityProviderError",{enumerable:!0,get:function(){return g.IdentityProviderError}}),Object.defineProperty(b,"ApplicationError",{enumerable:!0,get:function(){return g.ApplicationError}})},4046:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getLoginState=void 0;let d=(0,c(7613).__importDefault(c(2252)).default)("get-login-state");b.getLoginState=a=>{let b={returnTo:a.returnTo};return d("adding default state %O",b),b}},4115:(a,b,c)=>{"use strict";c.d(b,{l:()=>d});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},4208:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.get=void 0;let d=c(7613).__importDefault(c(8496)),e=c(4046),f=/^https:/i,g=d.default.object({secret:d.default.alternatives([d.default.string().min(8),d.default.array().items(d.default.string().min(8))]).required(),session:d.default.object({rolling:d.default.boolean().optional().default(!0),rollingDuration:d.default.when(d.default.ref("rolling"),{is:!0,then:d.default.number().integer().messages({"number.base":'"session.rollingDuration" must be provided an integer value when "session.rolling" is true'}),otherwise:d.default.boolean().valid(!1).messages({"any.only":'"session.rollingDuration" must be false when "session.rolling" is disabled'})}).optional().default(a=>!!a.rolling&&86400),absoluteDuration:d.default.when(d.default.ref("rolling"),{is:!1,then:d.default.number().integer().messages({"number.base":'"session.absoluteDuration" must be provided an integer value when "session.rolling" is false'}),otherwise:d.default.alternatives([d.default.number().integer(),d.default.boolean().valid(!1)])}).optional().default(604800),autoSave:d.default.boolean().optional().default(!0),name:d.default.string().token().optional().default("appSession"),store:d.default.object().optional().when(d.default.ref("/backchannelLogout"),{not:!1,then:d.default.when("/backchannelLogout.store",{not:d.default.exist(),then:d.default.object().required().messages({"any.required":'Back-Channel Logout requires a "backchannelLogout.store" (you can also reuse "session.store" if you have stateful sessions).'})})}),genId:d.default.function().maxArity(2).when(d.default.ref("store"),{then:d.default.required()}),storeIDToken:d.default.boolean().optional().default(!0),cookie:d.default.object({domain:d.default.string().optional(),transient:d.default.boolean().optional().default(!1),httpOnly:d.default.boolean().optional().default(!0),sameSite:d.default.string().valid("lax","strict","none").optional().default("lax"),secure:d.default.when(d.default.ref("/baseURL"),{is:d.default.string().pattern(f),then:d.default.boolean().valid(!0).default(!0).messages({"any.only":"Cookies must be secure when base url is https."}),otherwise:d.default.boolean().valid(!1).default(!1).messages({"any.only":"Cookies set with the `Secure` property wont be attached to http requests"})}),path:d.default.string().uri({relativeOnly:!0}).optional()}).default().unknown(!1)}).default().unknown(!1),auth0Logout:d.default.boolean().optional(),authorizationParams:d.default.object({response_type:d.default.string().optional().valid("id_token","code id_token","code").default("id_token"),scope:d.default.string().optional().pattern(/\bopenid\b/,"contains openid").default("openid profile email"),response_mode:d.default.string().optional().when("response_type",{is:"code",then:d.default.valid("query","form_post"),otherwise:d.default.valid("form_post").default("form_post")})}).optional().unknown(!0).default(),baseURL:d.default.string().uri().required().when(d.default.ref("authorizationParams.response_mode"),{is:"form_post",then:d.default.string().pattern(f).rule({warn:!0,message:"Using 'form_post' for response_mode may cause issues for you logging in over http, see https://github.com/auth0/express-openid-connect/blob/master/FAQ.md"})}),clientID:d.default.string().required(),clientSecret:d.default.string().when(d.default.ref("clientAuthMethod",{adjust:a=>a&&a.includes("client_secret")}),{is:!0,then:d.default.string().required().messages({"any.required":'"clientSecret" is required for the clientAuthMethod {{clientAuthMethod}}'})}).when(d.default.ref("idTokenSigningAlg",{adjust:a=>a&&a.startsWith("HS")}),{is:!0,then:d.default.string().required().messages({"any.required":'"clientSecret" is required for ID tokens with HMAC based algorithms'})}),clockTolerance:d.default.number().optional().default(60),httpTimeout:d.default.number().optional().default(5e3),httpAgent:d.default.object().optional(),enableTelemetry:d.default.boolean().optional().default(!0),getLoginState:d.default.function().optional().default(()=>e.getLoginState),identityClaimFilter:d.default.array().optional().default(["aud","iss","iat","exp","nbf","nonce","azp","auth_time","s_hash","at_hash","c_hash"]),idpLogout:d.default.boolean().optional().default(a=>a.auth0Logout||!1),idTokenSigningAlg:d.default.string().insensitive().not("none").optional().default("RS256"),issuerBaseURL:d.default.string().uri().required(),legacySameSiteCookie:d.default.boolean().optional().default(!0),routes:d.default.object({callback:d.default.string().uri({relativeOnly:!0}).required(),postLogoutRedirect:d.default.string().uri({allowRelative:!0}).default("")}).default().unknown(!1),clientAuthMethod:d.default.string().valid("client_secret_basic","client_secret_post","client_secret_jwt","private_key_jwt","none").optional().default(a=>"id_token"!==a.authorizationParams.response_type||a.pushedAuthorizationRequests?a.clientAssertionSigningKey?"private_key_jwt":"client_secret_basic":"none").when(d.default.ref("authorizationParams.response_type",{adjust:a=>a&&a.includes("code")}),{is:!0,then:d.default.string().invalid("none").messages({"any.only":"Public code flow clients are not supported."})}).when(d.default.ref("pushedAuthorizationRequests"),{is:!0,then:d.default.string().invalid("none").messages({"any.only":"Public PAR clients are not supported"})}),clientAssertionSigningKey:d.default.any().optional().when(d.default.ref("clientAuthMethod"),{is:"private_key_jwt",then:d.default.any().required().messages({"any.required":'"clientAssertionSigningKey" is required for a "clientAuthMethod" of "private_key_jwt"'})}),clientAssertionSigningAlg:d.default.string().optional().valid("RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES256K","ES384","ES512","EdDSA"),transactionCookie:d.default.object({name:d.default.string().default("auth_verification"),domain:d.default.string().default(d.default.ref("/session.cookie.domain")),secure:d.default.boolean().default(d.default.ref("/session.cookie.secure")),sameSite:d.default.string().valid("lax","strict","none").default(d.default.ref("/session.cookie.sameSite")),path:d.default.string().uri({relativeOnly:!0}).default(d.default.ref("/session.cookie.transient"))}).default().unknown(!1),backchannelLogout:d.default.alternatives([d.default.object({store:d.default.object().optional()}),d.default.boolean()]).default(!1),pushedAuthorizationRequests:d.default.boolean().optional().default(!1)});b.get=(a={})=>{let{value:b,error:c,warning:d}=g.validate(a,{allowUnknown:!0});if(c)throw TypeError(c.details[0].message);return d&&console.warn(d.message),b}},4400:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),b.withMiddlewareAuthRequired=b.handleAuth=b.handleProfile=b.handleCallback=b.handleLogout=b.handleLogin=b.withPageAuthRequired=b.withApiAuthRequired=b.touchSession=b.getAccessToken=b.updateSession=b.getSession=b.initAuth0=void 0;let e=c(7613),f=c(2997),g=c(1239),h=c(3486),i=()=>{let a=new Uint8Array(16);return crypto.getRandomValues(a),Array.from(a).map(a=>a.toString(16).padStart(2,"0")).join("")};function j(){return((0,g.setIsUsingNamedExports)(),d)?d:d=(0,f._initAuth)({genId:i,clientGetter:h.clientGetter})}b.initAuth0=a=>((0,g.setIsUsingOwnInstance)(),(0,f._initAuth)({genId:i,clientGetter:h.clientGetter,params:a})),b.getSession=(...a)=>j().getSession(...a),b.updateSession=(...a)=>j().updateSession(...a),b.getAccessToken=(...a)=>j().getAccessToken(...a),b.touchSession=(...a)=>j().touchSession(...a),b.withApiAuthRequired=(...a)=>j().withApiAuthRequired(...a),b.withPageAuthRequired=(...a)=>j().withPageAuthRequired(...a),b.handleLogin=(...a)=>j().handleLogin(...a),b.handleLogout=(...a)=>j().handleLogout(...a),b.handleCallback=(...a)=>j().handleCallback(...a),b.handleProfile=(...a)=>j().handleProfile(...a),b.handleAuth=(...a)=>j().handleAuth(...a),b.withMiddlewareAuthRequired=(...a)=>j().withMiddlewareAuthRequired(...a),e.__exportStar(c(3868),b)},4449:(a,b,c)=>{var d;(()=>{var e={226:function(e,f){!function(g,h){"use strict";var i="function",j="undefined",k="object",l="string",m="major",n="model",o="name",p="type",q="vendor",r="version",s="architecture",t="console",u="mobile",v="tablet",w="smarttv",x="wearable",y="embedded",z="Amazon",A="Apple",B="ASUS",C="BlackBerry",D="Browser",E="Chrome",F="Firefox",G="Google",H="Huawei",I="Microsoft",J="Motorola",K="Opera",L="Samsung",M="Sharp",N="Sony",O="Xiaomi",P="Zebra",Q="Facebook",R="Chromium OS",S="Mac OS",T=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},U=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},V=function(a,b){return typeof a===l&&-1!==W(b).indexOf(W(a))},W=function(a){return a.toLowerCase()},X=function(a,b){if(typeof a===l)return a=a.replace(/^\s\s*/,""),typeof b===j?a:a.substring(0,350)},Y=function(a,b){for(var c,d,e,f,g,j,l=0;l<b.length&&!g;){var m=b[l],n=b[l+1];for(c=d=0;c<m.length&&!g&&m[c];)if(g=m[c++].exec(a))for(e=0;e<n.length;e++)j=g[++d],typeof(f=n[e])===k&&f.length>0?2===f.length?typeof f[1]==i?this[f[0]]=f[1].call(this,j):this[f[0]]=f[1]:3===f.length?typeof f[1]!==i||f[1].exec&&f[1].test?this[f[0]]=j?j.replace(f[1],f[2]):void 0:this[f[0]]=j?f[1].call(this,j,f[2]):void 0:4===f.length&&(this[f[0]]=j?f[3].call(this,j.replace(f[1],f[2])):h):this[f]=j||h;l+=2}},Z=function(a,b){for(var c in b)if(typeof b[c]===k&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(V(b[c][d],a))return"?"===c?h:c}else if(V(b[c],a))return"?"===c?h:c;return a},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[r,[o,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[r,[o,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[o,r],[/opios[\/ ]+([\w\.]+)/i],[r,[o,K+" Mini"]],[/\bopr\/([\w\.]+)/i],[r,[o,K]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[o,r],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[r,[o,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[r,[o,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[r,[o,"WeChat"]],[/konqueror\/([\w\.]+)/i],[r,[o,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[r,[o,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[r,[o,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[o,/(.+)/,"$1 Secure "+D],r],[/\bfocus\/([\w\.]+)/i],[r,[o,F+" Focus"]],[/\bopt\/([\w\.]+)/i],[r,[o,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[r,[o,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[r,[o,"Dolphin"]],[/coast\/([\w\.]+)/i],[r,[o,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[r,[o,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[r,[o,F]],[/\bqihu|(qi?ho?o?|360)browser/i],[[o,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[o,/(.+)/,"$1 "+D],r],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],r],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[o,r],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[o],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[o,Q],r],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[o,r],[/\bgsa\/([\w\.]+) .*safari\//i],[r,[o,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[r,[o,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[r,[o,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[o,E+" WebView"],r],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[r,[o,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[o,r],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[r,[o,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[r,o],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[o,[r,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[o,r],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[o,"Netscape"],r],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[r,[o,F+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[o,r],[/(cobalt)\/([\w\.]+)/i],[o,[r,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,W]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[s,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[s,"armhf"]],[/windows (ce|mobile); ppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[s,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[s,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[n,[q,L],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[n,[q,L],[p,u]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[n,[q,A],[p,u]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[n,[q,A],[p,v]],[/(macintosh);/i],[n,[q,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[n,[q,M],[p,u]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[n,[q,H],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[n,[q,H],[p,u]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,u]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[n,[q,"OPPO"],[p,u]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[n,[q,"Vivo"],[p,u]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[n,[q,"Realme"],[p,u]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[n,[q,J],[p,u]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[n,[q,J],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[n,[q,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[n,[q,"LG"],[p,u]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[n,[q,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[n,/_/g," "],[q,"Nokia"],[p,u]],[/(pixel c)\b/i],[n,[q,G],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[n,[q,G],[p,u]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[n,[q,N],[p,u]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[n,"Xperia Tablet"],[q,N],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[n,[q,"OnePlus"],[p,u]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[n,[q,z],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[n,/(.+)/g,"Fire Phone $1"],[q,z],[p,u]],[/(playbook);[-\w\),; ]+(rim)/i],[n,q,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[n,[q,C],[p,u]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[n,[q,B],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[n,[q,B],[p,u]],[/(nexus 9)/i],[n,[q,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[q,[n,/_/g," "],[p,u]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[n,[q,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[n,[q,"Meizu"],[p,u]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[q,n,[p,u]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[q,n,[p,v]],[/(surface duo)/i],[n,[q,I],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[n,[q,"Fairphone"],[p,u]],[/(u304aa)/i],[n,[q,"AT&T"],[p,u]],[/\bsie-(\w*)/i],[n,[q,"Siemens"],[p,u]],[/\b(rct\w+) b/i],[n,[q,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[n,[q,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[n,[q,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[n,[q,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[n,[q,"NuVision"],[p,v]],[/\b(k88) b/i],[n,[q,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[n,[q,"ZTE"],[p,u]],[/\b(gen\d{3}) b.+49h/i],[n,[q,"Swiss"],[p,u]],[/\b(zur\d{3}) b/i],[n,[q,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[n,[q,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[q,"Dragon Touch"],n,[p,v]],[/\b(ns-?\w{0,9}) b/i],[n,[q,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[n,[q,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[q,"Voice"],n,[p,u]],[/\b(lvtel\-)?(v1[12]) b/i],[[q,"LvTel"],n,[p,u]],[/\b(ph-1) /i],[n,[q,"Essential"],[p,u]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[n,[q,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[n,[q,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[n,[q,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[n,[q,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[q,n,[p,u]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[q,I],[p,u]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[n,[q,P],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[n,[q,P],[p,u]],[/smart-tv.+(samsung)/i],[q,[p,w]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[q,L],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[q,"LG"],[p,w]],[/(apple) ?tv/i],[q,[n,A+" TV"],[p,w]],[/crkey/i],[[n,E+"cast"],[q,G],[p,w]],[/droid.+aft(\w)( bui|\))/i],[n,[q,z],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[n,[q,M],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[n,[q,N],[p,w]],[/(mitv-\w{5}) bui/i],[n,[q,O],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[q,n,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[q,X],[n,X],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[q,n,[p,t]],[/droid.+; (shield) bui/i],[n,[q,"Nvidia"],[p,t]],[/(playstation [345portablevi]+)/i],[n,[q,N],[p,t]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[n,[q,I],[p,t]],[/((pebble))app/i],[q,n,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[n,[q,A],[p,x]],[/droid.+; (glass) \d/i],[n,[q,G],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[n,[q,P],[p,x]],[/(quest( 2| pro)?)/i],[n,[q,Q],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[q,[p,y]],[/(aeobc)\b/i],[n,[q,z],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[n,[p,u]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[n,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,u]],[/(android[-\w\. ]{0,9});.+buil/i],[n,[q,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[r,[o,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[r,[o,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[o,r],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[r,o]],os:[[/microsoft (windows) (vista|xp)/i],[o,r],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[o,[r,Z,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[o,"Windows"],[r,Z,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[r,/_/g,"."],[o,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[o,S],[r,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[r,o],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[o,r],[/\(bb(10);/i],[r,[o,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[r,[o,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[r,[o,F+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[r,[o,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[r,[o,"watchOS"]],[/crkey\/([\d\.]+)/i],[r,[o,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[o,R],r],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[o,r],[/(sunos) ?([\w\.\d]*)/i],[[o,"Solaris"],r],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[o,r]]},aa=function(a,b){if(typeof a===k&&(b=a,a=h),!(this instanceof aa))return new aa(a,b).getResult();var c=typeof g!==j&&g.navigator?g.navigator:h,d=a||(c&&c.userAgent?c.userAgent:""),e=c&&c.userAgentData?c.userAgentData:h,f=b?T(_,b):_,t=c&&c.userAgent==d;return this.getBrowser=function(){var a,b={};return b[o]=h,b[r]=h,Y.call(b,d,f.browser),b[m]=typeof(a=b[r])===l?a.replace(/[^\d\.]/g,"").split(".")[0]:h,t&&c&&c.brave&&typeof c.brave.isBrave==i&&(b[o]="Brave"),b},this.getCPU=function(){var a={};return a[s]=h,Y.call(a,d,f.cpu),a},this.getDevice=function(){var a={};return a[q]=h,a[n]=h,a[p]=h,Y.call(a,d,f.device),t&&!a[p]&&e&&e.mobile&&(a[p]=u),t&&"Macintosh"==a[n]&&c&&typeof c.standalone!==j&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[n]="iPad",a[p]=v),a},this.getEngine=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.engine),a},this.getOS=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.os),t&&!a[o]&&e&&"Unknown"!=e.platform&&(a[o]=e.platform.replace(/chrome os/i,R).replace(/macos/i,S)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=typeof a===l&&a.length>350?X(a,350):a,this},this.setUA(d),this};aa.VERSION="1.0.35",aa.BROWSER=U([o,r,m]),aa.CPU=U([s]),aa.DEVICE=U([n,q,p,t,u,w,v,x,y]),aa.ENGINE=aa.OS=U([o,r]),typeof f!==j?(e.exports&&(f=e.exports=aa),f.UAParser=aa):c.amdO?void 0===(d=(function(){return aa}).call(b,c,b,a))||(a.exports=d):typeof g!==j&&(g.UAParser=aa);var ab=typeof g!==j&&(g.jQuery||g.Zepto);if(ab&&!ab.ua){var ac=new aa;ab.ua=ac.getResult(),ab.ua.get=function(){return ac.getUA()},ab.ua.set=function(a){ac.setUA(a);var b=ac.getResult();for(var c in b)ab.ua[c]=b[c]}}}("object"==typeof window?window:this)}},f={};function g(a){var b=f[a];if(void 0!==b)return b.exports;var c=f[a]={exports:{}},d=!0;try{e[a].call(c.exports,c,c.exports,g),d=!1}finally{d&&delete f[a]}return c.exports}g.ab="//",a.exports=g(226)})()},4527:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(4970);class e extends d.Auth0Request{constructor(a){super(a)}getUrl(){return this.req.url}getMethod(){return this.req.method}getBody(){return this.req.body}getCookies(){return this.req.cookies}}b.default=e},4700:(a,b,c)=>{"use strict";function d(a){return a.replace(/\/$/,"")||"/"}function e(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}function f(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:d,hash:f}=e(a);return""+b+c+d+f}function g(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:d,hash:f}=e(a);return""+c+b+d+f}function h(a,b){if("string"!=typeof a)return!1;let{pathname:c}=e(a);return c===b||c.startsWith(b+"/")}c.d(b,{X:()=>n});let i=new WeakMap;function j(a,b){let c;if(!b)return{pathname:a};let d=i.get(b);d||(d=b.map(a=>a.toLowerCase()),i.set(b,d));let e=a.split("/",2);if(!e[1])return{pathname:a};let f=e[1].toLowerCase(),g=d.indexOf(f);return g<0?{pathname:a}:(c=b[g],{pathname:a=a.slice(c.length+1)||"/",detectedLocale:c})}let k=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function l(a,b){return new URL(String(a).replace(k,"localhost"),b&&String(b).replace(k,"localhost"))}let m=Symbol("NextURLInternal");class n{constructor(a,b,c){let d,e;"object"==typeof b&&"pathname"in b||"string"==typeof b?(d=b,e=c||{}):e=c||b||{},this[m]={url:l(a,d??e.base),options:e,basePath:""},this.analyze()}analyze(){var a,b,c,d,e;let f=function(a,b){var c,d;let{basePath:e,i18n:f,trailingSlash:g}=null!=(c=b.nextConfig)?c:{},i={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):g};e&&h(i.pathname,e)&&(i.pathname=function(a,b){if(!h(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:"/"+c}(i.pathname,e),i.basePath=e);let k=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){let a=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");i.buildId=a[0],k="index"!==a[1]?"/"+a.slice(1).join("/"):"/",!0===b.parseData&&(i.pathname=k)}if(f){let a=b.i18nProvider?b.i18nProvider.analyze(i.pathname):j(i.pathname,f.locales);i.locale=a.detectedLocale,i.pathname=null!=(d=a.pathname)?d:i.pathname,!a.detectedLocale&&i.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(k):j(k,f.locales)).detectedLocale&&(i.locale=a.detectedLocale)}return i}(this[m].url.pathname,{nextConfig:this[m].options.nextConfig,parseData:!0,i18nProvider:this[m].options.i18nProvider}),g=function(a,b){let c;if((null==b?void 0:b.host)&&!Array.isArray(b.host))c=b.host.toString().split(":",1)[0];else{if(!a.hostname)return;c=a.hostname}return c.toLowerCase()}(this[m].url,this[m].options.headers);this[m].domainLocale=this[m].options.i18nProvider?this[m].options.i18nProvider.detectDomainLocale(g):function(a,b,c){if(a)for(let f of(c&&(c=c.toLowerCase()),a)){var d,e;if(b===(null==(d=f.domain)?void 0:d.split(":",1)[0].toLowerCase())||c===f.defaultLocale.toLowerCase()||(null==(e=f.locales)?void 0:e.some(a=>a.toLowerCase()===c)))return f}}(null==(b=this[m].options.nextConfig)||null==(a=b.i18n)?void 0:a.domains,g);let i=(null==(c=this[m].domainLocale)?void 0:c.defaultLocale)||(null==(e=this[m].options.nextConfig)||null==(d=e.i18n)?void 0:d.defaultLocale);this[m].url.pathname=f.pathname,this[m].defaultLocale=i,this[m].basePath=f.basePath??"",this[m].buildId=f.buildId,this[m].locale=f.locale??i,this[m].trailingSlash=f.trailingSlash}formatPathname(){var a;let b;return b=function(a,b,c,d){if(!b||b===c)return a;let e=a.toLowerCase();return!d&&(h(e,"/api")||h(e,"/"+b.toLowerCase()))?a:f(a,"/"+b)}((a={basePath:this[m].basePath,buildId:this[m].buildId,defaultLocale:this[m].options.forceLocale?void 0:this[m].defaultLocale,locale:this[m].locale,pathname:this[m].url.pathname,trailingSlash:this[m].trailingSlash}).pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix),(a.buildId||!a.trailingSlash)&&(b=d(b)),a.buildId&&(b=g(f(b,"/_next/data/"+a.buildId),"/"===a.pathname?"index.json":".json")),b=f(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:g(b,"/"):d(b)}formatSearch(){return this[m].url.search}get buildId(){return this[m].buildId}set buildId(a){this[m].buildId=a}get locale(){return this[m].locale??""}set locale(a){var b,c;if(!this[m].locale||!(null==(c=this[m].options.nextConfig)||null==(b=c.i18n)?void 0:b.locales.includes(a)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${a}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[m].locale=a}get defaultLocale(){return this[m].defaultLocale}get domainLocale(){return this[m].domainLocale}get searchParams(){return this[m].url.searchParams}get host(){return this[m].url.host}set host(a){this[m].url.host=a}get hostname(){return this[m].url.hostname}set hostname(a){this[m].url.hostname=a}get port(){return this[m].url.port}set port(a){this[m].url.port=a}get protocol(){return this[m].url.protocol}set protocol(a){this[m].url.protocol=a}get href(){let a=this.formatPathname(),b=this.formatSearch();return`${this.protocol}//${this.host}${a}${b}${this.hash}`}set href(a){this[m].url=l(a),this.analyze()}get origin(){return this[m].url.origin}get pathname(){return this[m].url.pathname}set pathname(a){this[m].url.pathname=a}get hash(){return this[m].url.hash}set hash(a){this[m].url.hash=a}get search(){return this[m].url.search}set search(a){this[m].url.search=a}get password(){return this[m].url.password}set password(a){this[m].url.password=a}get username(){return this[m].url.username}set username(a){this[m].url.username=a}get basePath(){return this[m].basePath}set basePath(a){this[m].basePath=a.startsWith("/")?a:`/${a}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new n(String(this),this[m].options)}}},4800:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(4970),e=()=>{};class f extends d.Auth0ResponseCookies{constructor(){super()}setCookie(a,b,d){let{cookies:f}=c(7924),g=f();try{g.set(Object.assign(Object.assign({},d),{name:a,value:b}))}catch(a){e()}}clearCookie(a,b){let{cookies:d}=c(7924),f=d();try{f.set(Object.assign(Object.assign({},b),{name:a,value:"",expires:new Date(0)}))}catch(a){e()}}}b.default=f},4944:(a,b,c)=>{"use strict";c.d(b,{nJ:()=>g,oJ:()=>e,zB:()=>f});var d=c(1378);let e="NEXT_REDIRECT";var f=function(a){return a.push="push",a.replace="replace",a}({});function g(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,f]=b,g=b.slice(2,-2).join(";"),h=Number(b.at(-2));return c===e&&("replace"===f||"push"===f)&&"string"==typeof g&&!isNaN(h)&&h in d.Q}},4970:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.NodeResponse=b.NodeRequest=b.Auth0ResponseCookies=b.Auth0RequestCookies=b.Auth0Response=b.Auth0Request=void 0;var e=c(5588);Object.defineProperty(b,"Auth0Request",{enumerable:!0,get:function(){return d(e).default}});var f=c(7994);Object.defineProperty(b,"Auth0Response",{enumerable:!0,get:function(){return d(f).default}});var g=c(2898);Object.defineProperty(b,"Auth0RequestCookies",{enumerable:!0,get:function(){return d(g).default}});var h=c(3180);Object.defineProperty(b,"Auth0ResponseCookies",{enumerable:!0,get:function(){return d(h).default}});var i=c(7456);Object.defineProperty(b,"NodeRequest",{enumerable:!0,get:function(){return d(i).default}});var j=c(3038);Object.defineProperty(b,"NodeResponse",{enumerable:!0,get:function(){return d(j).default}})},4979:(a,b,c)=>{"use strict";c.d(b,{f:()=>d});class d extends Error{constructor(...a){super(...a),this.code="NEXT_STATIC_GEN_BAILOUT"}}},5194:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromJson=b.fromTokenEndpointResponse=void 0;let d=c(7613),e=d.__importStar(c(2743));class f{constructor(a){this.user=a}}b.default=f,b.fromTokenEndpointResponse=function(a,b){let c=e.decodeJwt(a.id_token);b.identityClaimFilter.forEach(a=>{delete c[a]});let{id_token:g,access_token:h,scope:i,expires_in:j,expires_at:k,refresh_token:l}=a,m=d.__rest(a,["id_token","access_token","scope","expires_in","expires_at","refresh_token"]),n=b.session.storeIDToken;return Object.assign(new f(Object.assign({},c)),Object.assign({accessToken:h,accessTokenScope:i,accessTokenExpiresAt:Math.floor(Date.now()/1e3)+Number(j),refreshToken:l},n&&{idToken:g}),m)},b.fromJson=function(a){return a?Object.assign(new f(Object.assign({},a.user)),a):null}},5356:a=>{"use strict";a.exports=require("node:buffer")},5379:(a,b,c)=>{"use strict";c.d(b,{J:()=>d});let d=(0,c(2058).xl)()},5392:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getTestReqInfo:function(){return g},withRequest:function(){return f}});let d=new(c(5521)).AsyncLocalStorage;function e(a,b){let c=b.header(a,"next-test-proxy-port");if(!c)return;let d=b.url(a);return{url:d,proxyPort:Number(c),testData:b.header(a,"next-test-data")||""}}function f(a,b,c){let f=e(a,b);return f?d.run(f,c):c()}function g(a,b){let c=d.getStore();return c||(a&&b?e(a,b):void 0)}},5521:a=>{"use strict";a.exports=require("node:async_hooks")},5566:(a,b,c)=>{"use strict";c.d(b,{Z:()=>d});let d=(0,c(7669).xl)()},5588:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613).__importDefault(c(2898));class e extends d.default{constructor(a){super(),this.req=a}}b.default=e},5663:a=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var b={};(()=>{b.parse=function(b,c){if("string"!=typeof b)throw TypeError("argument str must be a string");for(var e={},f=b.split(d),g=(c||{}).decode||a,h=0;h<f.length;h++){var i=f[h],j=i.indexOf("=");if(!(j<0)){var k=i.substr(0,j).trim(),l=i.substr(++j,i.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),void 0==e[k]&&(e[k]=function(a,b){try{return b(a)}catch(b){return a}}(l,g))}}return e},b.serialize=function(a,b,d){var f=d||{},g=f.encode||c;if("function"!=typeof g)throw TypeError("option encode is invalid");if(!e.test(a))throw TypeError("argument name is invalid");var h=g(b);if(h&&!e.test(h))throw TypeError("argument val is invalid");var i=a+"="+h;if(null!=f.maxAge){var j=f.maxAge-0;if(isNaN(j)||!isFinite(j))throw TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(j)}if(f.domain){if(!e.test(f.domain))throw TypeError("option domain is invalid");i+="; Domain="+f.domain}if(f.path){if(!e.test(f.path))throw TypeError("option path is invalid");i+="; Path="+f.path}if(f.expires){if("function"!=typeof f.expires.toUTCString)throw TypeError("option expires is invalid");i+="; Expires="+f.expires.toUTCString()}if(f.httpOnly&&(i+="; HttpOnly"),f.secure&&(i+="; Secure"),f.sameSite)switch("string"==typeof f.sameSite?f.sameSite.toLowerCase():f.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return i};var a=decodeURIComponent,c=encodeURIComponent,d=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),a.exports=b})()},5770:(a,b,c)=>{"use strict";function d(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===e}c.d(b,{Ts:()=>d,W5:()=>h});let e="HANGING_PROMISE_REJECTION";class f extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=e}}let g=new WeakMap;function h(a,b,c){if(a.aborted)return Promise.reject(new f(b,c));{let d=new Promise((d,e)=>{let h=e.bind(null,new f(b,c)),i=g.get(a);if(i)i.push(h);else{let b=[h];g.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(i),d}}function i(){}},6153:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f,hkdf:()=>f});let d=async(a,b,c,d,e)=>{let{crypto:{subtle:f}}=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw Error("unable to locate global object")})();return new Uint8Array(await f.deriveBits({name:"HKDF",hash:`SHA-${a.substr(3)}`,salt:c,info:d},await f.importKey("raw",b,"HKDF",!1,["deriveBits"]),e<<3))};function e(a,b){if("string"==typeof a)return new TextEncoder().encode(a);if(!(a instanceof Uint8Array))throw TypeError(`"${b}"" must be an instance of Uint8Array or a string`);return a}async function f(a,b,c,f,g){return d(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(a),function(a){let b=e(a,"ikm");if(!b.byteLength)throw TypeError('"ikm" must be at least one byte in length');return b}(b),e(c,"salt"),function(a){let b=e(a,"info");if(b.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return b}(f),function(a,b){if("number"!=typeof a||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(b.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(g,a))}},6159:(a,b,c)=>{"use strict";c.d(b,{F:()=>e,h:()=>f});let d="DYNAMIC_SERVER_USAGE";class e extends Error{constructor(a){super("Dynamic server usage: "+a),this.description=a,this.digest=d}}function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===d}},6195:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default="3.8.0"},6206:(a,b,c)=>{"use strict";c.d(b,{Cu:()=>g,RD:()=>f,p$:()=>e,qU:()=>h,wN:()=>i});var d=c(9183);function e(a){let b=new Headers;for(let[c,d]of Object.entries(a))for(let a of Array.isArray(d)?d:[d])void 0!==a&&("number"==typeof a&&(a=a.toString()),b.append(c,a));return b}function f(a){var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}function g(a){let b={},c=[];if(a)for(let[d,e]of a.entries())"set-cookie"===d.toLowerCase()?(c.push(...f(e)),b[d]=1===c.length?c[0]:c):b[d]=e;return b}function h(a){try{return String(new URL(String(a)))}catch(b){throw Object.defineProperty(Error(`URL is malformed "${String(a)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:b}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function i(a){for(let b of[d.AA,d.h])if(a!==b&&a.startsWith(b))return a.substring(b.length);return null}},6218:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.Auth0NextResponseCookies=b.Auth0NextRequestCookies=b.Auth0NextResponse=b.Auth0NextRequest=b.Auth0NextApiResponse=b.Auth0NextApiRequest=void 0;var e=c(4527);Object.defineProperty(b,"Auth0NextApiRequest",{enumerable:!0,get:function(){return d(e).default}});var f=c(7019);Object.defineProperty(b,"Auth0NextApiResponse",{enumerable:!0,get:function(){return d(f).default}});var g=c(8672);Object.defineProperty(b,"Auth0NextRequest",{enumerable:!0,get:function(){return d(g).default}});var h=c(2782);Object.defineProperty(b,"Auth0NextResponse",{enumerable:!0,get:function(){return d(h).default}});var i=c(3198);Object.defineProperty(b,"Auth0NextRequestCookies",{enumerable:!0,get:function(){return d(i).default}});var j=c(4800);Object.defineProperty(b,"Auth0NextResponseCookies",{enumerable:!0,get:function(){return d(j).default}})},6440:(a,b)=>{"use strict";var c={H:null,A:null};function d(a){var b="https://react.dev/errors/"+a;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e=Array.isArray;function f(){}var g=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),n=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),p=Symbol.iterator,q=Object.prototype.hasOwnProperty,r=Object.assign;function s(a,b,c){var d=c.ref;return{$$typeof:g,type:a,key:b,ref:void 0!==d?d:null,props:c}}function t(a){return"object"==typeof a&&null!==a&&a.$$typeof===g}var u=/\/+/g;function v(a,b){var c,d;return"object"==typeof a&&null!==a&&null!=a.key?(c=""+a.key,d={"=":"=0",":":"=2"},"$"+c.replace(/[=:]/g,function(a){return d[a]})):b.toString(36)}function w(a,b,c){if(null==a)return a;var i=[],j=0;return!function a(b,c,i,j,k){var l,m,n,q=typeof b;("undefined"===q||"boolean"===q)&&(b=null);var r=!1;if(null===b)r=!0;else switch(q){case"bigint":case"string":case"number":r=!0;break;case"object":switch(b.$$typeof){case g:case h:r=!0;break;case o:return a((r=b._init)(b._payload),c,i,j,k)}}if(r)return k=k(b),r=""===j?"."+v(b,0):j,e(k)?(i="",null!=r&&(i=r.replace(u,"$&/")+"/"),a(k,c,i,"",function(a){return a})):null!=k&&(t(k)&&(l=k,m=i+(null==k.key||b&&b.key===k.key?"":(""+k.key).replace(u,"$&/")+"/")+r,k=s(l.type,m,l.props)),c.push(k)),1;r=0;var w=""===j?".":j+":";if(e(b))for(var x=0;x<b.length;x++)q=w+v(j=b[x],x),r+=a(j,c,i,q,k);else if("function"==typeof(x=null===(n=b)||"object"!=typeof n?null:"function"==typeof(n=p&&n[p]||n["@@iterator"])?n:null))for(b=x.call(b),x=0;!(j=b.next()).done;)q=w+v(j=j.value,x++),r+=a(j,c,i,q,k);else if("object"===q){if("function"==typeof b.then)return a(function(a){switch(a.status){case"fulfilled":return a.value;case"rejected":throw a.reason;default:switch("string"==typeof a.status?a.then(f,f):(a.status="pending",a.then(function(b){"pending"===a.status&&(a.status="fulfilled",a.value=b)},function(b){"pending"===a.status&&(a.status="rejected",a.reason=b)})),a.status){case"fulfilled":return a.value;case"rejected":throw a.reason}}throw a}(b),c,i,j,k);throw Error(d(31,"[object Object]"===(c=String(b))?"object with keys {"+Object.keys(b).join(", ")+"}":c))}return r}(a,i,"","",function(a){return b.call(c,a,j++)}),i}function x(a){if(-1===a._status){var b=a._result;(b=b()).then(function(b){(0===a._status||-1===a._status)&&(a._status=1,a._result=b)},function(b){(0===a._status||-1===a._status)&&(a._status=2,a._result=b)}),-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result}function y(){return new WeakMap}function z(){return{s:0,v:void 0,o:null,p:null}}b.Children={map:w,forEach:function(a,b,c){w(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;return w(a,function(){b++}),b},toArray:function(a){return w(a,function(a){return a})||[]},only:function(a){if(!t(a))throw Error(d(143));return a}},b.Fragment=i,b.Profiler=k,b.StrictMode=j,b.Suspense=m,b.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,b.cache=function(a){return function(){var b=c.A;if(!b)return a.apply(null,arguments);var d=b.getCacheForType(y);void 0===(b=d.get(a))&&(b=z(),d.set(a,b)),d=0;for(var e=arguments.length;d<e;d++){var f=arguments[d];if("function"==typeof f||"object"==typeof f&&null!==f){var g=b.o;null===g&&(b.o=g=new WeakMap),void 0===(b=g.get(f))&&(b=z(),g.set(f,b))}else null===(g=b.p)&&(b.p=g=new Map),void 0===(b=g.get(f))&&(b=z(),g.set(f,b))}if(1===b.s)return b.v;if(2===b.s)throw b.v;try{var h=a.apply(null,arguments);return(d=b).s=1,d.v=h}catch(a){throw(h=b).s=2,h.v=a,a}}},b.cacheSignal=function(){var a=c.A;return a?a.cacheSignal():null},b.captureOwnerStack=function(){return null},b.cloneElement=function(a,b,c){if(null==a)throw Error(d(267,a));var e=r({},a.props),f=a.key;if(null!=b)for(g in void 0!==b.key&&(f=""+b.key),b)q.call(b,g)&&"key"!==g&&"__self"!==g&&"__source"!==g&&("ref"!==g||void 0!==b.ref)&&(e[g]=b[g]);var g=arguments.length-2;if(1===g)e.children=c;else if(1<g){for(var h=Array(g),i=0;i<g;i++)h[i]=arguments[i+2];e.children=h}return s(a.type,f,e)},b.createElement=function(a,b,c){var d,e={},f=null;if(null!=b)for(d in void 0!==b.key&&(f=""+b.key),b)q.call(b,d)&&"key"!==d&&"__self"!==d&&"__source"!==d&&(e[d]=b[d]);var g=arguments.length-2;if(1===g)e.children=c;else if(1<g){for(var h=Array(g),i=0;i<g;i++)h[i]=arguments[i+2];e.children=h}if(a&&a.defaultProps)for(d in g=a.defaultProps)void 0===e[d]&&(e[d]=g[d]);return s(a,f,e)},b.createRef=function(){return{current:null}},b.forwardRef=function(a){return{$$typeof:l,render:a}},b.isValidElement=t,b.lazy=function(a){return{$$typeof:o,_payload:{_status:-1,_result:a},_init:x}},b.memo=function(a,b){return{$$typeof:n,type:a,compare:void 0===b?null:b}},b.use=function(a){return c.H.use(a)},b.useCallback=function(a,b){return c.H.useCallback(a,b)},b.useDebugValue=function(){},b.useId=function(){return c.H.useId()},b.useMemo=function(a,b){return c.H.useMemo(a,b)},b.version="19.2.0-canary-0bdb9206-20250818"},6453:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.handlerFactory=b.profileHandler=b.backchannelLogoutHandler=b.logoutHandler=b.loginHandler=b.callbackHandler=void 0;var e=c(2300);Object.defineProperty(b,"callbackHandler",{enumerable:!0,get:function(){return d(e).default}});var f=c(8502);Object.defineProperty(b,"loginHandler",{enumerable:!0,get:function(){return d(f).default}});var g=c(6519);Object.defineProperty(b,"logoutHandler",{enumerable:!0,get:function(){return d(g).default}});var h=c(8940);Object.defineProperty(b,"backchannelLogoutHandler",{enumerable:!0,get:function(){return d(h).default}});var i=c(1550);Object.defineProperty(b,"profileHandler",{enumerable:!0,get:function(){return d(i).default}});var j=c(991);Object.defineProperty(b,"handlerFactory",{enumerable:!0,get:function(){return d(j).default}})},6519:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(6663),f=c(1252),g=c(6218),h=c(9178);b.default=function(a){let b=i(a),c=j(a);return(0,h.getHandler)(b,c)};let i=a=>async(b,c,e={})=>{try{let c=new g.Auth0NextResponse(new d.NextResponse);return await a(new g.Auth0NextRequest(b),c,e),c.res}catch(a){throw new f.LogoutHandlerError(a)}},j=a=>async(b,c,d={})=>{try{return(0,e.assertReqRes)(b,c),await a(new g.Auth0NextApiRequest(b),new g.Auth0NextApiResponse(c),d)}catch(a){throw new f.LogoutHandlerError(a)}}},6663:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.assertCtx=b.assertReqRes=void 0,b.assertReqRes=(a,b)=>{if(!a)throw Error("Request is not available");if(!b)throw Error("Response is not available")},b.assertCtx=({req:a,res:c})=>{(0,b.assertReqRes)(a,c)}},7019:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(4970);class e extends d.NodeResponse{redirect(a,b=302){this.res.writableEnded||this.res.redirect(b,this.res.getHeader("Location")||a)}}b.default=e},7028:(a,b,c)=>{"use strict";c.d(b,{Ud:()=>d.stringifyCookie,VO:()=>d.ResponseCookies,tm:()=>d.RequestCookies});var d=c(8443)},7128:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(66),e=c(4944);function f(a){return(0,e.nJ)(a)||(0,d.RM)(a)}},7399:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613),e=d.__importDefault(c(236)),f=(0,d.__importDefault(c(2252)).default)("logout");b.default=function(a,b,c){let d="function"==typeof a?a:()=>a;return async(a,g,h={})=>{let i=await d(a),j=await b(i),k=h.returnTo||i.routes.postLogoutRedirect;f("logout() with return url: %s",k);try{new URL(k)}catch(a){k=(0,e.default)(i.baseURL,k)}if(!await c.isAuthenticated(a.req,g.res)){f("end-user already logged out, redirecting to %s",k),g.redirect(k);return}let l=await c.getIdToken(a.req,g.res);if(await c.delete(a.req,g.res),!i.idpLogout){f("performing a local only logout, redirecting to %s",k),g.redirect(k);return}f("logging out of identity provider, redirecting to %s",k=await j.endSessionUrl(Object.assign(Object.assign({},h.logoutParams),{post_logout_redirect_uri:k,id_token_hint:l}))),g.redirect(k)}}},7456:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613),e=c(9088),f=d.__importDefault(c(5588));class g extends f.default{constructor(a){super(a),this.req=a}getUrl(){return this.req.url}getMethod(){return this.req.method}getBody(){return this.req.body}getCookies(){return(0,e.parse)(this.req.headers.cookie||"")}}b.default=g},7613:(a,b,c)=>{"use strict";c.r(b),c.d(b,{__addDisposableResource:()=>J,__assign:()=>f,__asyncDelegator:()=>z,__asyncGenerator:()=>y,__asyncValues:()=>A,__await:()=>x,__awaiter:()=>o,__classPrivateFieldGet:()=>G,__classPrivateFieldIn:()=>I,__classPrivateFieldSet:()=>H,__createBinding:()=>q,__decorate:()=>h,__disposeResources:()=>L,__esDecorate:()=>j,__exportStar:()=>r,__extends:()=>e,__generator:()=>p,__importDefault:()=>F,__importStar:()=>E,__makeTemplateObject:()=>B,__metadata:()=>n,__param:()=>i,__propKey:()=>l,__read:()=>t,__rest:()=>g,__rewriteRelativeImportExtension:()=>M,__runInitializers:()=>k,__setFunctionName:()=>m,__spread:()=>u,__spreadArray:()=>w,__spreadArrays:()=>v,__values:()=>s,default:()=>N});var d=function(a,b){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function e(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function g(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function h(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}function i(a,b){return function(c,d){b(c,d,a)}}function j(a,b,c,d,e,f){function g(a){if(void 0!==a&&"function"!=typeof a)throw TypeError("Function expected");return a}for(var h,i=d.kind,j="getter"===i?"get":"setter"===i?"set":"value",k=!b&&a?d.static?a:a.prototype:null,l=b||(k?Object.getOwnPropertyDescriptor(k,d.name):{}),m=!1,n=c.length-1;n>=0;n--){var o={};for(var p in d)o[p]="access"===p?{}:d[p];for(var p in d.access)o.access[p]=d.access[p];o.addInitializer=function(a){if(m)throw TypeError("Cannot add initializers after decoration has completed");f.push(g(a||null))};var q=(0,c[n])("accessor"===i?{get:l.get,set:l.set}:l[j],o);if("accessor"===i){if(void 0===q)continue;if(null===q||"object"!=typeof q)throw TypeError("Object expected");(h=g(q.get))&&(l.get=h),(h=g(q.set))&&(l.set=h),(h=g(q.init))&&e.unshift(h)}else(h=g(q))&&("field"===i?e.unshift(h):l[j]=h)}k&&Object.defineProperty(k,d.name,l),m=!0}function k(a,b,c){for(var d=arguments.length>2,e=0;e<b.length;e++)c=d?b[e].call(a,c):b[e].call(a);return d?c:void 0}function l(a){return"symbol"==typeof a?a:"".concat(a)}function m(a,b,c){return"symbol"==typeof b&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:c?"".concat(c," ",b):b})}function n(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)}function o(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function p(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}var q=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]};function r(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||q(b,a,c)}function s(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function t(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function u(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(t(arguments[b]));return a}function v(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}function w(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function x(a){return this instanceof x?(this.v=a,this):new x(a)}function y(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof x?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function z(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,e){b[d]=a[d]?function(b){return(c=!c)?{value:x(a[d](b)),done:!1}:e?e(b):b}:e}}function A(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=s(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function B(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}var C=Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b},D=function(a){return(D=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)};function E(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=D(a),d=0;d<c.length;d++)"default"!==c[d]&&q(b,a,c[d]);return C(b,a),b}function F(a){return a&&a.__esModule?a:{default:a}}function G(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)}function H(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c}function I(a,b){if(null===b||"object"!=typeof b&&"function"!=typeof b)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof a?b===a:a.has(b)}function J(a,b,c){if(null!=b){var d,e;if("object"!=typeof b&&"function"!=typeof b)throw TypeError("Object expected.");if(c){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");d=b[Symbol.asyncDispose]}if(void 0===d){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");d=b[Symbol.dispose],c&&(e=d)}if("function"!=typeof d)throw TypeError("Object not disposable.");e&&(d=function(){try{e.call(this)}catch(a){return Promise.reject(a)}}),a.stack.push({value:b,dispose:d,async:c})}else c&&a.stack.push({async:!0});return b}var K="function"==typeof SuppressedError?SuppressedError:function(a,b,c){var d=Error(c);return d.name="SuppressedError",d.error=a,d.suppressed=b,d};function L(a){function b(b){a.error=a.hasError?new K(b,a.error,"An error was suppressed during disposal."):b,a.hasError=!0}var c,d=0;return function e(){for(;c=a.stack.pop();)try{if(!c.async&&1===d)return d=0,a.stack.push(c),Promise.resolve().then(e);if(c.dispose){var f=c.dispose.call(c.value);if(c.async)return d|=2,Promise.resolve(f).then(e,function(a){return b(a),e()})}else d|=1}catch(a){b(a)}if(1===d)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}()}function M(a,b){return"string"==typeof a&&/^\.\.?\//.test(a)?a.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,d,e,f){return c?b?".jsx":".js":!d||e&&f?d+e+"."+f.toLowerCase()+"js":a}):a}let N={__extends:e,__assign:f,__rest:g,__decorate:h,__param:i,__esDecorate:j,__runInitializers:k,__propKey:l,__setFunctionName:m,__metadata:n,__awaiter:o,__generator:p,__createBinding:q,__exportStar:r,__values:s,__read:t,__spread:u,__spreadArrays:v,__spreadArray:w,__await:x,__asyncGenerator:y,__asyncDelegator:z,__asyncValues:A,__makeTemplateObject:B,__importStar:E,__importDefault:F,__classPrivateFieldGet:G,__classPrivateFieldSet:H,__classPrivateFieldIn:I,__addDisposableResource:J,__disposeResources:L,__rewriteRelativeImportExtension:M}},7622:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613),e=d.__importDefault(c(236)),f=c(2386),g=(0,d.__importDefault(c(2252)).default)("handlers");b.default=function(a,b,c){let d="function"==typeof a?a:()=>a;return async(a,h,i={})=>{let j=await d(a),k=await b(j),l=Object.assign({returnTo:i.returnTo||j.baseURL,getLoginState:j.getLoginState},i);l.authorizationParams=Object.assign(Object.assign({redirect_uri:(0,e.default)(j.baseURL,j.routes.callback)},j.authorizationParams),l.authorizationParams||{});let m=await l.getLoginState(l);if("object"!=typeof m)throw Error("Custom state value must be an object.");m.nonce=k.generateRandomNonce(),m.returnTo=m.returnTo||l.returnTo;let n=l.authorizationParams.response_type,o=n.includes("code");o&&(g("response_type includes code, the authorization request will use PKCE"),m.code_verifier=k.generateRandomCodeVerifier());let p=["id_token","code id_token","code"];if(!p.includes(n))throw Error(`response_type should be one of ${p.join(", ")}`);if(!/\bopenid\b/.test(l.authorizationParams.scope))throw Error('scope should contain "openid"');let q={nonce:k.generateRandomNonce(),state:(0,f.encodeState)(m)};l.authorizationParams.max_age&&(q.max_age=l.authorizationParams.max_age);let r=Object.assign(Object.assign({},l.authorizationParams),q);o&&(q.code_verifier=k.generateRandomCodeVerifier(),r.code_challenge_method="S256",r.code_challenge=await k.calculateCodeChallenge(q.code_verifier)),n!==j.authorizationParams.response_type&&(q.response_type=n),await c.save(j.transactionCookie.name,a,h,{sameSite:"form_post"===r.response_mode?"none":j.transactionCookie.sameSite,value:JSON.stringify(q)});let s=await k.authorizationUrl(r);g("redirecting to %s",s),h.redirect(s)}}},7625:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.withPageAuthRequiredFactory=b.withApiAuthRequiredFactory=void 0;var e=c(8777);Object.defineProperty(b,"withApiAuthRequiredFactory",{enumerable:!0,get:function(){return d(e).default}});var f=c(1862);Object.defineProperty(b,"withPageAuthRequiredFactory",{enumerable:!0,get:function(){return d(f).default}})},7669:(a,b,c)=>{"use strict";c.d(b,{$p:()=>i,cg:()=>h,xl:()=>g});let d=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class e{disable(){throw d}getStore(){}run(){throw d}exit(){throw d}enterWith(){throw d}static bind(a){return a}}let f="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function g(){return f?new f:new e}function h(a){return f?f.bind(a):e.bind(a)}function i(){return f?f.snapshot():function(a,...b){return a(...b)}}},7720:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{interceptTestApis:function(){return f},wrapRequestHandler:function(){return g}});let d=c(5392),e=c(9165);function f(){return(0,e.interceptFetch)(c.g.fetch)}function g(a){return(b,c)=>(0,d.withRequest)(b,e.reader,()=>a(b,c))}},7753:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.configSingletonGetter=b.getConfig=void 0;let d=c(7613),e=c(4208),f=["n","no","false","0","off"],g=(a,b)=>void 0===a||""===a?b:a&&"string"==typeof a?!f.includes(a.toLowerCase().trim()):!!a,h=a=>void 0===a||""===a?void 0:+a;b.getConfig=(a={})=>{var b,c,f,i;let j=process.env.AUTH0_SECRET,k=process.env.AUTH0_ISSUER_BASE_URL,l=process.env.AUTH0_BASE_URL||process.env.NEXT_PUBLIC_AUTH0_BASE_URL,m=process.env.AUTH0_CLIENT_ID,n=process.env.AUTH0_CLIENT_SECRET,o=process.env.AUTH0_CLOCK_TOLERANCE,p=process.env.AUTH0_HTTP_TIMEOUT,q=process.env.AUTH0_ENABLE_TELEMETRY,r=process.env.AUTH0_IDP_LOGOUT,s=process.env.AUTH0_LOGOUT,t=process.env.AUTH0_ID_TOKEN_SIGNING_ALG,u=process.env.AUTH0_LEGACY_SAME_SITE_COOKIE,v=process.env.AUTH0_IDENTITY_CLAIM_FILTER,w=process.env.AUTH0_PUSHED_AUTHORIZATION_REQUESTS,x=process.env.AUTH0_CALLBACK,y=process.env.AUTH0_POST_LOGOUT_REDIRECT,z=process.env.AUTH0_AUDIENCE,A=process.env.AUTH0_SCOPE,B=process.env.AUTH0_ORGANIZATION,C=process.env.AUTH0_SESSION_NAME,D=process.env.AUTH0_SESSION_ROLLING,E=process.env.AUTH0_SESSION_ROLLING_DURATION,F=process.env.AUTH0_SESSION_ABSOLUTE_DURATION,G=process.env.AUTH0_SESSION_AUTO_SAVE,H=process.env.AUTH0_SESSION_STORE_ID_TOKEN,I=process.env.AUTH0_COOKIE_DOMAIN,J=process.env.AUTH0_COOKIE_PATH,K=process.env.AUTH0_COOKIE_TRANSIENT,L=process.env.AUTH0_COOKIE_HTTP_ONLY,M=process.env.AUTH0_COOKIE_SECURE,N=process.env.AUTH0_COOKIE_SAME_SITE,O=process.env.AUTH0_CLIENT_ASSERTION_SIGNING_KEY,P=process.env.AUTH0_CLIENT_ASSERTION_SIGNING_ALG,Q=process.env.AUTH0_TRANSACTION_COOKIE_NAME,R=process.env.AUTH0_TRANSACTION_COOKIE_DOMAIN,S=process.env.AUTH0_TRANSACTION_COOKIE_PATH,T=process.env.AUTH0_TRANSACTION_COOKIE_SAME_SITE,U=process.env.AUTH0_TRANSACTION_COOKIE_SECURE,V=l&&!/^https?:\/\//.test(l)?`https://${l}`:l,{organization:W}=a,X=d.__rest(a,["organization"]),Y=(0,e.get)(Object.assign(Object.assign({secret:j,issuerBaseURL:k,baseURL:V,clientID:m,clientSecret:n,clockTolerance:h(o),httpTimeout:h(p),enableTelemetry:g(q),idpLogout:g(r,!0),auth0Logout:g(s,!0),idTokenSigningAlg:t,legacySameSiteCookie:g(u),identityClaimFilter:(a=>void 0===a||""===a?void 0:a.replace(/\s/g,"").split(","))(v),pushedAuthorizationRequests:g(w,!1)},X),{authorizationParams:Object.assign({response_type:"code",audience:z,scope:A},X.authorizationParams),session:Object.assign(Object.assign({name:C,rolling:g(D),rollingDuration:E&&isNaN(Number(E))?g(E):h(E),absoluteDuration:F&&isNaN(Number(F))?g(F):h(F),autoSave:g(G,!0),storeIDToken:g(H)},X.session),{cookie:Object.assign({domain:I,path:J||"/",transient:g(K),httpOnly:g(L),secure:g(M),sameSite:N},null==(b=X.session)?void 0:b.cookie)}),routes:{callback:(null==(c=X.routes)?void 0:c.callback)||x||"/api/auth/callback",postLogoutRedirect:(null==(f=X.routes)?void 0:f.postLogoutRedirect)||y},clientAssertionSigningKey:O,clientAssertionSigningAlg:P,transactionCookie:Object.assign({name:Q,domain:R,path:S||"/",secure:g(U),sameSite:T},X.transactionCookie)}));return Object.assign(Object.assign({},Y),{organization:W||B,routes:Object.assign(Object.assign({},Y.routes),{login:(null==(i=X.routes)?void 0:i.login)||process.env.NEXT_PUBLIC_AUTH0_LOGIN||"/api/auth/login"})})},b.configSingletonGetter=(a={},c)=>{let d;return e=>(d||(e.getCookies(),"getUrl"in e&&e.getUrl(),d=(0,b.getConfig)(Object.assign(Object.assign({},a),{session:Object.assign({genId:c},a.session)}))),d)}},7814:(a,b,c)=>{"use strict";a.exports=c(6440)},7918:(a,b,c)=>{"use strict";c.d(b,{s:()=>d});let d=(0,c(2058).xl)()},7924:(a,b,c)=>{"use strict";c.r(b),c.d(b,{cookies:()=>r,draftMode:()=>B,headers:()=>x});var d=c(261),e=c(7028),f=c(5379),g=c(1128),h=c(107),i=c(4979),j=c(5770),k=c(7814);let l={current:null},m="function"==typeof k.cache?k.cache:a=>a,n=console.warn;function o(a){return function(...b){n(a(...b))}}m(a=>{try{n(l.current)}finally{l.current=null}});var p=c(8823),q=c(9809);function r(){let a="cookies",b=f.J.getStore(),c=g.FP.getStore();if(b){if(c&&"after"===c.phase&&!(0,p.iC)())throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(b.forceStatic)return t(d.Ck.seal(new e.tm(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.f(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,r),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0});case"prerender":var k=b,l=c;let g=s.get(l);if(g)return g;let m=(0,j.W5)(l.renderSignal,k.route,"`cookies()`");return s.set(l,m),m;case"prerender-client":let n="`cookies`";throw Object.defineProperty(new q.z(`${n} must not be used within a client component. Next.js should be preventing ${n} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.Ui)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.xI)(a,b,c);case"prerender-runtime":return(0,h.wi)(c,function(a){let b=s.get(a);if(b)return b;let c=Promise.resolve(a);return s.set(a,c),c}(c.cookies));case"private-cache":return t(c.cookies);case"request":return(0,h.Pk)(c),t((0,d.Xj)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.M1)(a)}let s=new WeakMap;function t(a){let b=s.get(a);if(b)return b;let c=Promise.resolve(a);return s.set(a,c),Object.defineProperties(c,{[Symbol.iterator]:{value:a[Symbol.iterator]?a[Symbol.iterator].bind(a):u.bind(a)},size:{get:()=>a.size},get:{value:a.get.bind(a)},getAll:{value:a.getAll.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},delete:{value:a.delete.bind(a)},clear:{value:"function"==typeof a.clear?a.clear.bind(a):v.bind(a,c)},toString:{value:a.toString.bind(a)}}),c}function u(){return this.getAll().map(a=>[a.name,a]).values()}function v(a){for(let a of this.getAll())this.delete(a.name);return a}o(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})});var w=c(1458);function x(){let a="headers",b=f.J.getStore(),c=g.FP.getStore();if(b){if(c&&"after"===c.phase&&!(0,p.iC)())throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(b.forceStatic)return z(w.o.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,x),b.invalidDynamicUsageError??=a,a}case"private-cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache: private". Accessing "headers" inside a private cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E742",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,x),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new i.f(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":case"prerender-runtime":var d=b,e=c;let f=y.get(e);if(f)return f;let g=(0,j.W5)(e.renderSignal,d.route,"`headers()`");return y.set(e,g),g;case"prerender-client":let k="`headers`";throw Object.defineProperty(new q.z(`${k} must not be used within a client component. Next.js should be preventing ${k} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.Ui)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.xI)(a,b,c);case"request":return(0,h.Pk)(c),z(c.headers)}}(0,g.M1)(a)}let y=new WeakMap;function z(a){let b=y.get(a);if(b)return b;let c=Promise.resolve(a);return y.set(a,c),Object.defineProperties(c,{append:{value:a.append.bind(a)},delete:{value:a.delete.bind(a)},get:{value:a.get.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},getSetCookie:{value:a.getSetCookie.bind(a)},forEach:{value:a.forEach.bind(a)},keys:{value:a.keys.bind(a)},values:{value:a.values.bind(a)},entries:{value:a.entries.bind(a)},[Symbol.iterator]:{value:a[Symbol.iterator].bind(a)}}),c}o(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})});var A=c(6159);function B(){let a=f.J.getStore(),b=g.FP.getStore();switch((!a||!b)&&(0,g.M1)("draftMode"),b.type){case"prerender-runtime":return(0,h.wi)(b,C(b.draftMode,a));case"request":return C(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,g.lW)(a,b);if(c)return C(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return C(null,a);default:return b}}function C(a,b){let c,d=a??D,e=E.get(d);return e||(c=function(a){let b=new F(a),c=Promise.resolve(b);return Object.defineProperty(c,"isEnabled",{get:()=>b.isEnabled,enumerable:!0,configurable:!0}),c.enable=b.enable.bind(b),c.disable=b.disable.bind(b),c}(a),E.set(d,c),c)}let D={},E=new WeakMap;class F{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){G("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){G("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function G(a,b){let c=f.J.getStore(),d=g.FP.getStore();if(c){if((null==d?void 0:d.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new i.f(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(d)switch(d.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,h.t3)(c.route,a,b,d)}case"prerender-client":let e="`draftMode`";throw Object.defineProperty(new q.z(`${e} must not be used within a client component. Next.js should be preventing ${e} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.Ui)(c.route,a,d.dynamicTracking);case"prerender-legacy":d.revalidate=0;let f=Object.defineProperty(new A.F(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=f.stack,f;case"request":(0,h.Pk)(d)}}}o(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})})},7994:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613).__importDefault(c(3180));class e extends d.default{constructor(a){super(),this.res=a}}b.default=e},8002:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b){let c;try{c=new URL(a,b)}catch(a){return}if(c.origin===b.origin)return c.toString()}},8012:(a,b,c)=>{"use strict";c.r(b),c.d(b,{ReadonlyURLSearchParams:()=>q,RedirectType:()=>e.zB,forbidden:()=>m,notFound:()=>l,permanentRedirect:()=>i,redirect:()=>h,unauthorized:()=>n,unstable_isUnrecognizedActionError:()=>r,unstable_rethrow:()=>o});var d=c(1378),e=c(4944);let f=c(7918).s;function g(a,b,c){void 0===c&&(c=d.Q.TemporaryRedirect);let f=Object.defineProperty(Error(e.oJ),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return f.digest=e.oJ+";"+b+";"+a+";"+c+";",f}function h(a,b){var c;throw null!=b||(b=(null==f||null==(c=f.getStore())?void 0:c.isAction)?e.zB.push:e.zB.replace),g(a,b,d.Q.TemporaryRedirect)}function i(a,b){throw void 0===b&&(b=e.zB.replace),g(a,b,d.Q.PermanentRedirect)}var j=c(66);let k=""+j.s8+";404";function l(){let a=Object.defineProperty(Error(k),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=k,a}function m(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}j.s8,j.s8;let o=c(9515).X;class p extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class q extends URLSearchParams{append(){throw new p}delete(){throw new p}set(){throw new p}sort(){throw new p}}function r(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}},8194:a=>{function b(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}a.exports=function(a,c){c=c||{};var d,e,f,g,h=typeof a;if("string"===h&&a.length>0){var i=a;if(!((i=String(i)).length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(j){var k=parseFloat(j[1]);switch((j[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*k;case"weeks":case"week":case"w":return 6048e5*k;case"days":case"day":case"d":return 864e5*k;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*k;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*k;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:break}}}return}if("number"===h&&isFinite(a)){return c.long?(e=Math.abs(d=a))>=864e5?b(d,e,864e5,"day"):e>=36e5?b(d,e,36e5,"hour"):e>=6e4?b(d,e,6e4,"minute"):e>=1e3?b(d,e,1e3,"second"):d+" ms":(g=Math.abs(f=a))>=864e5?Math.round(f/864e5)+"d":g>=36e5?Math.round(f/36e5)+"h":g>=6e4?Math.round(f/6e4)+"m":g>=1e3?Math.round(f/1e3)+"s":f+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},8277:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AbstractClient=void 0;class c{constructor(a,b){this.config=a,this.telemetry=b}}b.AbstractClient=c},8401:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StatelessSession=void 0;let d=c(7613),e=d.__importStar(c(2743)),f=c(9088),g=d.__importDefault(c(2252)),h=c(2312),i=c(9437),j=(0,g.default)("stateless-session"),k=a=>null!==a;class l extends i.AbstractSession{constructor(a){super(a),this.config=a}async getChunkSize(a){if(void 0===this.chunkSize){let b=a.session,c=b.cookie,{transient:e}=c,g=d.__rest(c,["transient"]),{name:h}=b,i=Object.assign({},g);e||(i.expires=new Date);let j=(0,f.serialize)(`${h}.0`,"",i);this.chunkSize=4096-j.length}return this.chunkSize}async getKeys(a){if(!this.keys){let b=a.secret,c=Array.isArray(b)?b:[b];this.keys=await Promise.all(c.map(h.encryption))}return this.keys}async encrypt(a,{iat:b,uat:c,exp:d},f){return await new e.EncryptJWT(Object.assign({},a)).setProtectedHeader({alg:"dir",enc:"A256GCM",uat:c,iat:b,exp:d}).encrypt(f)}async decrypt(a,b){let c;for(let d of b)try{return await e.jwtDecrypt(a,d)}catch(a){c=a}throw c}async getSession(a){let b,c=await this.getConfig(a),{name:d}=c.session,e=a.getCookies();if(d in e?(j("reading session from %s cookie",d),b=e[d]):`${d}.0`in e&&(b=Object.entries(e).map(([a,b])=>{let c=a.match(`^${d}\\.(\\d+)$`);return c?[c[1],b]:null}).filter(k).sort(([a],[b])=>parseInt(a,10)-parseInt(b,10)).map(([a,b])=>(j("reading session chunk from %s.%d cookie",d,a),b)).join("")),b){let a=await this.getKeys(c),{protectedHeader:d,payload:e}=await this.decrypt(b,a);return{header:d,data:e}}}async setSession(a,b,c,d,e,f,g){let h=await this.getConfig(a),{name:i}=h.session,k=a.getCookies();j("found session, creating signed session cookie(s) with name %o(.i)",i);let[l]=await this.getKeys(h),m=await this.encrypt(c,{iat:e,uat:d,exp:f},l),n=await this.getChunkSize(h),o=Math.ceil(m.length/n),p=new Set(Object.keys(k).filter(a=>a.match(`^${i}(?:\\.\\d)?$`)));if(o>1){j("cookie size greater than %d, chunking",this.chunkSize);for(let a=0;a<o;a++){let c=m.slice(a*n,(a+1)*n),d=`${i}.${a}`;b.setCookie(d,c,g),p.delete(d)}}else b.setCookie(i,m,g),p.delete(i);p.forEach(a=>b.clearCookie(a,g))}async deleteSession(a,b,c){let{name:d}=(await this.getConfig(a)).session;for(let e of Object.keys(a.getCookies()))e.match(`^${d}(?:\\.\\d)?$`)&&b.clearCookie(e,c)}}b.StatelessSession=l},8443:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};function g(a){var b;let c=["path"in a&&a.path&&`Path=${a.path}`,"expires"in a&&(a.expires||0===a.expires)&&`Expires=${("number"==typeof a.expires?new Date(a.expires):a.expires).toUTCString()}`,"maxAge"in a&&"number"==typeof a.maxAge&&`Max-Age=${a.maxAge}`,"domain"in a&&a.domain&&`Domain=${a.domain}`,"secure"in a&&a.secure&&"Secure","httpOnly"in a&&a.httpOnly&&"HttpOnly","sameSite"in a&&a.sameSite&&`SameSite=${a.sameSite}`,"partitioned"in a&&a.partitioned&&"Partitioned","priority"in a&&a.priority&&`Priority=${a.priority}`].filter(Boolean),d=`${a.name}=${encodeURIComponent(null!=(b=a.value)?b:"")}`;return 0===c.length?d:`${d}; ${c.join("; ")}`}function h(a){let b=new Map;for(let c of a.split(/; */)){if(!c)continue;let a=c.indexOf("=");if(-1===a){b.set(c,"true");continue}let[d,e]=[c.slice(0,a),c.slice(a+1)];try{b.set(d,decodeURIComponent(null!=e?e:"true"))}catch{}}return b}function i(a){if(!a)return;let[[b,c],...d]=h(a),{domain:e,expires:f,httponly:g,maxage:i,path:l,samesite:m,secure:n,partitioned:o,priority:p}=Object.fromEntries(d.map(([a,b])=>[a.toLowerCase().replace(/-/g,""),b]));{var q,r,s={name:b,value:decodeURIComponent(c),domain:e,...f&&{expires:new Date(f)},...g&&{httpOnly:!0},..."string"==typeof i&&{maxAge:Number(i)},path:l,...m&&{sameSite:j.includes(q=(q=m).toLowerCase())?q:void 0},...n&&{secure:!0},...p&&{priority:k.includes(r=(r=p).toLowerCase())?r:void 0},...o&&{partitioned:!0}};let a={};for(let b in s)s[b]&&(a[b]=s[b]);return a}}((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{RequestCookies:()=>l,ResponseCookies:()=>m,parseCookie:()=>h,parseSetCookie:()=>i,stringifyCookie:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let i of d(f))e.call(a,i)||i===g||b(a,i,{get:()=>f[i],enumerable:!(h=c(f,i))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);var j=["strict","lax","none"],k=["low","medium","high"],l=class{constructor(a){this._parsed=new Map,this._headers=a;let b=a.get("cookie");if(b)for(let[a,c]of h(b))this._parsed.set(a,{name:a,value:c})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed);if(!a.length)return c.map(([a,b])=>b);let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(([a])=>a===d).map(([a,b])=>b)}has(a){return this._parsed.has(a)}set(...a){let[b,c]=1===a.length?[a[0].name,a[0].value]:a,d=this._parsed;return d.set(b,{name:b,value:c}),this._headers.set("cookie",Array.from(d).map(([a,b])=>g(b)).join("; ")),this}delete(a){let b=this._parsed,c=Array.isArray(a)?a.map(a=>b.delete(a)):b.delete(a);return this._headers.set("cookie",Array.from(b).map(([a,b])=>g(b)).join("; ")),c}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a=>`${a.name}=${encodeURIComponent(a.value)}`).join("; ")}},m=class{constructor(a){var b,c,d;this._parsed=new Map,this._headers=a;let e=null!=(d=null!=(c=null==(b=a.getSetCookie)?void 0:b.call(a))?c:a.get("set-cookie"))?d:[];for(let a of Array.isArray(e)?e:function(a){if(!a)return[];var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}(e)){let b=i(a);b&&this._parsed.set(b.name,b)}}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed.values());if(!a.length)return c;let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(a=>a.name===d)}has(a){return this._parsed.has(a)}set(...a){let[b,c,d]=1===a.length?[a[0].name,a[0].value,a[0]]:a,e=this._parsed;return e.set(b,function(a={name:"",value:""}){return"number"==typeof a.expires&&(a.expires=new Date(a.expires)),a.maxAge&&(a.expires=new Date(Date.now()+1e3*a.maxAge)),(null===a.path||void 0===a.path)&&(a.path="/"),a}({name:b,value:c,...d})),function(a,b){for(let[,c]of(b.delete("set-cookie"),a)){let a=g(c);b.append("set-cookie",a)}}(e,this._headers),this}delete(...a){let[b,c]="string"==typeof a[0]?[a[0]]:[a[0].name,a[0]];return this.set({...c,name:b,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(g).join("; ")}}},8496:a=>{self,a.exports=(()=>{var a,b;return a={7629:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(9474),g=c(1687),h=c(8652),i=c(8160),j=c(3292),k=c(6354),l=c(8901),m=c(9708),n=c(6914),o=c(2294),p=c(6133),q=c(1152),r=c(8863),s=c(2036),t={Base:class{constructor(a){this.type=a,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new o.Ids,this._preferences=null,this._refs=new p.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return d("function"==typeof m.describe,"Manifest functionality disabled"),m.describe(this)}allow(...a){return i.verifyFlat(a,"allow"),this._values(a,"_valids")}alter(a){d(a&&"object"==typeof a&&!Array.isArray(a),"Invalid targets argument"),d(!this._inRuleset(),"Cannot set alterations inside a ruleset");let b=this.clone();for(let c in b.$_terms.alterations=b.$_terms.alterations||[],a){let e=a[c];d("function"==typeof e,"Alteration adjuster for",c,"must be a function"),b.$_terms.alterations.push({target:c,adjuster:e})}return b.$_temp.ruleset=!1,b}artifact(a){return d(void 0!==a,"Artifact cannot be undefined"),d(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",a)}cast(a){return d(!1===a||"string"==typeof a,"Invalid to value"),d(!1===a||this._definition.cast[a],"Type",this.type,"does not support casting to",a),this.$_setFlag("cast",!1===a?void 0:a)}default(a,b){return this._default("default",a,b)}description(a){return d(a&&"string"==typeof a,"Description must be a non-empty string"),this.$_setFlag("description",a)}empty(a){let b=this.clone();return void 0!==a&&(a=b.$_compile(a,{override:!1})),b.$_setFlag("empty",a,{clone:!1})}error(a){return d(a,"Missing error"),d(a instanceof Error||"function"==typeof a,"Must provide a valid Error object or a function"),this.$_setFlag("error",a)}example(a,b={}){return d(void 0!==a,"Missing example"),i.assertOptions(b,["override"]),this._inner("examples",a,{single:!0,override:b.override})}external(a,b){return"object"==typeof a&&(d(!b,"Cannot combine options with description"),b=a.description,a=a.method),d("function"==typeof a,"Method must be a function"),d(void 0===b||b&&"string"==typeof b,"Description must be a non-empty string"),this._inner("externals",{method:a,description:b},{single:!0})}failover(a,b){return this._default("failover",a,b)}forbidden(){return this.presence("forbidden")}id(a){return a?(d("string"==typeof a,"id must be a non-empty string"),d(/^[^\.]+$/.test(a),"id cannot contain period character"),this.$_setFlag("id",a)):this.$_setFlag("id",void 0)}invalid(...a){return this._values(a,"_invalids")}label(a){return d(a&&"string"==typeof a,"Label name must be a non-empty string"),this.$_setFlag("label",a)}meta(a){return d(void 0!==a,"Meta cannot be undefined"),this._inner("metas",a,{single:!0})}note(...a){for(let b of(d(a.length,"Missing notes"),a))d(b&&"string"==typeof b,"Notes must be non-empty strings");return this._inner("notes",a)}only(a=!0){return d("boolean"==typeof a,"Invalid mode:",a),this.$_setFlag("only",a)}optional(){return this.presence("optional")}prefs(a){d(a,"Missing preferences"),d(void 0===a.context,"Cannot override context"),d(void 0===a.externals,"Cannot override externals"),d(void 0===a.warnings,"Cannot override warnings"),d(void 0===a.debug,"Cannot override debug"),i.checkPreferences(a);let b=this.clone();return b._preferences=i.preferences(b._preferences,a),b}presence(a){return d(["optional","required","forbidden"].includes(a),"Unknown presence mode",a),this.$_setFlag("presence",a)}raw(a=!0){return this.$_setFlag("result",a?"raw":void 0)}result(a){return d(["raw","strip"].includes(a),"Unknown result mode",a),this.$_setFlag("result",a)}required(){return this.presence("required")}strict(a){let b=this.clone();return b._preferences=i.preferences(b._preferences,{convert:void 0!==a&&!a}),b}strip(a=!0){return this.$_setFlag("result",a?"strip":void 0)}tag(...a){for(let b of(d(a.length,"Missing tags"),a))d(b&&"string"==typeof b,"Tags must be non-empty strings");return this._inner("tags",a)}unit(a){return d(a&&"string"==typeof a,"Unit name must be a non-empty string"),this.$_setFlag("unit",a)}valid(...a){i.verifyFlat(a,"valid");let b=this.allow(...a);return b.$_setFlag("only",!!b._valids,{clone:!1}),b}when(a,b){let c=this.clone();c.$_terms.whens||(c.$_terms.whens=[]);let e=j.when(c,a,b);if(!["any","link"].includes(c.type))for(let a of e.is?[e]:e.switch)d(!a.then||"any"===a.then.type||a.then.type===c.type,"Cannot combine",c.type,"with",a.then&&a.then.type),d(!a.otherwise||"any"===a.otherwise.type||a.otherwise.type===c.type,"Cannot combine",c.type,"with",a.otherwise&&a.otherwise.type);return c.$_terms.whens.push(e),c.$_mutateRebuild()}cache(a){d(!this._inRuleset(),"Cannot set caching inside a ruleset"),d(!this._cache,"Cannot override schema cache"),d(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");let b=this.clone();return b._cache=a||h.provider.provision(),b.$_temp.ruleset=!1,b}clone(){let a=Object.create(Object.getPrototypeOf(this));return this._assign(a)}concat(a){d(i.isSchema(a),"Invalid schema object"),d("any"===this.type||"any"===a.type||a.type===this.type,"Cannot merge type",this.type,"with another type:",a.type),d(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),d(!a._inRuleset(),"Cannot concatenate a schema with open ruleset");let b=this.clone();if("any"===this.type&&"any"!==a.type){let c=a.clone();for(let a of Object.keys(b))"type"!==a&&(c[a]=b[a]);b=c}for(let c of(b._ids.concat(a._ids),b._refs.register(a,p.toSibling),b._preferences=b._preferences?i.preferences(b._preferences,a._preferences):a._preferences,b._valids=s.merge(b._valids,a._valids,a._invalids),b._invalids=s.merge(b._invalids,a._invalids,a._valids),a._singleRules.keys()))b._singleRules.has(c)&&(b._rules=b._rules.filter(a=>a.keep||a.name!==c),b._singleRules.delete(c));for(let c of a._rules)a._definition.rules[c.method].multi||b._singleRules.set(c.name,c),b._rules.push(c);if(b._flags.empty&&a._flags.empty){b._flags.empty=b._flags.empty.concat(a._flags.empty);let c=Object.assign({},a._flags);delete c.empty,g(b._flags,c)}else if(a._flags.empty){b._flags.empty=a._flags.empty;let c=Object.assign({},a._flags);delete c.empty,g(b._flags,c)}else g(b._flags,a._flags);for(let c in a.$_terms){let d=a.$_terms[c];d?b.$_terms[c]?b.$_terms[c]=b.$_terms[c].concat(d):b.$_terms[c]=d.slice():b.$_terms[c]||(b.$_terms[c]=d)}return this.$_root._tracer&&this.$_root._tracer._combine(b,[this,a]),b.$_mutateRebuild()}extend(a){return d(!a.base,"Cannot extend type with another base"),l.type(this,a)}extract(a){return a=Array.isArray(a)?a:a.split("."),this._ids.reach(a)}fork(a,b){d(!this._inRuleset(),"Cannot fork inside a ruleset");let c=this;for(let d of[].concat(a))d=Array.isArray(d)?d:d.split("."),c=c._ids.fork(d,b,c);return c.$_temp.ruleset=!1,c}rule(a){let b=this._definition;i.assertOptions(a,Object.keys(b.modifiers)),d(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");let c=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;d(c>=0&&c<this._rules.length,"Cannot apply rules to empty ruleset");let f=this.clone();for(let g=c;g<f._rules.length;++g){let c=f._rules[g],h=e(c);for(let e in a)b.modifiers[e](h,a[e]),d(h.name===c.name,"Cannot change rule name");f._rules[g]=h,f._singleRules.get(h.name)===c&&f._singleRules.set(h.name,h)}return f.$_temp.ruleset=!1,f.$_mutateRebuild()}get ruleset(){d(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");let a=this.clone();return a.$_temp.ruleset=a._rules.length,a}get $(){return this.ruleset}tailor(a){a=[].concat(a),d(!this._inRuleset(),"Cannot tailor inside a ruleset");let b=this;if(this.$_terms.alterations)for(let{target:c,adjuster:e}of this.$_terms.alterations)a.includes(c)&&(b=e(b),d(i.isSchema(b),"Alteration adjuster for",c,"failed to return a schema object"));return(b=b.$_modify({each:b=>b.tailor(a),ref:!1})).$_temp.ruleset=!1,b.$_mutateRebuild()}tracer(){return q.location?q.location(this):this}validate(a,b){return r.entry(a,this,b)}validateAsync(a,b){return r.entryAsync(a,this,b)}$_addRule(a){for(let b in"string"==typeof a&&(a={name:a}),d(a&&"object"==typeof a,"Invalid options"),d(a.name&&"string"==typeof a.name,"Invalid rule name"),a)d("_"!==b[0],"Cannot set private rule properties");let b=Object.assign({},a);b._resolve=[],b.method=b.method||b.name;let c=this._definition.rules[b.method],e=b.args;d(c,"Unknown rule",b.method);let f=this.clone();if(e)for(let a in d(1===Object.keys(e).length||Object.keys(e).length===this._definition.rules[b.name].args.length,"Invalid rule definition for",this.type,b.name),e){let g=e[a];if(c.argsByName){let h=c.argsByName.get(a);if(h.ref&&i.isResolvable(g))b._resolve.push(a),f.$_mutateRegister(g);else if(h.normalize&&(g=h.normalize(g),e[a]=g),h.assert){let b=i.validateArg(g,a,h);d(!b,b,"or reference")}}void 0!==g?e[a]=g:delete e[a]}return c.multi||(f._ruleRemove(b.name,{clone:!1}),f._singleRules.set(b.name,b)),!1===f.$_temp.ruleset&&(f.$_temp.ruleset=null),c.priority?f._rules.unshift(b):f._rules.push(b),f}$_compile(a,b){return j.schema(this.$_root,a,b)}$_createError(a,b,c,d,e,f={}){let g=!1!==f.flags?this._flags:{},h=f.messages?n.merge(this._definition.messages,f.messages):this._definition.messages;return new k.Report(a,b,c,g,h,d,e)}$_getFlag(a){return this._flags[a]}$_getRule(a){return this._singleRules.get(a)}$_mapLabels(a){return a=Array.isArray(a)?a:a.split("."),this._ids.labels(a)}$_match(a,b,c,d){(c=Object.assign({},c)).abortEarly=!0,c._externals=!1,b.snapshot();let e=!r.validate(a,this,b,c,d).errors;return b.restore(),e}$_modify(a){return i.assertOptions(a,["each","once","ref","schema"]),o.schema(this,a)||this}$_mutateRebuild(){return d(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(a,{source:b,name:c,path:d,key:e})=>{let f=this._definition[b][c]&&this._definition[b][c].register;!1!==f&&this.$_mutateRegister(a,{family:f,key:e})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(a,{family:b,key:c}={}){this._refs.register(a,b),this._ids.register(a,{key:c})}$_property(a){return this._definition.properties[a]}$_reach(a){return this._ids.reach(a)}$_rootReferences(){return this._refs.roots()}$_setFlag(a,b,c={}){d("_"===a[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");let e=this._definition.flags[a]||{};if(f(b,e.default)&&(b=void 0),f(b,this._flags[a]))return this;let g=!1!==c.clone?this.clone():this;return void 0!==b?(g._flags[a]=b,g.$_mutateRegister(b)):delete g._flags[a],"_"!==a[0]&&(g.$_temp.ruleset=!1),g}$_parent(a,...b){return this[a][i.symbols.parent].call(this,...b)}$_validate(a,b,c){return r.validate(a,this,b,c)}_assign(a){for(let b in a.type=this.type,a.$_root=this.$_root,a.$_temp=Object.assign({},this.$_temp),a.$_temp.whens={},a._ids=this._ids.clone(),a._preferences=this._preferences,a._valids=this._valids&&this._valids.clone(),a._invalids=this._invalids&&this._invalids.clone(),a._rules=this._rules.slice(),a._singleRules=e(this._singleRules,{shallow:!0}),a._refs=this._refs.clone(),a._flags=Object.assign({},this._flags),a._cache=null,a.$_terms={},this.$_terms)a.$_terms[b]=this.$_terms[b]?this.$_terms[b].slice():null;for(let b in a.$_super={},this.$_super)a.$_super[b]=this._super[b].bind(a);return a}_bare(){let a=this.clone();a._reset();let b=a._definition.terms;for(let c in b){let d=b[c];a.$_terms[c]=d.init}return a.$_mutateRebuild()}_default(a,b,c={}){return i.assertOptions(c,"literal"),d(void 0!==b,"Missing",a,"value"),d("function"==typeof b||!c.literal,"Only function value supports literal option"),"function"==typeof b&&c.literal&&(b={[i.symbols.literal]:!0,literal:b}),this.$_setFlag(a,b)}_generate(a,b,c){if(!this.$_terms.whens)return{schema:this};let d=[],e=[];for(let f=0;f<this.$_terms.whens.length;++f){let g=this.$_terms.whens[f];if(g.concat){d.push(g.concat),e.push(`${f}.concat`);continue}let h=g.ref?g.ref.resolve(a,b,c):a,i=g.is?[g]:g.switch,j=e.length;for(let j=0;j<i.length;++j){let{is:k,then:l,otherwise:m}=i[j],n=`${f}${g.switch?"."+j:""}`;if(k.$_match(h,b.nest(k,`${n}.is`),c)){if(l){let f=b.localize([...b.path,`${n}.then`],b.ancestors,b.schemas),{schema:g,id:h}=l._generate(a,f,c);d.push(g),e.push(`${n}.then${h?`(${h})`:""}`);break}}else if(m){let f=b.localize([...b.path,`${n}.otherwise`],b.ancestors,b.schemas),{schema:g,id:h}=m._generate(a,f,c);d.push(g),e.push(`${n}.otherwise${h?`(${h})`:""}`);break}}if(g.break&&e.length>j)break}let f=e.join(", ");if(b.mainstay.tracer.debug(b,"rule","when",f),!f)return{schema:this};if(!b.mainstay.tracer.active&&this.$_temp.whens[f])return{schema:this.$_temp.whens[f],id:f};let g=this;for(let e of(this._definition.generate&&(g=this._definition.generate(this,a,b,c)),d))g=g.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(g,[this,...d]),this.$_temp.whens[f]=g,{schema:g,id:f}}_inner(a,b,c={}){d(!this._inRuleset(),`Cannot set ${a} inside a ruleset`);let e=this.clone();return e.$_terms[a]&&!c.override||(e.$_terms[a]=[]),c.single?e.$_terms[a].push(b):e.$_terms[a].push(...b),e.$_temp.ruleset=!1,e}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(a,b={}){if(!this._singleRules.has(a))return this;let c=!1!==b.clone?this.clone():this;c._singleRules.delete(a);let d=[];for(let b=0;b<c._rules.length;++b){let e=c._rules[b];e.name!==a||e.keep?d.push(e):c._inRuleset()&&b<c.$_temp.ruleset&&--c.$_temp.ruleset}return c._rules=d,c}_values(a,b){i.verifyFlat(a,b.slice(1,-1));let c=this.clone(),e=a[0]===i.symbols.override;if(e&&(a=a.slice(1)),!c[b]&&a.length?c[b]=new s:e&&(c[b]=a.length?new s:null,c.$_mutateRebuild()),!c[b])return c;for(let f of(e&&c[b].override(),a)){d(void 0!==f,"Cannot call allow/valid/invalid with undefined"),d(f!==i.symbols.override,"Override must be the first value");let a="_invalids"===b?"_valids":"_invalids";c[a]&&(c[a].remove(f),c[a].length||(d("_valids"===b||!c._flags.only,"Setting invalid value",f,"leaves schema rejecting all values due to previous valid rule"),c[a]=null)),c[b].add(f,c._refs)}return c}}};t.Base.prototype[i.symbols.any]={version:i.version,compile:j.compile,root:"$_root"},t.Base.prototype.isImmutable=!0,t.Base.prototype.deny=t.Base.prototype.invalid,t.Base.prototype.disallow=t.Base.prototype.invalid,t.Base.prototype.equal=t.Base.prototype.valid,t.Base.prototype.exist=t.Base.prototype.required,t.Base.prototype.not=t.Base.prototype.invalid,t.Base.prototype.options=t.Base.prototype.prefs,t.Base.prototype.preferences=t.Base.prototype.prefs,a.exports=new t.Base},8652:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(8160),g={max:1e3,supported:new Set(["undefined","boolean","number","string"])};b.provider={provision:a=>new g.Cache(a)},g.Cache=class{constructor(a={}){f.assertOptions(a,["max"]),d(void 0===a.max||a.max&&a.max>0&&isFinite(a.max),"Invalid max cache size"),this._max=a.max||g.max,this._map=new Map,this._list=new g.List}get length(){return this._map.size}set(a,b){if(null!==a&&!g.supported.has(typeof a))return;let c=this._map.get(a);if(c)return c.value=b,void this._list.first(c);c=this._list.unshift({key:a,value:b}),this._map.set(a,c),this._compact()}get(a){let b=this._map.get(a);if(b)return this._list.first(b),e(b.value)}_compact(){if(this._map.size>this._max){let a=this._list.pop();this._map.delete(a.key)}}},g.List=class{constructor(){this.tail=null,this.head=null}unshift(a){return a.next=null,a.prev=this.head,this.head&&(this.head.next=a),this.head=a,this.tail||(this.tail=a),a}first(a){a!==this.head&&(this._remove(a),this.unshift(a))}pop(){return this._remove(this.tail)}_remove(a){let{next:b,prev:c}=a;return b.prev=c,c&&(c.next=b),a===this.tail&&(this.tail=b),a.prev=null,a.next=null,a}}},8160:(a,b,c)=>{"use strict";let d,e,f=c(375),g=c(7916),h=c(5934),i={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};b.version=h.version,b.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},b.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},b.assertOptions=function(a,b,c="Options"){f(a&&"object"==typeof a&&!Array.isArray(a),"Options must be of type object");let d=Object.keys(a).filter(a=>!b.includes(a));f(0===d.length,`${c} contain unknown keys: ${d}`)},b.checkPreferences=function(a){let b=(e=e||c(3378)).preferences.validate(a);if(b.error)throw new g([b.error.details[0].message])},b.compare=function(a,b,c){switch(c){case"=":return a===b;case">":return a>b;case"<":return a<b;case">=":return a>=b;case"<=":return a<=b}},b.default=function(a,b){return void 0===a?b:a},b.isIsoDate=function(a){return i.isoDate.test(a)},b.isNumber=function(a){return"number"==typeof a&&!isNaN(a)},b.isResolvable=function(a){return!!a&&(a[b.symbols.ref]||a[b.symbols.template])},b.isSchema=function(a,c={}){let d=a&&a[b.symbols.any];return!!d&&(f(c.legacy||d.version===b.version,"Cannot mix different versions of joi schemas"),!0)},b.isValues=function(a){return a[b.symbols.values]},b.limit=function(a){return Number.isSafeInteger(a)&&a>=0},b.preferences=function(a,e){d=d||c(6914);let f=Object.assign({},a=a||{},e=e||{});return e.errors&&a.errors&&(f.errors=Object.assign({},a.errors,e.errors),f.errors.wrap=Object.assign({},a.errors.wrap,e.errors.wrap)),e.messages&&(f.messages=d.compile(e.messages,a.messages)),delete f[b.symbols.prefs],f},b.tryWithPath=function(a,b,c={}){try{return a()}catch(a){throw void 0!==a.path?a.path=b+"."+a.path:a.path=b,c.append&&(a.message=`${a.message} (${a.path})`),a}},b.validateArg=function(a,c,{assert:d,message:e}){if(b.isSchema(d)){let b=d.validate(a);if(!b.error)return;return b.error.message}if(!d(a))return c?`${c} ${e}`:e},b.verifyFlat=function(a,b){for(let c of a)f(!Array.isArray(c),"Method no longer accepts array arguments:",b)}},3292:(a,b,c)=>{"use strict";let d=c(375),e=c(8160),f=c(6133),g={};b.schema=function(a,b,c={}){e.assertOptions(c,["appendPath","override"]);try{return g.schema(a,b,c)}catch(a){throw c.appendPath&&void 0!==a.path&&(a.message=`${a.message} (${a.path})`),a}},g.schema=function(a,b,c){d(void 0!==b,"Invalid undefined schema"),Array.isArray(b)&&(d(b.length,"Invalid empty array schema"),1===b.length&&(b=b[0]));let f=(b,...d)=>!1!==c.override?b.valid(a.override,...d):b.valid(...d);if(g.simple(b))return f(a,b);if("function"==typeof b)return a.custom(b);if(d("object"==typeof b,"Invalid schema content:",typeof b),e.isResolvable(b))return f(a,b);if(e.isSchema(b))return b;if(Array.isArray(b)){for(let c of b)if(!g.simple(c))return a.alternatives().try(...b);return f(a,...b)}return b instanceof RegExp?a.string().regex(b):b instanceof Date?f(a.date(),b):(d(Object.getPrototypeOf(b)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),a.object().keys(b))},b.ref=function(a,b){return f.isRef(a)?a:f.create(a,b)},b.compile=function(a,c,f={}){e.assertOptions(f,["legacy"]);let h=c&&c[e.symbols.any];if(h)return d(f.legacy||h.version===e.version,"Cannot mix different versions of joi schemas:",h.version,e.version),c;if("object"!=typeof c||!f.legacy)return b.schema(a,c,{appendPath:!0});let i=g.walk(c);return i?i.compile(i.root,c):b.schema(a,c,{appendPath:!0})},g.walk=function(a){if("object"!=typeof a)return null;if(Array.isArray(a)){for(let b of a){let a=g.walk(b);if(a)return a}return null}let b=a[e.symbols.any];if(b)return{root:a[b.root],compile:b.compile};for(let b in d(Object.getPrototypeOf(a)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),a){let c=g.walk(a[b]);if(c)return c}return null},g.simple=function(a){return null===a||["boolean","string","number"].includes(typeof a)},b.when=function(a,c,h){if(void 0===h&&(d(c&&"object"==typeof c,"Missing options"),h=c,c=f.create(".")),Array.isArray(h)&&(h={switch:h}),e.assertOptions(h,["is","not","then","otherwise","switch","break"]),e.isSchema(c))return d(void 0===h.is,'"is" can not be used with a schema condition'),d(void 0===h.not,'"not" can not be used with a schema condition'),d(void 0===h.switch,'"switch" can not be used with a schema condition'),g.condition(a,{is:c,then:h.then,otherwise:h.otherwise,break:h.break});if(d(f.isRef(c)||"string"==typeof c,"Invalid condition:",c),d(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let i=h;void 0!==h.not&&(i={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let j=void 0!==i.is?a.$_compile(i.is):a.$_root.invalid(null,!1,0,"").required();return d(void 0!==i.then||void 0!==i.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),d(void 0===i.break||void 0===i.then||void 0===i.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||f.isRef(h.is)||e.isSchema(h.is)||(j=j.required()),g.condition(a,{ref:b.ref(c),is:j,then:i.then,otherwise:i.otherwise,break:i.break})}d(Array.isArray(h.switch),'"switch" must be an array'),d(void 0===h.is,'Cannot combine "switch" with "is"'),d(void 0===h.not,'Cannot combine "switch" with "not"'),d(void 0===h.then,'Cannot combine "switch" with "then"');let i={ref:b.ref(c),switch:[],break:h.break};for(let b=0;b<h.switch.length;++b){let c=h.switch[b],g=b===h.switch.length-1;e.assertOptions(c,g?["is","then","otherwise"]:["is","then"]),d(void 0!==c.is,'Switch statement missing "is"'),d(void 0!==c.then,'Switch statement missing "then"');let j={is:a.$_compile(c.is),then:a.$_compile(c.then)};if(f.isRef(c.is)||e.isSchema(c.is)||(j.is=j.is.required()),g){d(void 0===h.otherwise||void 0===c.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');let b=void 0!==h.otherwise?h.otherwise:c.otherwise;void 0!==b&&(d(void 0===i.break,"Cannot specify both otherwise and break"),j.otherwise=a.$_compile(b))}i.switch.push(j)}return i},g.condition=function(a,b){for(let c of["then","otherwise"])void 0===b[c]?delete b[c]:b[c]=a.$_compile(b[c]);return b}},6354:(a,b,c)=>{"use strict";let d=c(5688),e=c(8160),f=c(3328);b.Report=class{constructor(a,c,d,e,f,g,h){if(this.code=a,this.flags=e,this.messages=f,this.path=g.path,this.prefs=h,this.state=g,this.value=c,this.message=null,this.template=null,this.local=d||{},this.local.label=b.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){let a=this.path[this.path.length-1];"object"!=typeof a&&(this.local.key=a)}}_setTemplate(a){if(this.template=a,!this.flags.label&&0===this.path.length){let a=this._template(this.template,"root");a&&(this.local.label=a)}}toString(){if(this.message)return this.message;let a=this.code;if(!this.prefs.errors.render)return this.code;let b=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===b?`Error code "${a}" is not defined, your custom type is missing the correct messages definition`:(this.message=b.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(a,c){return b.template(this.value,a,c||this.code,this.state,this.prefs)}},b.path=function(a){let b="";for(let c of a)"object"!=typeof c&&("string"==typeof c?(b&&(b+="."),b+=c):b+=`[${c}]`);return b},b.template=function(a,b,c,d,g){if(!b)return;if(f.isTemplate(b))return"root"!==c?b:null;let h=g.errors.language;if(e.isResolvable(h)&&(h=h.resolve(a,d,g)),h&&b[h]){if(void 0!==b[h][c])return b[h][c];if(void 0!==b[h]["*"])return b[h]["*"]}return b[c]?b[c]:b["*"]},b.label=function(a,c,d,e){if(!d.errors.label)return"";if(a.label)return a.label;let f=c.path;return"key"===d.errors.label&&c.path.length>1&&(f=c.path.slice(-1)),b.path(f)||b.template(null,d.messages,"root",c,d)||e&&b.template(null,e,"root",c,d)||"value"},b.process=function(a,c,d){if(!a)return null;let{override:e,message:f,details:g}=b.details(a);if(e)return e;if(d.errors.stack)return new b.ValidationError(f,g,c);let h=Error.stackTraceLimit;Error.stackTraceLimit=0;let i=new b.ValidationError(f,g,c);return Error.stackTraceLimit=h,i},b.details=function(a,b={}){let c=[],d=[];for(let e of a){if(e instanceof Error){if(!1!==b.override)return{override:e};let a=e.toString();c.push(a),d.push({message:a,type:"override",context:{error:e}});continue}let a=e.toString();c.push(a),d.push({message:a,path:e.path.filter(a=>"object"!=typeof a),type:e.code,context:e.local})}return c.length>1&&(c=[...new Set(c)]),{message:c.join(". "),details:d}},b.ValidationError=class extends Error{constructor(a,b,c){super(a),this._original=c,this.details=b}static isError(a){return a instanceof b.ValidationError}},b.ValidationError.prototype.isJoi=!0,b.ValidationError.prototype.name="ValidationError",b.ValidationError.prototype.annotate=d.error},8901:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(8160),g=c(6914),h={};b.type=function(a,b){let c=Object.getPrototypeOf(a),i=e(c),j=a._assign(Object.create(i)),k=Object.assign({},b);delete k.base,i._definition=k;let l=c._definition||{};k.messages=g.merge(l.messages,k.messages),k.properties=Object.assign({},l.properties,k.properties),j.type=k.type,k.flags=Object.assign({},l.flags,k.flags);let m=Object.assign({},l.terms);if(k.terms)for(let a in k.terms){let b=k.terms[a];d(void 0===j.$_terms[a],"Invalid term override for",k.type,a),j.$_terms[a]=b.init,m[a]=b}k.terms=m,k.args||(k.args=l.args),k.prepare=h.prepare(k.prepare,l.prepare),k.coerce&&("function"==typeof k.coerce&&(k.coerce={method:k.coerce}),k.coerce.from&&!Array.isArray(k.coerce.from)&&(k.coerce={method:k.coerce.method,from:[].concat(k.coerce.from)})),k.coerce=h.coerce(k.coerce,l.coerce),k.validate=h.validate(k.validate,l.validate);let n=Object.assign({},l.rules);if(k.rules)for(let a in k.rules){let b=k.rules[a];d("object"==typeof b,"Invalid rule definition for",k.type,a);let c=b.method;if(void 0===c&&(c=function(){return this.$_addRule(a)}),c&&(d(!i[a],"Rule conflict in",k.type,a),i[a]=c),d(!n[a],"Rule conflict in",k.type,a),n[a]=b,b.alias)for(let a of[].concat(b.alias))i[a]=b.method;b.args&&(b.argsByName=new Map,b.args=b.args.map(a=>("string"==typeof a&&(a={name:a}),d(!b.argsByName.has(a.name),"Duplicated argument name",a.name),f.isSchema(a.assert)&&(a.assert=a.assert.strict().label(a.name)),b.argsByName.set(a.name,a),a)))}k.rules=n;let o=Object.assign({},l.modifiers);if(k.modifiers)for(let a in k.modifiers){d(!i[a],"Rule conflict in",k.type,a);let b=k.modifiers[a];d("function"==typeof b,"Invalid modifier definition for",k.type,a);let c=function(b){return this.rule({[a]:b})};i[a]=c,o[a]=b}if(k.modifiers=o,k.overrides){for(let a in i._super=c,j.$_super={},k.overrides)d(c[a],"Cannot override missing",a),k.overrides[a][f.symbols.parent]=c[a],j.$_super[a]=c[a].bind(j);Object.assign(i,k.overrides)}k.cast=Object.assign({},l.cast,k.cast);let p=Object.assign({},l.manifest,k.manifest);return p.build=h.build(k.manifest&&k.manifest.build,l.manifest&&l.manifest.build),k.manifest=p,k.rebuild=h.rebuild(k.rebuild,l.rebuild),j},h.build=function(a,b){return a&&b?function(c,d){return b(a(c,d),d)}:a||b},h.coerce=function(a,b){return a&&b?{from:a.from&&b.from?[...new Set([...a.from,...b.from])]:null,method(c,d){let e;if((!b.from||b.from.includes(typeof c))&&(e=b.method(c,d))){if(e.errors||void 0===e.value)return e;c=e.value}if(!a.from||a.from.includes(typeof c)){let b=a.method(c,d);if(b)return b}return e}}:a||b},h.prepare=function(a,b){return a&&b?function(c,d){let e=a(c,d);if(e){if(e.errors||void 0===e.value)return e;c=e.value}return b(c,d)||e}:a||b},h.rebuild=function(a,b){return a&&b?function(c){b(c),a(c)}:a||b},h.validate=function(a,b){return a&&b?function(c,d){let e=b(c,d);if(e){if(e.errors&&(!Array.isArray(e.errors)||e.errors.length))return e;c=e.value}return a(c,d)||e}:a||b}},5107:(a,b,c)=>{"use strict";let d,e=c(375),f=c(8571),g=c(8652),h=c(8160),i=c(3292),j=c(6354),k=c(8901),l=c(9708),m=c(6133),n=c(3328),o=c(1152),p={types:{alternatives:c(4946),any:c(8068),array:c(546),boolean:c(4937),date:c(7500),function:c(390),link:c(8785),number:c(3832),object:c(8966),string:c(7417),symbol:c(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){let a={_types:new Set(Object.keys(p.types))};for(let b of a._types)a[b]=function(...a){return e(!a.length||["alternatives","link","object"].includes(b),"The",b,"type does not allow arguments"),p.generate(this,p.types[b],a)};for(let b of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])a[b]=function(...a){return this.any()[b](...a)};for(let b in Object.assign(a,p.methods),p.aliases){let c=p.aliases[b];a[b]=a[c]}return a.x=a.expression,o.setup&&o.setup(a),a}};p.methods={ValidationError:j.ValidationError,version:h.version,cache:g.provider,assert(a,b,...c){p.assert(a,b,!0,c)},attempt:(a,b,...c)=>p.assert(a,b,!1,c),build(a){return e("function"==typeof l.build,"Manifest functionality disabled"),l.build(this,a)},checkPreferences(a){h.checkPreferences(a)},compile(a,b){return i.compile(this,a,b)},defaults(a){e("function"==typeof a,"modifier must be a function");let b=Object.assign({},this);for(let c of b._types){let d=a(b[c]());e(h.isSchema(d),"modifier must return a valid schema object"),b[c]=function(...a){return p.generate(this,d,a)}}return b},expression:(...a)=>new n(...a),extend(...a){h.verifyFlat(a,"extend"),d=d||c(3378),e(a.length,"You need to provide at least one extension"),this.assert(a,d.extensions);let b=Object.assign({},this);for(let c of(b._types=new Set(b._types),a))for(let a of("function"==typeof c&&(c=c(b)),this.assert(c,d.extension),p.expandExtension(c,b))){e(void 0===b[a.type]||b._types.has(a.type),"Cannot override name",a.type);let c=a.base||this.any(),d=k.type(c,a);b._types.add(a.type),b[a.type]=function(...a){return p.generate(this,d,a)}}return b},isError:j.ValidationError.isError,isExpression:n.isTemplate,isRef:m.isRef,isSchema:h.isSchema,in:(...a)=>m.in(...a),override:h.symbols.override,ref:(...a)=>m.create(...a),types(){let a={};for(let b of this._types)a[b]=this[b]();for(let b in p.aliases)a[b]=this[b]();return a}},p.assert=function(a,b,c,d){let e=d[0]instanceof Error||"string"==typeof d[0]?d[0]:null,g=null!==e?d[1]:d[0],i=b.validate(a,h.preferences({errors:{stack:!0}},g||{})),k=i.error;if(!k)return i.value;if(e instanceof Error)throw e;let l=c&&"function"==typeof k.annotate?k.annotate():k.message;throw k instanceof j.ValidationError==0&&(k=f(k)),k.message=e?`${e} ${l}`:l,k},p.generate=function(a,b,c){return e(a,"Must be invoked on a Joi instance."),b.$_root=a,b._definition.args&&c.length?b._definition.args(b,...c):b},p.expandExtension=function(a,b){if("string"==typeof a.type)return[a];let c=[];for(let d of b._types)if(a.type.test(d)){let e=Object.assign({},a);e.type=d,e.base=b[d](),c.push(e)}return c},a.exports=p.root()},6914:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(3328);b.compile=function(a,b){if("string"==typeof a)return d(!b,"Cannot set single message string"),new f(a);if(f.isTemplate(a))return d(!b,"Cannot set single message template"),a;for(let c in d("object"==typeof a&&!Array.isArray(a),"Invalid message options"),b=b?e(b):{},a){let e=a[c];if("root"===c||f.isTemplate(e)){b[c]=e;continue}if("string"==typeof e){b[c]=new f(e);continue}for(c in d("object"==typeof e&&!Array.isArray(e),"Invalid message for",c),b[c]=b[c]||{},e){let a=e[c];"root"===c||f.isTemplate(a)?b[c][c]=a:(d("string"==typeof a,"Invalid message for",c,"in",c),b[c][c]=new f(a))}}return b},b.decompile=function(a){let b={};for(let c in a){let d=a[c];if("root"===c){b.root=d;continue}if(f.isTemplate(d)){b[c]=d.describe({compact:!0});continue}for(c in b[c]={},d){let a=d[c];"root"!==c?b[c][c]=a.describe({compact:!0}):b[c].root=a}}return b},b.merge=function(a,c){if(!a)return b.compile(c);if(!c)return a;if("string"==typeof c)return new f(c);if(f.isTemplate(c))return c;let g=e(a);for(let a in c){let b=c[a];if("root"===a||f.isTemplate(b)){g[a]=b;continue}if("string"==typeof b){g[a]=new f(b);continue}for(a in d("object"==typeof b&&!Array.isArray(b),"Invalid message for",a),g[a]=g[a]||{},b){let c=b[a];"root"===a||f.isTemplate(c)?g[a][a]=c:(d("string"==typeof c,"Invalid message for",a,"in",a),g[a][a]=new f(c))}}return g}},2294:(a,b,c)=>{"use strict";let d=c(375),e=c(8160),f=c(6133),g={};b.Ids=g.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){let a=new g.Ids;return a._byId=new Map(this._byId),a._byKey=new Map(this._byKey),a._schemaChain=this._schemaChain,a}concat(a){for(let[b,c]of(a._schemaChain&&(this._schemaChain=!0),a._byId.entries()))d(!this._byKey.has(b),"Schema id conflicts with existing key:",b),this._byId.set(b,c);for(let[b,c]of a._byKey.entries())d(!this._byId.has(b),"Schema key conflicts with existing id:",b),this._byKey.set(b,c)}fork(a,b,c){let f=this._collect(a);f.push({schema:c});let h=f.shift(),i={id:h.id,schema:b(h.schema)};for(let a of(d(e.isSchema(i.schema),"adjuster function failed to return a joi schema type"),f))i={id:a.id,schema:g.fork(a.schema,i.id,i.schema)};return i.schema}labels(a,b=[]){let c=a[0],d=this._get(c);if(!d)return[...b,...a].join(".");let e=a.slice(1);return b=[...b,d.schema._flags.label||c],e.length?d.schema._ids.labels(e,b):b.join(".")}reach(a,b=[]){let c=a[0],e=this._get(c);d(e,"Schema does not contain path",[...b,...a].join("."));let f=a.slice(1);return f.length?e.schema._ids.reach(f,[...b,c]):e.schema}register(a,{key:b}={}){if(!a||!e.isSchema(a))return;(a.$_property("schemaChain")||a._ids._schemaChain)&&(this._schemaChain=!0);let c=a._flags.id;if(c){let b=this._byId.get(c);d(!b||b.schema===a,"Cannot add different schemas with the same id:",c),d(!this._byKey.has(c),"Schema id conflicts with existing key:",c),this._byId.set(c,{schema:a,id:c})}b&&(d(!this._byKey.has(b),"Schema already contains key:",b),d(!this._byId.has(b),"Schema key conflicts with existing id:",b),this._byKey.set(b,{schema:a,id:b}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(a,b=[],c=[]){let e=a[0],f=this._get(e);d(f,"Schema does not contain path",[...b,...a].join(".")),c=[f,...c];let g=a.slice(1);return g.length?f.schema._ids._collect(g,[...b,e],c):c}_get(a){return this._byId.get(a)||this._byKey.get(a)}},g.fork=function(a,c,d){let e=b.schema(a,{each:(a,{key:b})=>{if(c===(a._flags.id||b))return d},ref:!1});return e?e.$_mutateRebuild():a},b.schema=function(a,b){let c;for(let d in a._flags){if("_"===d[0])continue;let e=g.scan(a._flags[d],{source:"flags",name:d},b);void 0!==e&&((c=c||a.clone())._flags[d]=e)}for(let d=0;d<a._rules.length;++d){let e=a._rules[d],f=g.scan(e.args,{source:"rules",name:e.name},b);if(void 0!==f){c=c||a.clone();let b=Object.assign({},e);b.args=f,c._rules[d]=b,c._singleRules.get(e.name)===e&&c._singleRules.set(e.name,b)}}for(let d in a.$_terms){if("_"===d[0])continue;let e=g.scan(a.$_terms[d],{source:"terms",name:d},b);void 0!==e&&((c=c||a.clone()).$_terms[d]=e)}return c},g.scan=function(a,b,c,d,h){let i,j=d||[];if(null!==a&&"object"==typeof a){if(Array.isArray(a)){for(let d=0;d<a.length;++d){let e="terms"===b.source&&"keys"===b.name&&a[d].key,f=g.scan(a[d],b,c,[d,...j],e);void 0!==f&&((i=i||a.slice())[d]=f)}return i}if(!1!==c.schema&&e.isSchema(a)||!1!==c.ref&&f.isRef(a)){let d=c.each(a,{...b,path:j,key:h});if(d===a)return;return d}for(let d in a){if("_"===d[0])continue;let e=g.scan(a[d],b,c,[d,...j],h);void 0!==e&&((i=i||Object.assign({},a))[d]=e)}return i}}},6133:(a,b,c)=>{"use strict";let d,e=c(375),f=c(8571),g=c(9621),h=c(8160),i={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};b.create=function(a,b={}){e("string"==typeof a,"Invalid reference key:",a),h.assertOptions(b,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),e(!b.prefix||"object"==typeof b.prefix,"options.prefix must be of type object");let c=Object.assign({},i.defaults,b);delete c.prefix;let d=c.separator,f=i.context(a,d,b.prefix);if(c.type=f.type,a=f.key,"value"===c.type)if(f.root&&(e(!d||a[0]!==d,"Cannot specify relative path with root prefix"),c.ancestor="root",a||(a=null)),d&&d===a)a=null,c.ancestor=0;else if(void 0!==c.ancestor)e(!d||!a||a[0]!==d,"Cannot combine prefix with ancestor option");else{let[b,e]=i.ancestor(a,d);e&&""===(a=a.slice(e))&&(a=null),c.ancestor=b}return c.path=d?null===a?[]:a.split(d):[a],new i.Ref(c)},b.in=function(a,c={}){return b.create(a,{...c,in:!0})},b.isRef=function(a){return!!a&&!!a[h.symbols.ref]},i.Ref=class{constructor(a){e("object"==typeof a,"Invalid reference construction"),h.assertOptions(a,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),e([!1,void 0].includes(a.separator)||"string"==typeof a.separator&&1===a.separator.length,"Invalid separator"),e(!a.adjust||"function"==typeof a.adjust,"options.adjust must be a function"),e(!a.map||Array.isArray(a.map),"options.map must be an array"),e(!a.map||!a.adjust,"Cannot set both map and adjust options"),Object.assign(this,i.defaults,a),e("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(a,b,c,d,f={}){return e(!this.in||f.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(c.context,b,f):"local"===this.type?this._resolve(d,b,f):this.ancestor?"root"===this.ancestor?this._resolve(b.ancestors[b.ancestors.length-1],b,f):(e(this.ancestor<=b.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(b.ancestors[this.ancestor-1],b,f)):this._resolve(a,b,f)}_resolve(a,b,c){let d;if("value"===this.type&&b.mainstay.shadow&&!1!==c.shadow&&(d=b.mainstay.shadow.get(this.absolute(b))),void 0===d&&(d=g(a,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(d=this.adjust(d)),this.map){let a=this.map.get(d);void 0!==a&&(d=a)}return b.mainstay&&b.mainstay.tracer.resolve(b,this,d),d}toString(){return this.display}absolute(a){return[...a.path.slice(0,-this.ancestor),...this.path]}clone(){return new i.Ref(this)}describe(){let a={path:this.path};for(let b of("value"!==this.type&&(a.type=this.type),"."!==this.separator&&(a.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(a.ancestor=this.ancestor),this.map&&(a.map=[...this.map]),["adjust","iterables","render"]))null!==this[b]&&void 0!==this[b]&&(a[b]=this[b]);return!1!==this.in&&(a.in=!0),{ref:a}}updateDisplay(){let a=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${a}`);if(!this.separator)return void(this.display=`ref:${a}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${a}`);if("root"===this.ancestor)return void(this.display=`ref:root:${a}`);if(1===this.ancestor)return void(this.display=`ref:${a||".."}`);let b=Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${b}${a||""}`}},i.Ref.prototype[h.symbols.ref]=!0,b.build=function(a){return"value"===(a=Object.assign({},i.defaults,a)).type&&void 0===a.ancestor&&(a.ancestor=1),new i.Ref(a)},i.context=function(a,b,c={}){if(a=a.trim(),c){let d=void 0===c.global?"$":c.global;if(d!==b&&a.startsWith(d))return{key:a.slice(d.length),type:"global"};let e=void 0===c.local?"#":c.local;if(e!==b&&a.startsWith(e))return{key:a.slice(e.length),type:"local"};let f=void 0===c.root?"/":c.root;if(f!==b&&a.startsWith(f))return{key:a.slice(f.length),type:"value",root:!0}}return{key:a,type:"value"}},i.ancestor=function(a,b){if(!b||a[0]!==b)return[1,0];if(a[1]!==b)return[0,1];let c=2;for(;a[c]===b;)++c;return[c-1,c]},b.toSibling=0,b.toParent=1,b.Manager=class{constructor(){this.refs=[]}register(a,e){if(a)if(e=void 0===e?b.toParent:e,Array.isArray(a))for(let b of a)this.register(b,e);else if(h.isSchema(a))for(let b of a._refs.refs)b.ancestor-e>=0&&this.refs.push({ancestor:b.ancestor-e,root:b.root});else b.isRef(a)&&"value"===a.type&&a.ancestor-e>=0&&this.refs.push({ancestor:a.ancestor-e,root:a.root}),(d=d||c(3328)).isTemplate(a)&&this.register(a.refs(),e)}get length(){return this.refs.length}clone(){let a=new b.Manager;return a.refs=f(this.refs),a}reset(){this.refs=[]}roots(){return this.refs.filter(a=>!a.ancestor).map(a=>a.root)}}},3378:(a,b,c)=>{"use strict";let d=c(5107),e={};e.wrap=d.string().min(1).max(2).allow(!1),b.preferences=d.object({allowUnknown:d.boolean(),abortEarly:d.boolean(),artifacts:d.boolean(),cache:d.boolean(),context:d.object(),convert:d.boolean(),dateFormat:d.valid("date","iso","string","time","utc"),debug:d.boolean(),errors:{escapeHtml:d.boolean(),label:d.valid("path","key",!1),language:[d.string(),d.object().ref()],render:d.boolean(),stack:d.boolean(),wrap:{label:e.wrap,array:e.wrap,string:e.wrap}},externals:d.boolean(),messages:d.object(),noDefaults:d.boolean(),nonEnumerables:d.boolean(),presence:d.valid("required","optional","forbidden"),skipFunctions:d.boolean(),stripUnknown:d.object({arrays:d.boolean(),objects:d.boolean()}).or("arrays","objects").allow(!0,!1),warnings:d.boolean()}).strict(),e.nameRx=/^[a-zA-Z0-9]\w*$/,e.rule=d.object({alias:d.array().items(d.string().pattern(e.nameRx)).single(),args:d.array().items(d.string(),d.object({name:d.string().pattern(e.nameRx).required(),ref:d.boolean(),assert:d.alternatives([d.function(),d.object().schema()]).conditional("ref",{is:!0,then:d.required()}),normalize:d.function(),message:d.string().when("assert",{is:d.function(),then:d.required()})})),convert:d.boolean(),manifest:d.boolean(),method:d.function().allow(!1),multi:d.boolean(),validate:d.function()}),b.extension=d.object({type:d.alternatives([d.string(),d.object().regex()]).required(),args:d.function(),cast:d.object().pattern(e.nameRx,d.object({from:d.function().maxArity(1).required(),to:d.function().minArity(1).maxArity(2).required()})),base:d.object().schema().when("type",{is:d.object().regex(),then:d.forbidden()}),coerce:[d.function().maxArity(3),d.object({method:d.function().maxArity(3).required(),from:d.array().items(d.string()).single()})],flags:d.object().pattern(e.nameRx,d.object({setter:d.string(),default:d.any()})),manifest:{build:d.function().arity(2)},messages:[d.object(),d.string()],modifiers:d.object().pattern(e.nameRx,d.function().minArity(1).maxArity(2)),overrides:d.object().pattern(e.nameRx,d.function()),prepare:d.function().maxArity(3),rebuild:d.function().arity(1),rules:d.object().pattern(e.nameRx,e.rule),terms:d.object().pattern(e.nameRx,d.object({init:d.array().allow(null).required(),manifest:d.object().pattern(/.+/,[d.valid("schema","single"),d.object({mapped:d.object({from:d.string().required(),to:d.string().required()}).required()})])})),validate:d.function().maxArity(3)}).strict(),b.extensions=d.array().items(d.object(),d.function().arity(1)).strict(),e.desc={buffer:d.object({buffer:d.string()}),func:d.object({function:d.function().required(),options:{literal:!0}}),override:d.object({override:!0}),ref:d.object({ref:d.object({type:d.valid("value","global","local"),path:d.array().required(),separator:d.string().length(1).allow(!1),ancestor:d.number().min(0).integer().allow("root"),map:d.array().items(d.array().length(2)).min(1),adjust:d.function(),iterables:d.boolean(),in:d.boolean(),render:d.boolean()}).required()}),regex:d.object({regex:d.string().min(3)}),special:d.object({special:d.valid("deep").required()}),template:d.object({template:d.string().required(),options:d.object()}),value:d.object({value:d.alternatives([d.object(),d.array()]).required()})},e.desc.entity=d.alternatives([d.array().items(d.link("...")),d.boolean(),d.function(),d.number(),d.string(),e.desc.buffer,e.desc.func,e.desc.ref,e.desc.regex,e.desc.special,e.desc.template,e.desc.value,d.link("/")]),e.desc.values=d.array().items(null,d.boolean(),d.function(),d.number().allow(1/0,-1/0),d.string().allow(""),d.symbol(),e.desc.buffer,e.desc.func,e.desc.override,e.desc.ref,e.desc.regex,e.desc.template,e.desc.value),e.desc.messages=d.object().pattern(/.+/,[d.string(),e.desc.template,d.object().pattern(/.+/,[d.string(),e.desc.template])]),b.description=d.object({type:d.string().required(),flags:d.object({cast:d.string(),default:d.any(),description:d.string(),empty:d.link("/"),failover:e.desc.entity,id:d.string(),label:d.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:d.boolean(),unit:d.string()}).unknown(),preferences:{allowUnknown:d.boolean(),abortEarly:d.boolean(),artifacts:d.boolean(),cache:d.boolean(),convert:d.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:d.boolean(),label:["path","key"],language:[d.string(),e.desc.ref],wrap:{label:e.wrap,array:e.wrap}},externals:d.boolean(),messages:e.desc.messages,noDefaults:d.boolean(),nonEnumerables:d.boolean(),presence:["required","optional","forbidden"],skipFunctions:d.boolean(),stripUnknown:d.object({arrays:d.boolean(),objects:d.boolean()}).or("arrays","objects").allow(!0,!1),warnings:d.boolean()},allow:e.desc.values,invalid:e.desc.values,rules:d.array().min(1).items({name:d.string().required(),args:d.object().min(1),keep:d.boolean(),message:[d.string(),e.desc.messages],warn:d.boolean()}),keys:d.object().pattern(/.*/,d.link("/")),link:e.desc.ref}).pattern(/^[a-z]\w*$/,d.any())},493:(a,b,c)=>{"use strict";let d=c(8571),e=c(9621),f=c(8160),g={value:Symbol("value")};a.exports=g.State=class{constructor(a,b,c){this.path=a,this.ancestors=b,this.mainstay=c.mainstay,this.schemas=c.schemas,this.debug=null}localize(a,b=null,c=null){let d=new g.State(a,b,this);return c&&d.schemas&&(d.schemas=[g.schemas(c),...d.schemas]),d}nest(a,b){let c=new g.State(this.path,this.ancestors,this);return c.schemas=c.schemas&&[g.schemas(a),...c.schemas],c.debug=b,c}shadow(a,b){this.mainstay.shadow=this.mainstay.shadow||new g.Shadow,this.mainstay.shadow.set(this.path,a,b)}snapshot(){this.mainstay.shadow&&(this._snapshot=d(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},g.schemas=function(a){return f.isSchema(a)?{schema:a}:a},g.Shadow=class{constructor(){this._values=null}set(a,b,c){if(!a.length||"strip"===c&&"number"==typeof a[a.length-1])return;this._values=this._values||new Map;let d=this._values;for(let b=0;b<a.length;++b){let c=a[b],e=d.get(c);e||(e=new Map,d.set(c,e)),d=e}d[g.value]=b}get(a){let b=this.node(a);if(b)return b[g.value]}node(a){if(this._values)return e(this._values,a,{iterables:!0})}override(a,b){if(!this._values)return;let c=a.slice(0,-1),d=a[a.length-1],f=e(this._values,c,{iterables:!0});b?f.set(d,b):f&&f.delete(d)}}},3328:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(5277),g=c(1447),h=c(8160),i=c(6354),j=c(6133),k={symbol:Symbol("template"),opens:Array(1e3).join("\0"),closes:Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};a.exports=k.Template=class{constructor(a,b){if(d("string"==typeof a,"Template source must be a string"),d(!a.includes("\0")&&!a.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=a,this.rendered=a,this._template=null,b){let{functions:a,...c}=b;this._settings=Object.keys(c).length?e(c):void 0,this._functions=a,this._functions&&(d(Object.keys(this._functions).every(a=>"string"==typeof a),"Functions keys must be strings"),d(Object.values(this._functions).every(a=>"function"==typeof a),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;let a=k.encode(this.source),b=k.split(a),c=!1,d=[],e=b.shift();for(let a of(e&&d.push(e),b)){let b="{"!==a[0],e=b?"}":"}}",f=a.indexOf(e);if(-1===f||"{"===a[1]){d.push(`{${k.decode(a)}`);continue}let g=a.slice(+!b,f),h=":"===g[0];h&&(g=g.slice(1));let i=this._ref(k.decode(g),{raw:b,wrapped:h});d.push(i),"string"!=typeof i&&(c=!0);let j=a.slice(f+e.length);j&&d.push(k.decode(j))}c?this._template=d:this.rendered=d.join("")}static date(a,b){return k.dateFormat[b.dateFormat].call(a)}describe(a={}){if(!this._settings&&a.compact)return this.source;let b={template:this.source};return this._settings&&(b.options=this._settings),this._functions&&(b.functions=this._functions),b}static build(a){return new k.Template(a.template,a.options||a.functions?{...a.options,functions:a.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(a){return!!a&&!!a[h.symbols.template]}refs(){if(!this._template)return;let a=[];for(let b of this._template)"string"!=typeof b&&a.push(...b.refs);return a}resolve(a,b,c,d){return this._template&&1===this._template.length?this._part(this._template[0],a,b,c,d,{}):this.render(a,b,c,d)}_part(a,...b){return a.ref?a.ref.resolve(...b):a.formula.evaluate(b)}render(a,b,c,d,e={}){if(!this.isDynamic())return this.rendered;let g=[];for(let h of this._template)if("string"==typeof h)g.push(h);else{let i=this._part(h,a,b,c,d,e),j=k.stringify(i,a,b,c,d,e);if(void 0!==j){let a=h.raw||!1===(e.errors&&e.errors.escapeHtml)?j:f(j);g.push(k.wrap(a,h.wrapped&&c.errors.wrap.label))}}return g.join("")}_ref(a,{raw:b,wrapped:c}){let d=[],e=a=>{let b=j.create(a,this._settings);return d.push(b),a=>{let c=b.resolve(...a);return void 0!==c?c:null}};try{let b=this._functions?{...k.functions,...this._functions}:k.functions;var f=new g.Parser(a,{reference:e,functions:b,constants:k.constants})}catch(b){throw b.message=`Invalid template variable "${a}" fails due to: ${b.message}`,b}if(f.single){if("reference"===f.single.type){let a=d[0];return{ref:a,raw:b,refs:d,wrapped:c||"local"===a.type&&"label"===a.key}}return k.stringify(f.single.value)}return{formula:f,raw:b,refs:d}}toString(){return this.source}},k.Template.prototype[h.symbols.template]=!0,k.Template.prototype.isImmutable=!0,k.encode=function(a){return a.replace(/\\(\{+)/g,(a,b)=>k.opens.slice(0,b.length)).replace(/\\(\}+)/g,(a,b)=>k.closes.slice(0,b.length))},k.decode=function(a){return a.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},k.split=function(a){let b=[],c="";for(let d=0;d<a.length;++d){let e=a[d];if("{"===e){let e="";for(;d+1<a.length&&"{"===a[d+1];)e+="{",++d;b.push(c),c=e}else c+=e}return b.push(c),b},k.wrap=function(a,b){return b?1===b.length?`${b}${a}${b}`:`${b[0]}${a}${b[1]}`:a},k.stringify=function(a,b,c,d,e,f={}){let g=typeof a,h=d&&d.errors&&d.errors.wrap||{},i=!1;if(j.isRef(a)&&a.render&&(i=a.in,a=a.resolve(b,c,d,e,{in:a.in,...f})),null===a)return"null";if("string"===g)return k.wrap(a,f.arrayItems&&h.string);if("number"===g||"function"===g||"symbol"===g)return a.toString();if("object"!==g)return JSON.stringify(a);if(a instanceof Date)return k.Template.date(a,d);if(a instanceof Map){let b=[];for(let[c,d]of a.entries())b.push(`${c.toString()} -> ${d.toString()}`);a=b}if(!Array.isArray(a))return a.toString();let l=[];for(let g of a)l.push(k.stringify(g,b,c,d,e,{arrayItems:!0,...f}));return k.wrap(l.join(", "),!i&&h.array)},k.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},k.functions={if:(a,b,c)=>a?b:c,length:a=>"string"==typeof a?a.length:a&&"object"==typeof a?Array.isArray(a)?a.length:Object.keys(a).length:null,msg(a){let[b,c,d,e,f]=this,g=f.messages;if(!g)return"";let h=i.template(b,g[0],a,c,d)||i.template(b,g[1],a,c,d);return h?h.render(b,c,d,e,f):""},number:a=>"number"==typeof a?a:"string"==typeof a?parseFloat(a):"boolean"==typeof a?+!!a:a instanceof Date?a.getTime():null}},4946:(a,b,c)=>{"use strict";let d=c(375),e=c(1687),f=c(8068),g=c(8160),h=c(3292),i=c(6354),j=c(6133),k={};a.exports=f.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:j.toSibling}},args:(a,...b)=>1===b.length&&Array.isArray(b[0])?a.try(...b[0]):a.try(...b),validate(a,b){let{schema:c,error:d,state:f,prefs:g}=b;if(c._flags.match){let b=[],h=[];for(let d=0;d<c.$_terms.matches.length;++d){let e=c.$_terms.matches[d],i=f.nest(e.schema,`match.${d}`);i.snapshot();let j=e.schema.$_validate(a,i,g);j.errors?(h.push(j.errors),i.restore()):(b.push(j.value),i.commit())}if(0===b.length)return{errors:d("alternatives.any",{details:h.map(a=>i.details(a,{override:!1}))})};if("one"===c._flags.match)return 1===b.length?{value:b[0]}:{errors:d("alternatives.one")};if(b.length!==c.$_terms.matches.length)return{errors:d("alternatives.all",{details:h.map(a=>i.details(a,{override:!1}))})};let j=a=>a.$_terms.matches.some(a=>"object"===a.schema.type||"alternatives"===a.schema.type&&j(a.schema));return j(c)?{value:b.reduce((a,b)=>e(a,b,{mergeArrays:!1}))}:{value:b[b.length-1]}}let h=[];for(let b=0;b<c.$_terms.matches.length;++b){let d=c.$_terms.matches[b];if(d.schema){let c=f.nest(d.schema,`match.${b}`);c.snapshot();let e=d.schema.$_validate(a,c,g);if(!e.errors)return c.commit(),e;c.restore(),h.push({schema:d.schema,reports:e.errors});continue}let e=d.ref?d.ref.resolve(a,f,g):a,i=d.is?[d]:d.switch;for(let c=0;c<i.length;++c){let{is:h,then:j,otherwise:k}=i[c],l=`match.${b}${d.switch?"."+c:""}`;if(h.$_match(e,f.nest(h,`${l}.is`),g)){if(j)return j.$_validate(a,f.nest(j,`${l}.then`),g)}else if(k)return k.$_validate(a,f.nest(k,`${l}.otherwise`),g)}}return k.errors(h,b)},rules:{conditional:{method(a,b){d(!this._flags._endedSwitch,"Unreachable condition"),d(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),d(void 0===b.break,"Cannot use break option with alternatives conditional");let c=this.clone(),e=h.when(c,a,b);for(let a of e.is?[e]:e.switch)if(a.then&&a.otherwise){c.$_setFlag("_endedSwitch",!0,{clone:!1});break}return c.$_terms.matches.push(e),c.$_mutateRebuild()}},match:{method(a){if(d(["any","one","all"].includes(a),"Invalid alternatives match mode",a),"any"!==a)for(let b of this.$_terms.matches)d(b.schema,"Cannot combine match mode",a,"with conditional rules");return this.$_setFlag("match",a)}},try:{method(...a){d(a.length,"Missing alternative schemas"),g.verifyFlat(a,"try"),d(!this._flags._endedSwitch,"Unreachable condition");let b=this.clone();for(let c of a)b.$_terms.matches.push({schema:b.$_compile(c)});return b.$_mutateRebuild()}}},overrides:{label(a){return this.$_parent("label",a).$_modify({each:(b,c)=>"is"!==c.path[0]&&"string"!=typeof b._flags.label?b.label(a):void 0,ref:!1})}},rebuild(a){a.$_modify({each:b=>{g.isSchema(b)&&"array"===b.type&&a.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(a,b){if(b.matches)for(let c of b.matches){let{schema:b,ref:d,is:e,not:f,then:g,otherwise:h}=c;a=b?a.try(b):d?a.conditional(d,{is:e,then:g,not:f,otherwise:h,switch:c.switch}):a.conditional(e,{then:g,otherwise:h})}return a}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),k.errors=function(a,{error:b,state:c}){if(!a.length)return{errors:b("alternatives.any")};if(1===a.length)return{errors:a[0].reports};let d=new Set,e=[];for(let{reports:f,schema:g}of a){if(f.length>1)return k.unmatched(a,b);let h=f[0];if(h instanceof i.Report==0)return k.unmatched(a,b);if(h.state.path.length!==c.path.length){e.push({type:g.type,report:h});continue}if("any.only"===h.code){for(let a of h.local.valids)d.add(a);continue}let[j,l]=h.code.split(".");"base"!==l?e.push({type:g.type,report:h}):"object.base"===h.code?d.add(h.local.type):d.add(j)}return e.length?1===e.length?{errors:e[0].report}:k.unmatched(a,b):{errors:b("alternatives.types",{types:[...d]})}},k.unmatched=function(a,b){let c=[];for(let b of a)c.push(...b.reports);return{errors:b("alternatives.match",i.details(c,{override:!1}))}}},8068:(a,b,c)=>{"use strict";let d=c(375),e=c(7629),f=c(8160),g=c(6914);a.exports=e.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(a,b){return d("function"==typeof a,"Method must be a function"),d(void 0===b||b&&"string"==typeof b,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:a,description:b}})},validate(a,b,{method:c}){try{return c(a,b)}catch(a){return b.error("any.custom",{error:a})}},args:["method","description"],multi:!0},messages:{method(a){return this.prefs({messages:a})}},shared:{method(a){d(f.isSchema(a)&&a._flags.id,"Schema must be a schema with an id");let b=this.clone();return b.$_terms.shared=b.$_terms.shared||[],b.$_terms.shared.push(a),b.$_mutateRegister(a),b}},warning:{method(a,b){return d(a&&"string"==typeof a,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:a,local:b},warn:!0})},validate:(a,b,{code:c,local:d})=>b.error(c,d),args:["code","local"],multi:!0}},modifiers:{keep(a,b=!0){a.keep=b},message(a,b){a.message=g.compile(b)},warn(a,b=!0){a.warn=b}},manifest:{build(a,b){for(let c in b){let d=b[c];if(["examples","externals","metas","notes","tags"].includes(c))for(let b of d)a=a[c.slice(0,-1)](b);else if("alterations"!==c)if("whens"!==c){if("shared"===c)for(let b of d)a=a.shared(b)}else for(let b of d){let{ref:c,is:d,not:e,then:f,otherwise:g,concat:h}=b;a=h?a.concat(h):c?a.when(c,{is:d,not:e,then:f,otherwise:g,switch:b.switch,break:b.break}):a.when(d,{then:f,otherwise:g,break:b.break})}else{let b={};for(let{target:a,adjuster:c}of d)b[a]=c;a=a.alter(b)}}return a}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(a,b,c)=>{"use strict";let d=c(375),e=c(9474),f=c(9621),g=c(8068),h=c(8160),i=c(3292),j={};a.exports=g.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(a,{schema:b,state:c,prefs:d}){if(!Array.isArray(a))return;let e=b.$_getRule("sort");return e?j.sort(b,a,e.args.options,c,d):void 0}},validate(a,{schema:b,error:c}){if(!Array.isArray(a)){if(b._flags.single){let b=[a];return b[h.symbols.arraySingle]=!0,{value:b}}return{errors:c("array.base")}}if(b.$_getRule("items")||b.$_terms.externals)return{value:a.slice()}},rules:{has:{method(a){a=this.$_compile(a,{appendPath:!0});let b=this.$_addRule({name:"has",args:{schema:a}});return b.$_mutateRegister(a),b},validate(a,{state:b,prefs:c,error:d},{schema:e}){let f=[a,...b.ancestors];for(let d=0;d<a.length;++d){let g=b.localize([...b.path,d],f,e);if(e.$_match(a[d],g,c))return a}let g=e._flags.label;return g?d("array.hasKnown",{patternLabel:g}):d("array.hasUnknown",null)},multi:!0},items:{method(...a){h.verifyFlat(a,"items");let b=this.$_addRule("items");for(let c=0;c<a.length;++c){let d=h.tryWithPath(()=>this.$_compile(a[c]),c,{append:!0});b.$_terms.items.push(d)}return b.$_mutateRebuild()},validate(a,{schema:b,error:c,state:d,prefs:e,errorsArray:f}){let g=b.$_terms._requireds.slice(),i=b.$_terms.ordered.slice(),k=[...b.$_terms._inclusions,...g],l=!a[h.symbols.arraySingle];delete a[h.symbols.arraySingle];let m=f(),n=a.length;for(let f=0;f<n;++f){let h=a[f],o=!1,p=!1,q=l?f:new Number(f),r=[...d.path,q];if(!b._flags.sparse&&void 0===h){if(m.push(c("array.sparse",{key:q,path:r,pos:f,value:void 0},d.localize(r))),e.abortEarly)return m;i.shift();continue}let s=[a,...d.ancestors];for(let a of b.$_terms._exclusions)if(a.$_match(h,d.localize(r,s,a),e,{presence:"ignore"})){if(m.push(c("array.excludes",{pos:f,value:h},d.localize(r))),e.abortEarly)return m;o=!0,i.shift();break}if(o)continue;if(b.$_terms.ordered.length){if(i.length){let g=i.shift(),k=g.$_validate(h,d.localize(r,s,g),e);if(k.errors){if(m.push(...k.errors),e.abortEarly)return m}else if("strip"===g._flags.result)j.fastSplice(a,f),--f,--n;else{if(!b._flags.sparse&&void 0===k.value){if(m.push(c("array.sparse",{key:q,path:r,pos:f,value:void 0},d.localize(r))),e.abortEarly)return m;continue}a[f]=k.value}continue}if(!b.$_terms.items.length){if(m.push(c("array.orderedLength",{pos:f,limit:b.$_terms.ordered.length})),e.abortEarly)return m;break}}let t=[],u=g.length;for(let i=0;i<u;++i){let k=d.localize(r,s,g[i]);k.snapshot();let l=g[i].$_validate(h,k,e);if(t[i]=l,!l.errors){if(k.commit(),a[f]=l.value,p=!0,j.fastSplice(g,i),--i,--u,!b._flags.sparse&&void 0===l.value&&(m.push(c("array.sparse",{key:q,path:r,pos:f,value:void 0},d.localize(r))),e.abortEarly))return m;break}k.restore()}if(p)continue;let v=e.stripUnknown&&!!e.stripUnknown.arrays||!1;for(let i of(u=k.length,k)){let k,l=g.indexOf(i);if(-1!==l)k=t[l];else{let g=d.localize(r,s,i);if(g.snapshot(),!(k=i.$_validate(h,g,e)).errors){g.commit(),"strip"===i._flags.result?(j.fastSplice(a,f),--f,--n):b._flags.sparse||void 0!==k.value?a[f]=k.value:(m.push(c("array.sparse",{key:q,path:r,pos:f,value:void 0},d.localize(r))),o=!0),p=!0;break}g.restore()}if(1===u){if(v){j.fastSplice(a,f),--f,--n,p=!0;break}if(m.push(...k.errors),e.abortEarly)return m;o=!0;break}}if(!o&&(b.$_terms._inclusions.length||b.$_terms._requireds.length)&&!p){if(v){j.fastSplice(a,f),--f,--n;continue}if(m.push(c("array.includes",{pos:f,value:h},d.localize(r))),e.abortEarly)return m}}return g.length&&j.fillMissedErrors(b,m,g,a,d,e),i.length&&(j.fillOrderedErrors(b,m,i,a,d,e),m.length||j.fillDefault(i,a,d,e)),m.length?m:a},priority:!0,manifest:!1},length:{method(a){return this.$_addRule({name:"length",args:{limit:a},operator:"="})},validate:(a,b,{limit:c},{name:d,operator:e,args:f})=>h.compare(a.length,c,e)?a:b.error("array."+d,{limit:f.limit,value:a}),args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(a){return this.$_addRule({name:"max",method:"length",args:{limit:a},operator:"<="})}},min:{method(a){return this.$_addRule({name:"min",method:"length",args:{limit:a},operator:">="})}},ordered:{method(...a){h.verifyFlat(a,"ordered");let b=this.$_addRule("items");for(let c=0;c<a.length;++c){let d=h.tryWithPath(()=>this.$_compile(a[c]),c,{append:!0});j.validateSingle(d,b),b.$_mutateRegister(d),b.$_terms.ordered.push(d)}return b.$_mutateRebuild()}},single:{method(a){let b=void 0===a||!!a;return d(!b||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",b)}},sort:{method(a={}){h.assertOptions(a,["by","order"]);let b={order:a.order||"ascending"};return a.by&&(b.by=i.ref(a.by,{ancestor:0}),d(!b.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:b}})},validate(a,{error:b,state:c,prefs:d,schema:e},{options:f}){let{value:g,errors:h}=j.sort(e,a,f,c,d);if(h)return h;for(let c=0;c<a.length;++c)if(a[c]!==g[c])return b("array.sort",{order:f.order,by:f.by?f.by.key:"value"});return a},convert:!0},sparse:{method(a){let b=void 0===a||!!a;return this._flags.sparse===b?this:(b?this.clone():this.$_addRule("items")).$_setFlag("sparse",b,{clone:!1})}},unique:{method(a,b={}){d(!a||"function"==typeof a||"string"==typeof a,"comparator must be a function or a string"),h.assertOptions(b,["ignoreUndefined","separator"]);let c={name:"unique",args:{options:b,comparator:a}};if(a)if("string"==typeof a){let d=h.default(b.separator,".");c.path=d?a.split(d):[a]}else c.comparator=a;return this.$_addRule(c)},validate(a,{state:b,error:c,schema:g},{comparator:h,options:i},{comparator:j,path:k}){let l={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},m=j||e,n=i.ignoreUndefined;for(let e=0;e<a.length;++e){let g=k?f(a[e],k):a[e],i=j?l.custom:l[typeof g];if(d(i,"Failed to find unique map container for type",typeof g),i instanceof Map){let d,f=i.entries();for(;!(d=f.next()).done;)if(m(d.value[0],g)){let f=b.localize([...b.path,e],[a,...b.ancestors]),g={pos:e,value:a[e],dupePos:d.value[1],dupeValue:a[d.value[1]]};return k&&(g.path=h),c("array.unique",g,f)}i.set(g,e)}else{if((!n||void 0!==g)&&void 0!==i[g]){let d={pos:e,value:a[e],dupePos:i[g],dupeValue:a[i[g]]};return k&&(d.path=h),c("array.unique",d,b.localize([...b.path,e],[a,...b.ancestors]))}i[g]=e}}return a},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(a,b)=>new Set(a)}},rebuild(a){for(let b of(a.$_terms._inclusions=[],a.$_terms._exclusions=[],a.$_terms._requireds=[],a.$_terms.items))j.validateSingle(b,a),"required"===b._flags.presence?a.$_terms._requireds.push(b):"forbidden"===b._flags.presence?a.$_terms._exclusions.push(b):a.$_terms._inclusions.push(b);for(let b of a.$_terms.ordered)j.validateSingle(b,a)},manifest:{build:(a,b)=>(b.items&&(a=a.items(...b.items)),b.ordered&&(a=a.ordered(...b.ordered)),a)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),j.fillMissedErrors=function(a,b,c,d,e,f){let g=[],h=0;for(let a of c){let b=a._flags.label;b?g.push(b):++h}g.length?h?b.push(a.$_createError("array.includesRequiredBoth",d,{knownMisses:g,unknownMisses:h},e,f)):b.push(a.$_createError("array.includesRequiredKnowns",d,{knownMisses:g},e,f)):b.push(a.$_createError("array.includesRequiredUnknowns",d,{unknownMisses:h},e,f))},j.fillOrderedErrors=function(a,b,c,d,e,f){let g=[];for(let a of c)"required"===a._flags.presence&&g.push(a);g.length&&j.fillMissedErrors(a,b,g,d,e,f)},j.fillDefault=function(a,b,c,d){let e=[],f=!0;for(let g=a.length-1;g>=0;--g){let h=a[g],i=[b,...c.ancestors],j=h.$_validate(void 0,c.localize(c.path,i,h),d).value;if(f){if(void 0===j)continue;f=!1}e.unshift(j)}e.length&&b.push(...e)},j.fastSplice=function(a,b){let c=b;for(;c<a.length;)a[c++]=a[c];--a.length},j.validateSingle=function(a,b){("array"===a.type||a._flags._arrayItems)&&(d(!b._flags.single,"Cannot specify array item with single rule enabled"),b.$_setFlag("_arrayItems",!0,{clone:!1}))},j.sort=function(a,b,c,d,e){let f="ascending"===c.order?1:-1,g=-1*f;try{return{value:b.slice().sort((h,i)=>{let k=j.compare(h,i,g,f);if(null!==k||(c.by&&(h=c.by.resolve(h,d,e),i=c.by.resolve(i,d,e)),null!==(k=j.compare(h,i,g,f))))return k;let l=typeof h;if(l!==typeof i)throw a.$_createError("array.sort.mismatching",b,null,d,e);if("number"!==l&&"string"!==l)throw a.$_createError("array.sort.unsupported",b,{type:l},d,e);return"number"===l?(h-i)*f:h<i?g:f})}}catch(a){return{errors:a}}},j.compare=function(a,b,c,d){return a===b?0:void 0===a?1:void 0===b?-1:null===a?d:null===b?c:null}},4937:(a,b,c)=>{"use strict";let d=c(375),e=c(8068),f=c(8160),g=c(2036),h={isBool:function(a){return"boolean"==typeof a}};a.exports=e.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(a,{schema:b}){if("boolean"!=typeof a){if("string"==typeof a){let c=b._flags.sensitive?a:a.toLowerCase();a="true"===c||"false"!==c&&a}return"boolean"!=typeof a&&(a=b.$_terms.truthy&&b.$_terms.truthy.has(a,null,null,!b._flags.sensitive)||(!b.$_terms.falsy||!b.$_terms.falsy.has(a,null,null,!b._flags.sensitive))&&a),{value:a}}},validate(a,{error:b}){if("boolean"!=typeof a)return{value:a,errors:b("boolean.base")}},rules:{truthy:{method(...a){f.verifyFlat(a,"truthy");let b=this.clone();b.$_terms.truthy=b.$_terms.truthy||new g;for(let c=0;c<a.length;++c){let e=a[c];d(void 0!==e,"Cannot call truthy with undefined"),b.$_terms.truthy.add(e)}return b}},falsy:{method(...a){f.verifyFlat(a,"falsy");let b=this.clone();b.$_terms.falsy=b.$_terms.falsy||new g;for(let c=0;c<a.length;++c){let e=a[c];d(void 0!==e,"Cannot call falsy with undefined"),b.$_terms.falsy.add(e)}return b}},sensitive:{method(a=!0){return this.$_setFlag("sensitive",a)}}},cast:{number:{from:h.isBool,to:(a,b)=>+!!a},string:{from:h.isBool,to:(a,b)=>a?"true":"false"}},manifest:{build:(a,b)=>(b.truthy&&(a=a.truthy(...b.truthy)),b.falsy&&(a=a.falsy(...b.falsy)),a)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(a,b,c)=>{"use strict";let d=c(375),e=c(8068),f=c(8160),g=c(3328),h={isDate:function(a){return a instanceof Date}};a.exports=e.extend({type:"date",coerce:{from:["number","string"],method:(a,{schema:b})=>({value:h.parse(a,b._flags.format)||a})},validate(a,{schema:b,error:c,prefs:d}){if(a instanceof Date&&!isNaN(a.getTime()))return;let e=b._flags.format;return d.convert&&e&&"string"==typeof a?{value:a,errors:c("date.format",{format:e})}:{value:a,errors:c("date.base")}},rules:{compare:{method:!1,validate(a,b,{date:c},{name:d,operator:e,args:g}){let h="now"===c?Date.now():c.getTime();return f.compare(a.getTime(),h,e)?a:b.error("date."+d,{limit:g.date,value:a})},args:[{name:"date",ref:!0,normalize:a=>"now"===a?a:h.parse(a),assert:a=>null!==a,message:"must have a valid date format"}]},format:{method(a){return d(["iso","javascript","unix"].includes(a),"Unknown date format",a),this.$_setFlag("format",a)}},greater:{method(a){return this.$_addRule({name:"greater",method:"compare",args:{date:a},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(a){return this.$_addRule({name:"less",method:"compare",args:{date:a},operator:"<"})}},max:{method(a){return this.$_addRule({name:"max",method:"compare",args:{date:a},operator:"<="})}},min:{method(a){return this.$_addRule({name:"min",method:"compare",args:{date:a},operator:">="})}},timestamp:{method(a="javascript"){return d(["javascript","unix"].includes(a),'"type" must be one of "javascript, unix"'),this.format(a)}}},cast:{number:{from:h.isDate,to:(a,b)=>a.getTime()},string:{from:h.isDate,to:(a,{prefs:b})=>g.date(a,b)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(a,b){if(a instanceof Date)return a;if("string"!=typeof a&&(isNaN(a)||!isFinite(a))||/^\s*$/.test(a))return null;if("iso"===b)return f.isIsoDate(a)?h.date(a.toString()):null;let c=a;if("string"==typeof a&&/^[+-]?\d+(\.\d+)?$/.test(a)&&(a=parseFloat(a)),b){if("javascript"===b)return h.date(+a);if("unix"===b)return h.date(1e3*a);if("string"==typeof c)return null}return h.date(a)},h.date=function(a){let b=new Date(a);return isNaN(b.getTime())?null:b}},390:(a,b,c)=>{"use strict";let d=c(375);a.exports=c(7824).extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(a){return d(Number.isSafeInteger(a)&&a>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:a}})},validate:(a,b,{n:c})=>a.length===c?a:b.error("function.arity",{n:c})},class:{method(){return this.$_addRule("class")},validate:(a,b)=>/^\s*class\s/.test(a.toString())?a:b.error("function.class",{value:a})},minArity:{method(a){return d(Number.isSafeInteger(a)&&a>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:a}})},validate:(a,b,{n:c})=>a.length>=c?a:b.error("function.minArity",{n:c})},maxArity:{method(a){return d(Number.isSafeInteger(a)&&a>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:a}})},validate:(a,b,{n:c})=>a.length<=c?a:b.error("function.maxArity",{n:c})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(a,b,c)=>{"use strict";let d=c(978),e=c(375),f=c(8571),g=c(3652),h=c(8068),i=c(8160),j=c(3292),k=c(6354),l=c(6133),m=c(3328),n={renameDefaults:{alias:!1,multiple:!1,override:!1}};a.exports=h.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(a,b)=>a.keys(b),validate(a,{schema:b,error:c,state:d,prefs:e}){if(!a||typeof a!==b.$_property("typeof")||Array.isArray(a))return{value:a,errors:c("object.base",{type:b.$_property("typeof")})};if(!(b.$_terms.renames||b.$_terms.dependencies||b.$_terms.keys||b.$_terms.patterns||b.$_terms.externals))return;a=n.clone(a,e);let f=[];if(b.$_terms.renames&&!n.rename(b,a,d,e,f)||!b.$_terms.keys&&!b.$_terms.patterns&&!b.$_terms.dependencies)return{value:a,errors:f};let g=new Set(Object.keys(a));if(b.$_terms.keys){let c=[a,...d.ancestors];for(let h of b.$_terms.keys){let b=h.key,i=a[b];g.delete(b);let j=d.localize([...d.path,b],c,h),k=h.schema.$_validate(i,j,e);if(k.errors){if(e.abortEarly)return{value:a,errors:k.errors};void 0!==k.value&&(a[b]=k.value),f.push(...k.errors)}else"strip"===h.schema._flags.result||void 0===k.value&&void 0!==i?delete a[b]:void 0!==k.value&&(a[b]=k.value)}}if(g.size||b._flags._hasPatternMatch){let c=n.unknown(b,a,g,f,d,e);if(c)return c}if(b.$_terms.dependencies)for(let c of b.$_terms.dependencies){if(null!==c.key&&!1===n.isPresent(c.options)(c.key.resolve(a,d,e,null,{shadow:!1})))continue;let g=n.dependencies[c.rel](b,c,a,d,e);if(g){let c=b.$_createError(g.code,a,g.context,d,e);if(e.abortEarly)return{value:a,errors:c};f.push(c)}}return{value:a,errors:f}},rules:{and:{method(...a){return i.verifyFlat(a,"and"),n.dependency(this,"and",null,a)}},append:{method(a){return null==a||0===Object.keys(a).length?this:this.keys(a)}},assert:{method(a,b,c){m.isTemplate(a)||(a=j.ref(a)),e(void 0===c||"string"==typeof c,"Message must be a string"),b=this.$_compile(b,{appendPath:!0});let d=this.$_addRule({name:"assert",args:{subject:a,schema:b,message:c}});return d.$_mutateRegister(a),d.$_mutateRegister(b),d},validate(a,{error:b,prefs:c,state:d},{subject:e,schema:f,message:g}){let h=e.resolve(a,d,c),i=l.isRef(e)?e.absolute(d):[];return f.$_match(h,d.localize(i,[a,...d.ancestors],f),c)?a:b("object.assert",{subject:e,message:g})},args:["subject","schema","message"],multi:!0},instance:{method(a,b){return e("function"==typeof a,"constructor must be a function"),b=b||a.name,this.$_addRule({name:"instance",args:{constructor:a,name:b}})},validate:(a,b,{constructor:c,name:d})=>a instanceof c?a:b.error("object.instance",{type:d,value:a}),args:["constructor","name"]},keys:{method(a){e(void 0===a||"object"==typeof a,"Object schema must be a valid object"),e(!i.isSchema(a),"Object schema cannot be a joi schema");let b=this.clone();if(a)if(Object.keys(a).length)for(let c in b.$_terms.keys=b.$_terms.keys?b.$_terms.keys.filter(b=>!a.hasOwnProperty(b.key)):new n.Keys,a)i.tryWithPath(()=>b.$_terms.keys.push({key:c,schema:this.$_compile(a[c])}),c);else b.$_terms.keys=new n.Keys;else b.$_terms.keys=null;return b.$_mutateRebuild()}},length:{method(a){return this.$_addRule({name:"length",args:{limit:a},operator:"="})},validate:(a,b,{limit:c},{name:d,operator:e,args:f})=>i.compare(Object.keys(a).length,c,e)?a:b.error("object."+d,{limit:f.limit,value:a}),args:[{name:"limit",ref:!0,assert:i.limit,message:"must be a positive integer"}]},max:{method(a){return this.$_addRule({name:"max",method:"length",args:{limit:a},operator:"<="})}},min:{method(a){return this.$_addRule({name:"min",method:"length",args:{limit:a},operator:">="})}},nand:{method(...a){return i.verifyFlat(a,"nand"),n.dependency(this,"nand",null,a)}},or:{method(...a){return i.verifyFlat(a,"or"),n.dependency(this,"or",null,a)}},oxor:{method(...a){return n.dependency(this,"oxor",null,a)}},pattern:{method(a,b,c={}){let d=a instanceof RegExp;d||(a=this.$_compile(a,{appendPath:!0})),e(void 0!==b,"Invalid rule"),i.assertOptions(c,["fallthrough","matches"]),d&&e(!a.flags.includes("g")&&!a.flags.includes("y"),"pattern should not use global or sticky mode"),b=this.$_compile(b,{appendPath:!0});let f=this.clone();f.$_terms.patterns=f.$_terms.patterns||[];let g={[d?"regex":"schema"]:a,rule:b};return c.matches&&(g.matches=this.$_compile(c.matches),"array"!==g.matches.type&&(g.matches=g.matches.$_root.array().items(g.matches)),f.$_mutateRegister(g.matches),f.$_setFlag("_hasPatternMatch",!0,{clone:!1})),c.fallthrough&&(g.fallthrough=!0),f.$_terms.patterns.push(g),f.$_mutateRegister(b),f}},ref:{method(){return this.$_addRule("ref")},validate:(a,b)=>l.isRef(a)?a:b.error("object.refType",{value:a})},regex:{method(){return this.$_addRule("regex")},validate:(a,b)=>a instanceof RegExp?a:b.error("object.regex",{value:a})},rename:{method(a,b,c={}){e("string"==typeof a||a instanceof RegExp,"Rename missing the from argument"),e("string"==typeof b||b instanceof m,"Invalid rename to argument"),e(b!==a,"Cannot rename key to same name:",a),i.assertOptions(c,["alias","ignoreUndefined","override","multiple"]);let f=this.clone();for(let b of(f.$_terms.renames=f.$_terms.renames||[],f.$_terms.renames))e(b.from!==a,"Cannot rename the same key multiple times");return b instanceof m&&f.$_mutateRegister(b),f.$_terms.renames.push({from:a,to:b,options:d(n.renameDefaults,c)}),f}},schema:{method(a="any"){return this.$_addRule({name:"schema",args:{type:a}})},validate:(a,b,{type:c})=>i.isSchema(a)&&("any"===c||a.type===c)?a:b.error("object.schema",{type:c})},unknown:{method(a){return this.$_setFlag("unknown",!1!==a)}},with:{method(a,b,c={}){return n.dependency(this,"with",a,b,c)}},without:{method(a,b,c={}){return n.dependency(this,"without",a,b,c)}},xor:{method(...a){return i.verifyFlat(a,"xor"),n.dependency(this,"xor",null,a)}}},overrides:{default(a,b){return void 0===a&&(a=i.symbols.deepDefault),this.$_parent("default",a,b)}},rebuild(a){if(a.$_terms.keys){let b=new g.Sorter;for(let c of a.$_terms.keys)i.tryWithPath(()=>b.add(c,{after:c.schema.$_rootReferences(),group:c.key}),c.key);a.$_terms.keys=new n.Keys(...b.nodes)}},manifest:{build(a,b){if(b.keys&&(a=a.keys(b.keys)),b.dependencies)for(let{rel:c,key:d=null,peers:e,options:f}of b.dependencies)a=n.dependency(a,c,d,e,f);if(b.patterns)for(let{regex:c,schema:d,rule:e,fallthrough:f,matches:g}of b.patterns)a=a.pattern(c||d,e,{fallthrough:f,matches:g});if(b.renames)for(let{from:c,to:d,options:e}of b.renames)a=a.rename(c,d,e);return a}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),n.clone=function(a,b){if("object"==typeof a){if(b.nonEnumerables)return f(a,{shallow:!0});let c=Object.create(Object.getPrototypeOf(a));return Object.assign(c,a),c}let c=function(...b){return a.apply(this,b)};return c.prototype=f(a.prototype),Object.defineProperty(c,"name",{value:a.name,writable:!1}),Object.defineProperty(c,"length",{value:a.length,writable:!1}),Object.assign(c,a),c},n.dependency=function(a,b,c,d,f){e(null===c||"string"==typeof c,b,"key must be a strings"),f||(f=d.length>1&&"object"==typeof d[d.length-1]?d.pop():{}),i.assertOptions(f,["separator","isPresent"]),d=[].concat(d);let g=i.default(f.separator,"."),h=[];for(let a of d)e("string"==typeof a,b,"peers must be strings"),h.push(j.ref(a,{separator:g,ancestor:0,prefix:!1}));null!==c&&(c=j.ref(c,{separator:g,ancestor:0,prefix:!1}));let k=a.clone();return k.$_terms.dependencies=k.$_terms.dependencies||[],k.$_terms.dependencies.push(new n.Dependency(b,c,h,d,f)),k},n.dependencies={and(a,b,c,d,e){let f=[],g=[],h=b.peers.length,i=n.isPresent(b.options);for(let a of b.peers)!1===i(a.resolve(c,d,e,null,{shadow:!1}))?f.push(a.key):g.push(a.key);if(f.length!==h&&g.length!==h)return{code:"object.and",context:{present:g,presentWithLabels:n.keysToLabels(a,g),missing:f,missingWithLabels:n.keysToLabels(a,f)}}},nand(a,b,c,d,e){let f=[],g=n.isPresent(b.options);for(let a of b.peers)g(a.resolve(c,d,e,null,{shadow:!1}))&&f.push(a.key);if(f.length!==b.peers.length)return;let h=b.paths[0],i=b.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:n.keysToLabels(a,h),peers:i,peersWithLabels:n.keysToLabels(a,i)}}},or(a,b,c,d,e){let f=n.isPresent(b.options);for(let a of b.peers)if(f(a.resolve(c,d,e,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:b.paths,peersWithLabels:n.keysToLabels(a,b.paths)}}},oxor(a,b,c,d,e){let f=[],g=n.isPresent(b.options);for(let a of b.peers)g(a.resolve(c,d,e,null,{shadow:!1}))&&f.push(a.key);if(!f.length||1===f.length)return;let h={peers:b.paths,peersWithLabels:n.keysToLabels(a,b.paths)};return h.present=f,h.presentWithLabels=n.keysToLabels(a,f),{code:"object.oxor",context:h}},with(a,b,c,d,e){let f=n.isPresent(b.options);for(let g of b.peers)if(!1===f(g.resolve(c,d,e,null,{shadow:!1})))return{code:"object.with",context:{main:b.key.key,mainWithLabel:n.keysToLabels(a,b.key.key),peer:g.key,peerWithLabel:n.keysToLabels(a,g.key)}}},without(a,b,c,d,e){let f=n.isPresent(b.options);for(let g of b.peers)if(f(g.resolve(c,d,e,null,{shadow:!1})))return{code:"object.without",context:{main:b.key.key,mainWithLabel:n.keysToLabels(a,b.key.key),peer:g.key,peerWithLabel:n.keysToLabels(a,g.key)}}},xor(a,b,c,d,e){let f=[],g=n.isPresent(b.options);for(let a of b.peers)g(a.resolve(c,d,e,null,{shadow:!1}))&&f.push(a.key);if(1===f.length)return;let h={peers:b.paths,peersWithLabels:n.keysToLabels(a,b.paths)};return 0===f.length?{code:"object.missing",context:h}:(h.present=f,h.presentWithLabels=n.keysToLabels(a,f),{code:"object.xor",context:h})}},n.keysToLabels=function(a,b){return Array.isArray(b)?b.map(b=>a.$_mapLabels(b)):a.$_mapLabels(b)},n.isPresent=function(a){return"function"==typeof a.isPresent?a.isPresent:a=>void 0!==a},n.rename=function(a,b,c,d,e){let f={};for(let g of a.$_terms.renames){let h=[],i="string"!=typeof g.from;if(i)for(let a in b){if(void 0===b[a]&&g.options.ignoreUndefined||a===g.to)continue;let c=g.from.exec(a);c&&h.push({from:a,to:g.to,match:c})}else!Object.prototype.hasOwnProperty.call(b,g.from)||void 0===b[g.from]&&g.options.ignoreUndefined||h.push(g);for(let j of h){let h=j.from,k=j.to;if(k instanceof m&&(k=k.render(b,c,d,j.match)),h!==k){if(!g.options.multiple&&f[k]&&(e.push(a.$_createError("object.rename.multiple",b,{from:h,to:k,pattern:i},c,d)),d.abortEarly)||Object.prototype.hasOwnProperty.call(b,k)&&!g.options.override&&!f[k]&&(e.push(a.$_createError("object.rename.override",b,{from:h,to:k,pattern:i},c,d)),d.abortEarly))return!1;void 0===b[h]?delete b[k]:b[k]=b[h],f[k]=!0,g.options.alias||delete b[h]}}}return!0},n.unknown=function(a,b,c,d,e,f){if(a.$_terms.patterns){let g=!1,h=a.$_terms.patterns.map(a=>{if(a.matches)return g=!0,[]}),i=[b,...e.ancestors];for(let g of c){let j=b[g],k=[...e.path,g];for(let l=0;l<a.$_terms.patterns.length;++l){let m=a.$_terms.patterns[l];if(m.regex){let a=m.regex.test(g);if(e.mainstay.tracer.debug(e,"rule",`pattern.${l}`,a?"pass":"error"),!a)continue}else if(!m.schema.$_match(g,e.nest(m.schema,`pattern.${l}`),f))continue;c.delete(g);let n=e.localize(k,i,{schema:m.rule,key:g}),o=m.rule.$_validate(j,n,f);if(o.errors){if(f.abortEarly)return{value:b,errors:o.errors};d.push(...o.errors)}if(m.matches&&h[l].push(g),b[g]=o.value,!m.fallthrough)break}}if(g)for(let c=0;c<h.length;++c){let g=h[c];if(!g)continue;let j=a.$_terms.patterns[c].matches,l=e.localize(e.path,i,j),m=j.$_validate(g,l,f);if(m.errors){let c=k.details(m.errors,{override:!1});c.matches=g;let h=a.$_createError("object.pattern.match",b,c,e,f);if(f.abortEarly)return{value:b,errors:h};d.push(h)}}}if(c.size&&(a.$_terms.keys||a.$_terms.patterns)){if(f.stripUnknown&&void 0===a._flags.unknown||f.skipFunctions){let a=!(!f.stripUnknown||!0!==f.stripUnknown&&!f.stripUnknown.objects);for(let d of c)a?(delete b[d],c.delete(d)):"function"==typeof b[d]&&c.delete(d)}if(!i.default(a._flags.unknown,f.allowUnknown))for(let g of c){let c=e.localize([...e.path,g],[]),h=a.$_createError("object.unknown",b[g],{child:g},c,f,{flags:!1});if(f.abortEarly)return{value:b,errors:h};d.push(h)}}},n.Dependency=class{constructor(a,b,c,d,e){this.rel=a,this.key=b,this.peers=c,this.paths=d,this.options=e}describe(){let a={rel:this.rel,peers:this.paths};return null!==this.key&&(a.key=this.key.key),"."!==this.peers[0].separator&&(a.options={...a.options,separator:this.peers[0].separator}),this.options.isPresent&&(a.options={...a.options,isPresent:this.options.isPresent}),a}},n.Keys=class extends Array{concat(a){let b=this.slice(),c=new Map;for(let a=0;a<b.length;++a)c.set(b[a].key,a);for(let d of a){let a=d.key,e=c.get(a);void 0!==e?b[e]={key:a,schema:b[e].schema.concat(d.schema)}:b.push(d)}return b}}},8785:(a,b,c)=>{"use strict";let d=c(375),e=c(8068),f=c(8160),g=c(3292),h=c(6354),i={};a.exports=e.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(a,b)=>a.ref(b),validate(a,{schema:b,state:c,prefs:e}){d(b.$_terms.link,"Uninitialized link schema");let f=i.generate(b,a,c,e),g=b.$_terms.link[0].ref;return f.$_validate(a,c.nest(f,`link:${g.display}:${f.type}`),e)},generate:(a,b,c,d)=>i.generate(a,b,c,d),rules:{ref:{method(a){d(!this.$_terms.link,"Cannot reinitialize schema"),d("value"===(a=g.ref(a)).type||"local"===a.type,"Invalid reference type:",a.type),d("local"===a.type||"root"===a.ancestor||a.ancestor>0,"Link cannot reference itself");let b=this.clone();return b.$_terms.link=[{ref:a}],b}},relative:{method(a=!0){return this.$_setFlag("relative",a)}}},overrides:{concat(a){d(this.$_terms.link,"Uninitialized link schema"),d(f.isSchema(a),"Invalid schema object"),d("link"!==a.type,"Cannot merge type link with another link");let b=this.clone();return b.$_terms.whens||(b.$_terms.whens=[]),b.$_terms.whens.push({concat:a}),b.$_mutateRebuild()}},manifest:{build:(a,b)=>(d(b.link,"Invalid link description missing link"),a.ref(b.link))}}),i.generate=function(a,b,c,d){let e=c.mainstay.links.get(a);if(e)return e._generate(b,c,d).schema;let f=a.$_terms.link[0].ref,{perspective:g,path:h}=i.perspective(f,c);i.assert(g,"which is outside of schema boundaries",f,a,c,d);try{e=h.length?g.$_reach(h):g}catch(b){i.assert(!1,"to non-existing schema",f,a,c,d)}return i.assert("link"!==e.type,"which is another link",f,a,c,d),a._flags.relative||c.mainstay.links.set(a,e),e._generate(b,c,d).schema},i.perspective=function(a,b){if("local"===a.type){for(let{schema:c,key:d}of b.schemas){if((c._flags.id||d)===a.path[0])return{perspective:c,path:a.path.slice(1)};if(c.$_terms.shared){for(let b of c.$_terms.shared)if(b._flags.id===a.path[0])return{perspective:b,path:a.path.slice(1)}}}return{perspective:null,path:null}}return"root"===a.ancestor?{perspective:b.schemas[b.schemas.length-1].schema,path:a.path}:{perspective:b.schemas[a.ancestor]&&b.schemas[a.ancestor].schema,path:a.path}},i.assert=function(a,b,c,e,f,g){a||d(!1,`"${h.label(e._flags,f,g)}" contains link reference "${c.display}" ${b}`)}},3832:(a,b,c)=>{"use strict";let d=c(375),e=c(8068),f=c(8160),g={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(a){let b=a.toString(),c=b.indexOf("."),d=b.indexOf("e");return(c<0?0:(d<0?b.length:d)-c-1)+(d<0?0:Math.max(0,-parseInt(b.slice(d+1))))}};a.exports=e.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(a,{schema:b,error:c}){if(!a.match(g.numberRx))return;let d={value:parseFloat(a=a.trim())};if(0===d.value&&(d.value=0),!b._flags.unsafe)if(a.match(/e/i)){if(g.extractSignificantDigits(a)!==g.extractSignificantDigits(String(d.value)))return d.errors=c("number.unsafe"),d}else{let b=d.value.toString();if(b.match(/e/i))return d;if(b!==g.normalizeDecimal(a))return d.errors=c("number.unsafe"),d}return d}},validate(a,{schema:b,error:c,prefs:d}){if(a===1/0||a===-1/0)return{value:a,errors:c("number.infinity")};if(!f.isNumber(a))return{value:a,errors:c("number.base")};let e={value:a};if(d.convert){let a=b.$_getRule("precision");if(a){let b=Math.pow(10,a.args.limit);e.value=Math.round(e.value*b)/b}}return 0===e.value&&(e.value=0),!b._flags.unsafe&&(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)&&(e.errors=c("number.unsafe")),e},rules:{compare:{method:!1,validate:(a,b,{limit:c},{name:d,operator:e,args:g})=>f.compare(a,c,e)?a:b.error("number."+d,{limit:g.limit,value:a}),args:[{name:"limit",ref:!0,assert:f.isNumber,message:"must be a number"}]},greater:{method(a){return this.$_addRule({name:"greater",method:"compare",args:{limit:a},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(a,b)=>Math.trunc(a)-a==0?a:b.error("number.integer")},less:{method(a){return this.$_addRule({name:"less",method:"compare",args:{limit:a},operator:"<"})}},max:{method(a){return this.$_addRule({name:"max",method:"compare",args:{limit:a},operator:"<="})}},min:{method(a){return this.$_addRule({name:"min",method:"compare",args:{limit:a},operator:">="})}},multiple:{method(a){let b="number"==typeof a?g.decimalPlaces(a):null,c=Math.pow(10,b);return this.$_addRule({name:"multiple",args:{base:a,baseDecimalPlace:b,pfactor:c}})},validate:(a,b,{base:c,baseDecimalPlace:d,pfactor:e},f)=>g.decimalPlaces(a)>d?b.error("number.multiple",{multiple:f.args.base,value:a}):Math.round(e*a)%Math.round(e*c)==0?a:b.error("number.multiple",{multiple:f.args.base,value:a}),args:[{name:"base",ref:!0,assert:a=>"number"==typeof a&&isFinite(a)&&a>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(a,b)=>Number.isSafeInteger(a)&&a>=0&&a<=65535?a:b.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(a){return d(Number.isSafeInteger(a),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:a}})},validate(a,b,{limit:c}){let d=a.toString().match(g.precisionRx);return Math.max((d[1]?d[1].length:0)-(d[2]?parseInt(d[2],10):0),0)<=c?a:b.error("number.precision",{limit:c,value:a})},convert:!0},sign:{method(a){return d(["negative","positive"].includes(a),"Invalid sign",a),this.$_addRule({name:"sign",args:{sign:a}})},validate:(a,b,{sign:c})=>"negative"===c&&a<0||"positive"===c&&a>0?a:b.error(`number.${c}`)},unsafe:{method(a=!0){return d("boolean"==typeof a,"enabled must be a boolean"),this.$_setFlag("unsafe",a)}}},cast:{string:{from:a=>"number"==typeof a,to:(a,b)=>a.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),g.extractSignificantDigits=function(a){return a.replace(g.exponentialPartRegex,"").replace(g.dotRegex,"").replace(g.trailingZerosRegex,"").replace(g.leadingSignAndZerosRegex,"")},g.normalizeDecimal=function(a){return(a=a.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&a.endsWith("0")&&(a=a.replace(/0+$/,"")),"-0"===a?"0":a}},8966:(a,b,c)=>{"use strict";a.exports=c(7824).extend({type:"object",cast:{map:{from:a=>a&&"object"==typeof a,to:(a,b)=>new Map(Object.entries(a))}}})},7417:(a,b,c)=>{"use strict";let d=c(375),e=c(5380),f=c(1745),g=c(9959),h=c(6064),i=c(9926),j=c(5752),k=c(8068),l=c(8160),m={tlds:i instanceof Set&&{tlds:{allow:i,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:g.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};a.exports=k.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(a,{schema:b,state:c,prefs:d}){let e=b.$_getRule("normalize");e&&(a=a.normalize(e.args.form));let f=b.$_getRule("case");f&&(a="upper"===f.args.direction?a.toLocaleUpperCase():a.toLocaleLowerCase());let g=b.$_getRule("trim");if(g&&g.args.enabled&&(a=a.trim()),b.$_terms.replacements)for(let c of b.$_terms.replacements)a=a.replace(c.pattern,c.replacement);let h=b.$_getRule("hex");if(h&&h.args.options.byteAligned&&a.length%2!=0&&(a=`0${a}`),b.$_getRule("isoDate")){let b=m.isoDate(a);b&&(a=b)}if(b._flags.truncate){let e=b.$_getRule("max");if(e){let f=e.args.limit;if(l.isResolvable(f)&&(f=f.resolve(a,c,d),!l.limit(f)))return{value:a,errors:b.$_createError("any.ref",f,{ref:e.args.limit,arg:"limit",reason:"must be a positive integer"},c,d)};a=a.slice(0,f)}}return{value:a}}},validate(a,{schema:b,error:c}){if("string"!=typeof a)return{value:a,errors:c("string.base")};if(""===a){let d=b.$_getRule("min");if(d&&0===d.args.limit)return;return{value:a,errors:c("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(a,b)=>/^[a-zA-Z0-9]+$/.test(a)?a:b.error("string.alphanum")},base64:{method(a={}){return l.assertOptions(a,["paddingRequired","urlSafe"]),d("boolean"==typeof(a={urlSafe:!1,paddingRequired:!0,...a}).paddingRequired,"paddingRequired must be boolean"),d("boolean"==typeof a.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:a}})},validate:(a,b,{options:c})=>m.base64Regex[c.paddingRequired][c.urlSafe].test(a)?a:b.error("string.base64")},case:{method(a){return d(["lower","upper"].includes(a),"Invalid case:",a),this.$_addRule({name:"case",args:{direction:a}})},validate:(a,b,{direction:c})=>"lower"===c&&a===a.toLocaleLowerCase()||"upper"===c&&a===a.toLocaleUpperCase()?a:b.error(`string.${c}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(a,b){let c=a.length,d=0,e=1;for(;c--;){let b=a.charAt(c)*e;d+=b-9*(b>9),e^=3}return d>0&&d%10==0?a:b.error("string.creditCard")}},dataUri:{method(a={}){return l.assertOptions(a,["paddingRequired"]),d("boolean"==typeof(a={paddingRequired:!0,...a}).paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:a}})},validate(a,b,{options:c}){let d=a.match(m.dataUriRegex);return d&&(!d[2]||"base64"!==d[2]||m.base64Regex[c.paddingRequired].false.test(d[3]))?a:b.error("string.dataUri")}},domain:{method(a){a&&l.assertOptions(a,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);let b=m.addressOptions(a);return this.$_addRule({name:"domain",args:{options:a},address:b})},validate:(a,b,c,{address:d})=>e.isValid(a,d)?a:b.error("string.domain")},email:{method(a={}){l.assertOptions(a,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),d(void 0===a.multiple||"boolean"==typeof a.multiple,"multiple option must be an boolean");let b=m.addressOptions(a),c=RegExp(`\\s*[${a.separator?h(a.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:a},regex:c,address:b})},validate(a,b,{options:c},{regex:d,address:e}){let g=c.multiple?a.split(d):[a],h=[];for(let a of g)f.isValid(a,e)||h.push(a);return h.length?b.error("string.email",{value:a,invalids:h}):a}},guid:{alias:"uuid",method(a={}){l.assertOptions(a,["version","separator"]);let b="";if(a.version){let c=[].concat(a.version);d(c.length>=1,"version must have at least 1 valid version specified");let e=new Set;for(let a=0;a<c.length;++a){let f=c[a];d("string"==typeof f,"version at position "+a+" must be a string");let g=m.guidVersions[f.toLowerCase()];d(g,"version at position "+a+" must be one of "+Object.keys(m.guidVersions).join(", ")),d(!e.has(g),"version at position "+a+" must not be a duplicate"),b+=g,e.add(g)}}d(m.guidSeparators.has(a.separator),'separator must be one of true, false, "-", or ":"');let c=void 0===a.separator?"[:-]?":!0===a.separator?"[:-]":!1===a.separator?"[]?":`\\${a.separator}`,e=RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${c})[0-9A-F]{4}\\2?[${b||"0-9A-F"}][0-9A-F]{3}\\2?[${b?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:a},regex:e})},validate(a,b,c,{regex:d}){let e=d.exec(a);return e?m.guidBrackets[e[1]]!==e[e.length-1]?b.error("string.guid"):a:b.error("string.guid")}},hex:{method(a={}){return l.assertOptions(a,["byteAligned","prefix"]),d("boolean"==typeof(a={byteAligned:!1,prefix:!1,...a}).byteAligned,"byteAligned must be boolean"),d("boolean"==typeof a.prefix||"optional"===a.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:a}})},validate:(a,b,{options:c})=>("optional"===c.prefix?m.hexRegex.withOptionalPrefix:!0===c.prefix?m.hexRegex.withPrefix:m.hexRegex.withoutPrefix).test(a)?c.byteAligned&&a.length%2!=0?b.error("string.hexAlign"):a:b.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(a,b)=>e.isValid(a,{minDomainSegments:1})||m.ipRegex.test(a)?a:b.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(a={}){l.assertOptions(a,["cidr","version"]);let{cidr:b,versions:c,regex:d}=g.regex(a),e=a.version?c:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:b,version:e}},regex:d})},validate:(a,b,{options:c},{regex:d})=>d.test(a)?a:c.version?b.error("string.ipVersion",{value:a,cidr:c.cidr,version:c.version}):b.error("string.ip",{value:a,cidr:c.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(a,{error:b})=>m.isoDate(a)?a:b("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(a,b)=>m.isoDurationRegex.test(a)?a:b.error("string.isoDuration")},length:{method(a,b){return m.length(this,"length",a,"=",b)},validate(a,b,{limit:c,encoding:d},{name:e,operator:f,args:g}){let h=!d&&a.length;return l.compare(h,c,f)?a:b.error("string."+e,{limit:g.limit,value:a,encoding:d})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(a,b){return m.length(this,"max",a,"<=",b)},args:["limit","encoding"]},min:{method(a,b){return m.length(this,"min",a,">=",b)},args:["limit","encoding"]},normalize:{method(a="NFC"){return d(m.normalizationForms.includes(a),"normalization form must be one of "+m.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:a}})},validate:(a,{error:b},{form:c})=>a===a.normalize(c)?a:b("string.normalize",{value:a,form:c}),convert:!0},pattern:{alias:"regex",method(a,b={}){d(a instanceof RegExp,"regex must be a RegExp"),d(!a.flags.includes("g")&&!a.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof b&&(b={name:b}),l.assertOptions(b,["invert","name"]);let c="string.pattern"+(b.invert?".invert":"")+(b.name?".name":".base");return this.$_addRule({name:"pattern",args:{regex:a,options:b},errorCode:c})},validate:(a,b,{regex:c,options:d},{errorCode:e})=>c.test(a)^d.invert?a:b.error(e,{name:d.name,regex:c,value:a}),args:["regex","options"],multi:!0},replace:{method(a,b){"string"==typeof a&&(a=RegExp(h(a),"g")),d(a instanceof RegExp,"pattern must be a RegExp"),d("string"==typeof b,"replacement must be a String");let c=this.clone();return c.$_terms.replacements||(c.$_terms.replacements=[]),c.$_terms.replacements.push({pattern:a,replacement:b}),c}},token:{method(){return this.$_addRule("token")},validate:(a,b)=>/^\w+$/.test(a)?a:b.error("string.token")},trim:{method(a=!0){return d("boolean"==typeof a,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:a}})},validate:(a,b,{enabled:c})=>c&&a!==a.trim()?b.error("string.trim"):a,convert:!0},truncate:{method(a=!0){return d("boolean"==typeof a,"enabled must be a boolean"),this.$_setFlag("truncate",a)}},uppercase:{method(){return this.case("upper")}},uri:{method(a={}){l.assertOptions(a,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),a.domain&&l.assertOptions(a.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);let{regex:b,scheme:c}=j.regex(a),d=a.domain?m.addressOptions(a.domain):null;return this.$_addRule({name:"uri",args:{options:a},regex:b,domain:d,scheme:c})},validate(a,b,{options:c},{regex:d,domain:f,scheme:g}){if(["http:/","https:/"].includes(a))return b.error("string.uri");let h=d.exec(a);if(!h&&b.prefs.convert&&c.encodeUri){let b=encodeURI(a);(h=d.exec(b))&&(a=b)}if(h){let d=h[1]||h[2];return!f||c.allowRelative&&!d||e.isValid(d,f)?a:b.error("string.domain",{value:d})}return c.relativeOnly?b.error("string.uriRelativeOnly"):c.scheme?b.error("string.uriCustomScheme",{scheme:g,value:a}):b.error("string.uri")}}},manifest:{build(a,b){if(b.replacements)for(let{pattern:c,replacement:d}of b.replacements)a=a.replace(c,d);return a}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),m.addressOptions=function(a){if(!a)return m.tlds||a;if(d(void 0===a.minDomainSegments||Number.isSafeInteger(a.minDomainSegments)&&a.minDomainSegments>0,"minDomainSegments must be a positive integer"),d(void 0===a.maxDomainSegments||Number.isSafeInteger(a.maxDomainSegments)&&a.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===a.tlds)return a;if(!0===a.tlds||void 0===a.tlds)return d(m.tlds,"Built-in TLD list disabled"),Object.assign({},a,m.tlds);d("object"==typeof a.tlds,"tlds must be true, false, or an object");let b=a.tlds.deny;if(b)return Array.isArray(b)&&(a=Object.assign({},a,{tlds:{deny:new Set(b)}})),d(a.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),d(!a.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),m.validateTlds(a.tlds.deny,"tlds.deny"),a;let c=a.tlds.allow;return c?!0===c?(d(m.tlds,"Built-in TLD list disabled"),Object.assign({},a,m.tlds)):(Array.isArray(c)&&(a=Object.assign({},a,{tlds:{allow:new Set(c)}})),d(a.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),m.validateTlds(a.tlds.allow,"tlds.allow"),a):a},m.validateTlds=function(a,b){for(let c of a)d(e.isValid(c,{minDomainSegments:1,maxDomainSegments:1}),`${b} must contain valid top level domain names`)},m.isoDate=function(a){if(!l.isIsoDate(a))return null;/.*T.*[+-]\d\d$/.test(a)&&(a+="00");let b=new Date(a);return isNaN(b.getTime())?null:b.toISOString()},m.length=function(a,b,c,e,f){return d(!f,"Invalid encoding:",f),a.$_addRule({name:b,method:"length",args:{limit:c,encoding:f},operator:e})}},8826:(a,b,c)=>{"use strict";let d=c(375),e=c(8068),f={};f.Map=class extends Map{slice(){return new f.Map(this)}},a.exports=e.extend({type:"symbol",terms:{map:{init:new f.Map}},coerce:{method(a,{schema:b,error:c}){let d=b.$_terms.map.get(a);return d&&(a=d),b._flags.only&&"symbol"!=typeof a?{value:a,errors:c("symbol.map",{map:b.$_terms.map})}:{value:a}}},validate(a,{error:b}){if("symbol"!=typeof a)return{value:a,errors:b("symbol.base")}},rules:{map:{method(a){a&&!a[Symbol.iterator]&&"object"==typeof a&&(a=Object.entries(a)),d(a&&a[Symbol.iterator],"Iterable must be an iterable or object");let b=this.clone(),c=[];for(let e of a){d(e&&e[Symbol.iterator],"Entry must be an iterable");let[a,f]=e;d("object"!=typeof a&&"function"!=typeof a&&"symbol"!=typeof a,"Key must not be of type object, function, or Symbol"),d("symbol"==typeof f,"Value must be a Symbol"),b.$_terms.map.set(a,f),c.push(f)}return b.valid(...c)}}},manifest:{build:(a,b)=>(b.map&&(a=a.map(b.map)),a)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(738),g=c(9621),h=c(8160),i=c(6354),j=c(493),k={result:Symbol("result")};b.entry=function(a,b,c){let e=h.defaults;c&&(d(void 0===c.warnings,"Cannot override warnings preference in synchronous validation"),d(void 0===c.artifacts,"Cannot override artifacts preference in synchronous validation"),e=h.preferences(h.defaults,c));let f=k.entry(a,b,e);d(!f.mainstay.externals.length,"Schema with external rules must use validateAsync()");let g={value:f.value};return f.error&&(g.error=f.error),f.mainstay.warnings.length&&(g.warning=i.details(f.mainstay.warnings)),f.mainstay.debug&&(g.debug=f.mainstay.debug),f.mainstay.artifacts&&(g.artifacts=f.mainstay.artifacts),g},b.entryAsync=async function(a,b,c){let d=h.defaults;c&&(d=h.preferences(h.defaults,c));let e=k.entry(a,b,d),f=e.mainstay;if(e.error)throw f.debug&&(e.error.debug=f.debug),e.error;if(f.externals.length){let b=e.value,j=[];for(let e of f.externals){let l=e.state.path,m="link"===e.schema.type?f.links.get(e.schema):null,n,o,p=b,q=l.length?[b]:[],r=l.length?g(a,l):a;if(l.length){n=l[l.length-1];let a=b;for(let b of l.slice(0,-1))a=a[b],q.unshift(a);p=(o=q[0])[n]}try{let a=(a,b)=>(m||e.schema).$_createError(a,p,b,e.state,d),g=await e.method(p,{schema:e.schema,linked:m,state:e.state,prefs:c,original:r,error:a,errorsArray:k.errorsArray,warn:(a,b)=>f.warnings.push((m||e.schema).$_createError(a,p,b,e.state,d)),message:(a,b)=>(m||e.schema).$_createError("external",p,b,e.state,d,{messages:a})});if(void 0===g||g===p)continue;if(g instanceof i.Report){if(f.tracer.log(e.schema,e.state,"rule","external","error"),j.push(g),d.abortEarly)break;continue}if(Array.isArray(g)&&g[h.symbols.errors]){if(f.tracer.log(e.schema,e.state,"rule","external","error"),j.push(...g),d.abortEarly)break;continue}o?(f.tracer.value(e.state,"rule",p,g,"external"),o[n]=g):(f.tracer.value(e.state,"rule",b,g,"external"),b=g)}catch(a){throw d.errors.label&&(a.message+=` (${e.label})`),a}}if(e.value=b,j.length)throw e.error=i.process(j,a,d),f.debug&&(e.error.debug=f.debug),e.error}if(!d.warnings&&!d.debug&&!d.artifacts)return e.value;let j={value:e.value};return f.warnings.length&&(j.warning=i.details(f.warnings)),f.debug&&(j.debug=f.debug),f.artifacts&&(j.artifacts=f.artifacts),j},k.Mainstay=class{constructor(a,b,c){this.externals=[],this.warnings=[],this.tracer=a,this.debug=b,this.links=c,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){let a=this._snapshots.pop();this.externals=a.externals,this.warnings=a.warnings}commit(){this._snapshots.pop()}},k.entry=function(a,c,d){let{tracer:e,cleanup:f}=k.tracer(c,d),g=d.debug?[]:null,h=c._ids._schemaChain?new Map:null,l=new k.Mainstay(e,g,h),m=new j([],[],{mainstay:l,schemas:c._ids._schemaChain?[{schema:c}]:null}),n=b.validate(a,c,m,d);f&&c.$_root.untrace();let o=i.process(n.errors,a,d);return{value:n.value,error:o,mainstay:l}},k.tracer=function(a,b){return a.$_root._tracer?{tracer:a.$_root._tracer._register(a)}:b.debug?(d(a.$_root.trace,"Debug mode not supported"),{tracer:a.$_root.trace()._register(a),cleanup:!0}):{tracer:k.ignore}},b.validate=function(a,b,c,d,e={}){if(b.$_terms.whens&&(b=b._generate(a,c,d).schema),b._preferences&&(d=k.prefs(b,d)),b._cache&&d.cache){let d=b._cache.get(a);if(c.mainstay.tracer.debug(c,"validate","cached",!!d),d)return d}let f=(e,f,g)=>b.$_createError(e,a,f,g||c,d),g={original:a,prefs:d,schema:b,state:c,error:f,errorsArray:k.errorsArray,warn:(a,b,d)=>c.mainstay.warnings.push(f(a,b,d)),message:(e,f)=>b.$_createError("custom",a,f,c,d,{messages:e})};c.mainstay.tracer.entry(b,c);let i=b._definition;if(i.prepare&&void 0!==a&&d.convert){let b=i.prepare(a,g);if(b){if(c.mainstay.tracer.value(c,"prepare",a,b.value),b.errors)return k.finalize(b.value,[].concat(b.errors),g);a=b.value}}if(i.coerce&&void 0!==a&&d.convert&&(!i.coerce.from||i.coerce.from.includes(typeof a))){let b=i.coerce.method(a,g);if(b){if(c.mainstay.tracer.value(c,"coerced",a,b.value),b.errors)return k.finalize(b.value,[].concat(b.errors),g);a=b.value}}let j=b._flags.empty;j&&j.$_match(k.trim(a,b),c.nest(j),h.defaults)&&(c.mainstay.tracer.value(c,"empty",a,void 0),a=void 0);let l=e.presence||b._flags.presence||(b._flags._endedSwitch?null:d.presence);if(void 0===a){if("forbidden"===l)return k.finalize(a,null,g);if("required"===l)return k.finalize(a,[b.$_createError("any.required",a,null,c,d)],g);if("optional"===l){if(b._flags.default!==h.symbols.deepDefault)return k.finalize(a,null,g);c.mainstay.tracer.value(c,"default",a,{}),a={}}}else if("forbidden"===l)return k.finalize(a,[b.$_createError("any.unknown",a,null,c,d)],g);let m=[];if(b._valids){let e=b._valids.get(a,c,d,b._flags.insensitive);if(e)return d.convert&&(c.mainstay.tracer.value(c,"valids",a,e.value),a=e.value),c.mainstay.tracer.filter(b,c,"valid",e),k.finalize(a,null,g);if(b._flags.only){let e=b.$_createError("any.only",a,{valids:b._valids.values({display:!0})},c,d);if(d.abortEarly)return k.finalize(a,[e],g);m.push(e)}}if(b._invalids){let e=b._invalids.get(a,c,d,b._flags.insensitive);if(e){c.mainstay.tracer.filter(b,c,"invalid",e);let f=b.$_createError("any.invalid",a,{invalids:b._invalids.values({display:!0})},c,d);if(d.abortEarly)return k.finalize(a,[f],g);m.push(f)}}if(i.validate){let b=i.validate(a,g);if(b&&(c.mainstay.tracer.value(c,"base",a,b.value),a=b.value,b.errors)){if(!Array.isArray(b.errors))return m.push(b.errors),k.finalize(a,m,g);if(b.errors.length)return m.push(...b.errors),k.finalize(a,m,g)}}return b._rules.length?k.rules(a,m,g):k.finalize(a,m,g)},k.rules=function(a,b,c){let{schema:d,state:e,prefs:f}=c;for(let g of d._rules){let i=d._definition.rules[g.method];if(i.convert&&f.convert){e.mainstay.tracer.log(d,e,"rule",g.name,"full");continue}let j,l=g.args;if(g._resolve.length)for(let b of(l=Object.assign({},l),g._resolve)){let c=i.argsByName.get(b),g=l[b].resolve(a,e,f),k=c.normalize?c.normalize(g):g,m=h.validateArg(k,null,c);if(m){j=d.$_createError("any.ref",g,{arg:b,ref:l[b],reason:m},e,f);break}l[b]=k}j=j||i.validate(a,c,l,g);let m=k.rule(j,g);if(m.errors){if(e.mainstay.tracer.log(d,e,"rule",g.name,"error"),g.warn){e.mainstay.warnings.push(...m.errors);continue}if(f.abortEarly)return k.finalize(a,m.errors,c);b.push(...m.errors)}else e.mainstay.tracer.log(d,e,"rule",g.name,"pass"),e.mainstay.tracer.value(e,"rule",a,m.value,g.name),a=m.value}return k.finalize(a,b,c)},k.rule=function(a,b){return a instanceof i.Report?(k.error(a,b),{errors:[a],value:null}):Array.isArray(a)&&a[h.symbols.errors]?(a.forEach(a=>k.error(a,b)),{errors:a,value:null}):{errors:null,value:a}},k.error=function(a,b){return b.message&&a._setTemplate(b.message),a},k.finalize=function(a,b,c){let{schema:e,state:f,prefs:g}=c;if((b=b||[]).length){let d=k.default("failover",void 0,b,c);void 0!==d&&(f.mainstay.tracer.value(f,"failover",a,d),a=d,b=[])}if(b.length&&e._flags.error)if("function"==typeof e._flags.error)for(let a of(Array.isArray(b=e._flags.error(b))||(b=[b]),b))d(a instanceof Error||a instanceof i.Report,"error() must return an Error object");else b=[e._flags.error];if(void 0===a){let d=k.default("default",a,b,c);f.mainstay.tracer.value(f,"default",a,d),a=d}if(e._flags.cast&&void 0!==a){let b=e._definition.cast[e._flags.cast];if(b.from(a)){let d=b.to(a,c);f.mainstay.tracer.value(f,"cast",a,d,e._flags.cast),a=d}}if(e.$_terms.externals&&g.externals&&!1!==g._externals)for(let{method:a}of e.$_terms.externals)f.mainstay.externals.push({method:a,schema:e,state:f,label:i.label(e._flags,f,g)});let h={value:a,errors:b.length?b:null};return e._flags.result&&(h.value="strip"===e._flags.result?void 0:c.original,f.mainstay.tracer.value(f,e._flags.result,a,h.value),f.shadow(a,e._flags.result)),e._cache&&!1!==g.cache&&!e._refs.length&&e._cache.set(c.original,h),void 0===a||h.errors||void 0===e._flags.artifact||(f.mainstay.artifacts=f.mainstay.artifacts||new Map,f.mainstay.artifacts.has(e._flags.artifact)||f.mainstay.artifacts.set(e._flags.artifact,[]),f.mainstay.artifacts.get(e._flags.artifact).push(f.path)),h},k.prefs=function(a,b){let c=b===h.defaults;return c&&a._preferences[h.symbols.prefs]?a._preferences[h.symbols.prefs]:(b=h.preferences(b,a._preferences),c&&(a._preferences[h.symbols.prefs]=b),b)},k.default=function(a,b,c,d){let{schema:f,state:g,prefs:i}=d,j=f._flags[a];if(i.noDefaults||void 0===j)return b;if(g.mainstay.tracer.log(f,g,"rule",a,"full"),!j)return j;if("function"==typeof j){let b=j.length?[e(g.ancestors[0]),d]:[];try{return j(...b)}catch(b){return void c.push(f.$_createError(`any.${a}`,null,{error:b},g,i))}}return"object"!=typeof j?j:j[h.symbols.literal]?j.literal:h.isResolvable(j)?j.resolve(b,g,i):e(j)},k.trim=function(a,b){if("string"!=typeof a)return a;let c=b.$_getRule("trim");return c&&c.args.enabled?a.trim():a},k.ignore={active:!1,debug:f,entry:f,filter:f,log:f,resolve:f,value:f},k.errorsArray=function(){let a=[];return a[h.symbols.errors]=!0,a}},2036:(a,b,c)=>{"use strict";let d=c(375),e=c(9474),f=c(8160),g={};a.exports=g.Values=class{constructor(a,b){this._values=new Set(a),this._refs=new Set(b),this._lowercase=g.lowercases(a),this._override=!1}get length(){return this._values.size+this._refs.size}add(a,b){f.isResolvable(a)?this._refs.has(a)||(this._refs.add(a),b&&b.register(a)):this.has(a,null,null,!1)||(this._values.add(a),"string"==typeof a&&this._lowercase.set(a.toLowerCase(),a))}static merge(a,b,c){if(a=a||new g.Values,b){if(b._override)return b.clone();for(let c of[...b._values,...b._refs])a.add(c)}if(c)for(let b of[...c._values,...c._refs])a.remove(b);return a.length?a:null}remove(a){f.isResolvable(a)?this._refs.delete(a):(this._values.delete(a),"string"==typeof a&&this._lowercase.delete(a.toLowerCase()))}has(a,b,c,d){return!!this.get(a,b,c,d)}get(a,b,c,d){if(!this.length)return!1;if(this._values.has(a))return{value:a};if("string"==typeof a&&a&&d){let b=this._lowercase.get(a.toLowerCase());if(b)return{value:b}}if(!this._refs.size&&"object"!=typeof a)return!1;if("object"==typeof a){for(let b of this._values)if(e(b,a))return{value:b}}if(b)for(let f of this._refs){let g=f.resolve(a,b,c,null,{in:!0});if(void 0!==g){for(let b of f.in&&"object"==typeof g?Array.isArray(g)?g:Object.keys(g):[g])if(typeof b==typeof a){if(d&&a&&"string"==typeof a){if(b.toLowerCase()===a.toLowerCase())return{value:b,ref:f}}else if(e(b,a))return{value:b,ref:f}}}}return!1}override(){this._override=!0}values(a){if(a&&a.display){let a=[];for(let b of[...this._values,...this._refs])void 0!==b&&a.push(b);return a}return Array.from([...this._values,...this._refs])}clone(){let a=new g.Values(this._values,this._refs);return a._override=this._override,a}concat(a){d(!a._override,"Cannot concat override set of values");let b=new g.Values([...this._values,...a._values],[...this._refs,...a._refs]);return b._override=this._override,b}describe(){let a=[];for(let b of(this._override&&a.push({override:!0}),this._values.values()))a.push(b&&"object"==typeof b?{value:b}:b);for(let b of this._refs.values())a.push(b.describe());return a}},g.Values.prototype[f.symbols.values]=!0,g.Values.prototype.slice=g.Values.prototype.clone,g.lowercases=function(a){let b=new Map;if(a)for(let c of a)"string"==typeof c&&b.set(c.toLowerCase(),c);return b}},978:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(1687),g=c(9621),h={};a.exports=function(a,b,c={}){if(d(a&&"object"==typeof a,"Invalid defaults value: must be an object"),d(!b||!0===b||"object"==typeof b,"Invalid source value: must be true, falsy or an object"),d("object"==typeof c,"Invalid options: must be an object"),!b)return null;if(c.shallow)return h.applyToDefaultsWithShallow(a,b,c);let g=e(a);return!0===b?g:f(g,b,{nullOverride:void 0!==c.nullOverride&&c.nullOverride,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(a,b,c){let i=c.shallow;d(Array.isArray(i),"Invalid keys");let j=new Map,k=!0===b?null:new Set;for(let c of i){let d=g(a,c=Array.isArray(c)?c:c.split("."));d&&"object"==typeof d?j.set(d,k&&g(b,c)||d):k&&k.add(c)}let l=e(a,{},j);if(!k)return l;for(let a of k)h.reachCopy(l,b,a);return f(l,b,{nullOverride:void 0!==c.nullOverride&&c.nullOverride,mergeArrays:!1})},h.reachCopy=function(a,b,c){for(let a of c){if(!(a in b))return;let c=b[a];if("object"!=typeof c||null===c)return;b=c}let d=b,e=a;for(let a=0;a<c.length-1;++a){let b=c[a];"object"!=typeof e[b]&&(e[b]={}),e=e[b]}e[c[c.length-1]]=d}},375:(a,b,c)=>{"use strict";let d=c(7916);a.exports=function(a,...b){if(!a){if(1===b.length&&b[0]instanceof Error)throw b[0];throw new d(b)}}},8571:(a,b,c)=>{"use strict";let d=c(9621),e=c(4277),f=c(7043),g={needsProtoHack:new Set([e.set,e.map,e.weakSet,e.weakMap])};a.exports=g.clone=function(a,b={},c=null){if("object"!=typeof a||null===a)return a;let d=g.clone,h=c;if(b.shallow){if(!0!==b.shallow)return g.cloneWithShallow(a,b);d=a=>a}else if(h){let b=h.get(a);if(b)return b}else h=new Map;let i=e.getInternalProto(a);if(i===e.buffer)return!1;if(i===e.date)return new Date(a.getTime());if(i===e.regex)return new RegExp(a);let j=g.base(a,i,b);if(j===a)return a;if(h&&h.set(a,j),i===e.set)for(let c of a)j.add(d(c,b,h));else if(i===e.map)for(let[c,e]of a)j.set(c,d(e,b,h));for(let c of f.keys(a,b)){if("__proto__"===c)continue;if(i===e.array&&"length"===c){j.length=a.length;continue}let f=Object.getOwnPropertyDescriptor(a,c);f?f.get||f.set?Object.defineProperty(j,c,f):f.enumerable?j[c]=d(a[c],b,h):Object.defineProperty(j,c,{enumerable:!1,writable:!0,configurable:!0,value:d(a[c],b,h)}):Object.defineProperty(j,c,{enumerable:!0,writable:!0,configurable:!0,value:d(a[c],b,h)})}return j},g.cloneWithShallow=function(a,b){let c=b.shallow;(b=Object.assign({},b)).shallow=!1;let e=new Map;for(let b of c){let c=d(a,b);"object"!=typeof c&&"function"!=typeof c||e.set(c,c)}return g.clone(a,b,e)},g.base=function(a,b,c){if(!1===c.prototype)return g.needsProtoHack.has(b)?new b.constructor:b===e.array?[]:{};let d=Object.getPrototypeOf(a);if(d&&d.isImmutable)return a;if(b===e.array){let a=[];return d!==b&&Object.setPrototypeOf(a,d),a}if(g.needsProtoHack.has(b)){let a=new d.constructor;return d!==b&&Object.setPrototypeOf(a,d),a}return Object.create(d)}},9474:(a,b,c)=>{"use strict";let d=c(4277),e={mismatched:null};a.exports=function(a,b,c){return c=Object.assign({prototype:!0},c),!!e.isDeepEqual(a,b,c,[])},e.isDeepEqual=function(a,b,c,f){if(a===b)return 0!==a||1/a==1/b;let g=typeof a;if(g!==typeof b||null===a||null===b)return!1;if("function"===g){if(!c.deepFunction||a.toString()!==b.toString())return!1}else if("object"!==g)return a!=a&&b!=b;let h=e.getSharedType(a,b,!!c.prototype);switch(h){case d.buffer:return!1;case d.promise:return a===b;case d.regex:return a.toString()===b.toString();case e.mismatched:return!1}for(let c=f.length-1;c>=0;--c)if(f[c].isSame(a,b))return!0;f.push(new e.SeenEntry(a,b));try{return!!e.isDeepEqualObj(h,a,b,c,f)}finally{f.pop()}},e.getSharedType=function(a,b,c){if(c)return Object.getPrototypeOf(a)!==Object.getPrototypeOf(b)?e.mismatched:d.getInternalProto(a);let f=d.getInternalProto(a);return f!==d.getInternalProto(b)?e.mismatched:f},e.valueOf=function(a){let b=a.valueOf;if(void 0===b)return a;try{return b.call(a)}catch(a){return a}},e.hasOwnEnumerableProperty=function(a,b){return Object.prototype.propertyIsEnumerable.call(a,b)},e.isSetSimpleEqual=function(a,b){for(let c of Set.prototype.values.call(a))if(!Set.prototype.has.call(b,c))return!1;return!0},e.isDeepEqualObj=function(a,b,c,f,g){let{isDeepEqual:h,valueOf:i,hasOwnEnumerableProperty:j}=e,{keys:k,getOwnPropertySymbols:l}=Object;if(a===d.array){if(!f.part){if(b.length!==c.length)return!1;for(let a=0;a<b.length;++a)if(!h(b[a],c[a],f,g))return!1;return!0}for(let a of b)for(let b of c)if(h(a,b,f,g))return!0}else if(a===d.set){if(b.size!==c.size)return!1;if(!e.isSetSimpleEqual(b,c)){let a=new Set(Set.prototype.values.call(c));for(let c of Set.prototype.values.call(b)){if(a.delete(c))continue;let b=!1;for(let d of a)if(h(c,d,f,g)){a.delete(d),b=!0;break}if(!b)return!1}}}else if(a===d.map){if(b.size!==c.size)return!1;for(let[a,d]of Map.prototype.entries.call(b))if(void 0===d&&!Map.prototype.has.call(c,a)||!h(d,Map.prototype.get.call(c,a),f,g))return!1}else if(a===d.error&&(b.name!==c.name||b.message!==c.message))return!1;let m=i(b),n=i(c);if((b!==m||c!==n)&&!h(m,n,f,g))return!1;let o=k(b);if(!f.part&&o.length!==k(c).length&&!f.skip)return!1;let p=0;for(let a of o)if(f.skip&&f.skip.includes(a))void 0===c[a]&&++p;else if(!j(c,a)||!h(b[a],c[a],f,g))return!1;if(!f.part&&o.length-p!==k(c).length)return!1;if(!1!==f.symbols){let a=l(b),d=new Set(l(c));for(let e of a){if(!f.skip||!f.skip.includes(e)){if(j(b,e)){if(!j(c,e)||!h(b[e],c[e],f,g))return!1}else if(j(c,e))return!1}d.delete(e)}for(let a of d)if(j(c,a))return!1}return!0},e.SeenEntry=class{constructor(a,b){this.obj=a,this.ref=b}isSame(a,b){return this.obj===a&&this.ref===b}}},7916:(a,b,c)=>{"use strict";let d=c(8761);a.exports=class extends Error{constructor(a){super(a.filter(a=>""!==a).map(a=>"string"==typeof a?a:a instanceof Error?a.message:d(a)).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b.assert)}}},5277:a=>{"use strict";let b={};a.exports=function(a){if(!a)return"";let c="";for(let d=0;d<a.length;++d){let e=a.charCodeAt(d);b.isSafe(e)?c+=a[d]:c+=b.escapeHtmlChar(e)}return c},b.escapeHtmlChar=function(a){return b.namedHtml.get(a)||(a>=256?"&#"+a+";":`&#x${a.toString(16).padStart(2,"0")};`)},b.isSafe=function(a){return b.safeCharCodes.has(a)},b.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),b.safeCharCodes=function(){let a=new Set;for(let b=32;b<123;++b)(b>=97||b>=65&&b<=90||b>=48&&b<=57||32===b||46===b||44===b||45===b||58===b||95===b)&&a.add(b);return a}()},6064:a=>{"use strict";a.exports=function(a){return a.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:a=>{"use strict";a.exports=function(){}},1687:(a,b,c)=>{"use strict";let d=c(375),e=c(8571),f=c(7043),g={};a.exports=g.merge=function(a,b,c){if(d(a&&"object"==typeof a,"Invalid target value: must be an object"),d(null==b||"object"==typeof b,"Invalid source value: must be null, undefined, or an object"),!b)return a;if(c=Object.assign({nullOverride:!0,mergeArrays:!0},c),Array.isArray(b)){d(Array.isArray(a),"Cannot merge array onto an object"),c.mergeArrays||(a.length=0);for(let d=0;d<b.length;++d)a.push(e(b[d],{symbols:c.symbols}));return a}let h=f.keys(b,c);for(let d=0;d<h.length;++d){let f=h[d];if("__proto__"===f||!Object.prototype.propertyIsEnumerable.call(b,f))continue;let i=b[f];if(i&&"object"==typeof i){if(a[f]===i)continue;!a[f]||"object"!=typeof a[f]||Array.isArray(a[f])!==Array.isArray(i)||i instanceof Date||i instanceof RegExp?a[f]=e(i,{symbols:c.symbols}):g.merge(a[f],i,c)}else(null!=i||c.nullOverride)&&(a[f]=i)}return a}},9621:(a,b,c)=>{"use strict";let d=c(375),e={};a.exports=function(a,b,c){if(!1===b||null==b)return a;"string"==typeof(c=c||{})&&(c={separator:c});let f=Array.isArray(b);d(!f||!c.separator,"Separator option is not valid for array-based chain");let g=f?b:b.split(c.separator||"."),h=a;for(let a=0;a<g.length;++a){let f=g[a],i=c.iterables&&e.iterables(h);if(Array.isArray(h)||"set"===i){let a=Number(f);Number.isInteger(a)&&(f=a<0?h.length+a:a)}if(!h||"function"==typeof h&&!1===c.functions||!i&&void 0===h[f]){d(!c.strict||a+1===g.length,"Missing segment",f,"in reach path ",b),d("object"==typeof h||!0===c.functions||"function"!=typeof h,"Invalid segment",f,"in reach path ",b),h=c.default;break}h=i?"set"===i?[...h][f]:h.get(f):h[f]}return h},e.iterables=function(a){return a instanceof Set?"set":a instanceof Map?"map":void 0}},8761:a=>{"use strict";a.exports=function(...a){try{return JSON.stringify(...a)}catch(a){return"[Cannot display object: "+a.message+"]"}}},4277:(a,b)=>{"use strict";let c={};c.typeMap=new Map([["[object Error]",(b=a.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype}).error],["[object Map]",b.map],["[object Promise]",b.promise],["[object Set]",b.set],["[object WeakMap]",b.weakMap],["[object WeakSet]",b.weakSet]]),b.getInternalProto=function(a){if(Array.isArray(a))return b.array;if(a instanceof Date)return b.date;if(a instanceof RegExp)return b.regex;if(a instanceof Error)return b.error;let d=Object.prototype.toString.call(a);return c.typeMap.get(d)||b.generic}},7043:(a,b)=>{"use strict";b.keys=function(a,b={}){return!1!==b.symbols?Reflect.ownKeys(a):Object.getOwnPropertyNames(a)}},3652:(a,b,c)=>{"use strict";let d=c(375),e={};b.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(a,b){let c=[].concat((b=b||{}).before||[]),e=[].concat(b.after||[]),f=b.group||"?",g=b.sort||0;for(let b of(d(!c.includes(f),`Item cannot come before itself: ${f}`),d(!c.includes("?"),"Item cannot come before unassociated items"),d(!e.includes(f),`Item cannot come after itself: ${f}`),d(!e.includes("?"),"Item cannot come after unassociated items"),Array.isArray(a)||(a=[a]),a)){let a={seq:this._items.length,sort:g,before:c,after:e,group:f,node:b};this._items.push(a)}return b.manual||d(this._sort(),"item","?"!==f?`added into group ${f}`:"","created a dependencies error"),this.nodes}merge(a){for(let b of(Array.isArray(a)||(a=[a]),a))if(b)for(let a of b._items)this._items.push(Object.assign({},a));this._items.sort(e.mergeSort);for(let a=0;a<this._items.length;++a)this._items[a].seq=a;return d(this._sort(),"merge created a dependencies error"),this.nodes}sort(){return d(this._sort(),"sort created a dependencies error"),this.nodes}_sort(){let a={},b=Object.create(null),c=Object.create(null);for(let d of this._items){let e=d.seq,f=d.group;for(let g of(c[f]=c[f]||[],c[f].push(e),a[e]=d.before,d.after))b[g]=b[g]||[],b[g].push(e)}for(let b in a){let d=[];for(let e in a[b]){let f=a[b][e];c[f]=c[f]||[],d.push(...c[f])}a[b]=d}for(let d in b)if(c[d])for(let e of c[d])a[e].push(...b[d]);let d={};for(let b in a)for(let c of a[b])d[c]=d[c]||[],d[c].push(b);let e={},f=[];for(let a=0;a<this._items.length;++a){let b=a;if(d[a]){b=null;for(let a=0;a<this._items.length;++a){if(!0===e[a])continue;d[a]||(d[a]=[]);let c=d[a].length,f=0;for(let b=0;b<c;++b)e[d[a][b]]&&++f;if(f===c){b=a;break}}}null!==b&&(e[b]=!0,f.push(b))}if(f.length!==this._items.length)return!1;let g={};for(let a of this._items)g[a.seq]=a;for(let a of(this._items=[],this.nodes=[],f)){let b=g[a];this.nodes.push(b.node),this._items.push(b)}return!0}},e.mergeSort=(a,b)=>a.sort===b.sort?0:a.sort<b.sort?-1:1},5380:(a,b,c)=>{"use strict";let d=c(443),e=c(2178),f={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:d.URL||URL};b.analyze=function(a,b={}){if(!a)return e.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof a)throw Error("Invalid input: domain must be a string");if(a.length>256)return e.code("DOMAIN_TOO_LONG");if(f.nonAsciiRx.test(a)){if(!1===b.allowUnicode)return e.code("DOMAIN_INVALID_UNICODE_CHARS");a=a.normalize("NFC")}if(f.domainControlRx.test(a))return e.code("DOMAIN_INVALID_CHARS");a=f.punycode(a),b.allowFullyQualified&&"."===a[a.length-1]&&(a=a.slice(0,-1));let c=b.minDomainSegments||f.minDomainSegments,d=a.split(".");if(d.length<c)return e.code("DOMAIN_SEGMENTS_COUNT");if(b.maxDomainSegments&&d.length>b.maxDomainSegments)return e.code("DOMAIN_SEGMENTS_COUNT_MAX");let g=b.tlds;if(g){let a=d[d.length-1].toLowerCase();if(g.deny&&g.deny.has(a)||g.allow&&!g.allow.has(a))return e.code("DOMAIN_FORBIDDEN_TLDS")}for(let a=0;a<d.length;++a){let b=d[a];if(!b.length)return e.code("DOMAIN_EMPTY_SEGMENT");if(b.length>63)return e.code("DOMAIN_LONG_SEGMENT");if(a<d.length-1){if(!f.domainSegmentRx.test(b))return e.code("DOMAIN_INVALID_CHARS")}else if(!f.tldSegmentRx.test(b))return e.code("DOMAIN_INVALID_TLDS_CHARS")}return null},b.isValid=function(a,c){return!b.analyze(a,c)},f.punycode=function(a){a.includes("%")&&(a=a.replace(/%/g,"%25"));try{return new f.URL(`http://${a}`).host}catch(b){return a}}},1745:(a,b,c)=>{"use strict";let d=c(9848),e=c(5380),f=c(2178),g={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(d.TextEncoder||TextEncoder)};b.analyze=function(a,b){return g.email(a,b)},b.isValid=function(a,b){return!g.email(a,b)},g.email=function(a,b={}){if("string"!=typeof a)throw Error("Invalid input: email must be a string");if(!a)return f.code("EMPTY_STRING");let c=!g.nonAsciiRx.test(a);if(!c){if(!1===b.allowUnicode)return f.code("FORBIDDEN_UNICODE");a=a.normalize("NFC")}let d=a.split("@");if(2!==d.length)return d.length>2?f.code("MULTIPLE_AT_CHAR"):f.code("MISSING_AT_CHAR");let[h,i]=d;if(!h)return f.code("EMPTY_LOCAL");if(!b.ignoreLength){if(a.length>254)return f.code("ADDRESS_TOO_LONG");if(g.encoder.encode(h).length>64)return f.code("LOCAL_TOO_LONG")}return g.local(h,c)||e.analyze(i,b)},g.local=function(a,b){for(let c of a.split(".")){if(!c.length)return f.code("EMPTY_LOCAL_SEGMENT");if(b){if(!g.atextRx.test(c))return f.code("INVALID_LOCAL_CHARS")}else for(let a of c){if(g.atextRx.test(a))continue;let b=g.binary(a);if(!g.atomRx.test(b))return f.code("INVALID_LOCAL_CHARS")}}},g.binary=function(a){return Array.from(g.encoder.encode(a)).map(a=>String.fromCharCode(a)).join("")},g.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,g.atomRx=RegExp("(?:[\\xc2-\\xdf][\\x80-\\xbf])|(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})|(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})")},2178:(a,b)=>{"use strict";b.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},b.code=function(a){return{code:a,error:b.codes[a]}}},9959:(a,b,c)=>{"use strict";let d=c(375),e=c(5752);b.regex=function(a={}){d(void 0===a.cidr||"string"==typeof a.cidr,"options.cidr must be a string");let b=a.cidr?a.cidr.toLowerCase():"optional";d(["required","optional","forbidden"].includes(b),"options.cidr must be one of required, optional, forbidden"),d(void 0===a.version||"string"==typeof a.version||Array.isArray(a.version),"options.version must be a string or an array of string");let c=a.version||["ipv4","ipv6","ipvfuture"];Array.isArray(c)||(c=[c]),d(c.length>=1,"options.version must have at least 1 version specified");for(let a=0;a<c.length;++a)d("string"==typeof c[a],"options.version must only contain strings"),c[a]=c[a].toLowerCase(),d(["ipv4","ipv6","ipvfuture"].includes(c[a]),"options.version contains unknown version "+c[a]+" - must be one of ipv4, ipv6, ipvfuture");c=Array.from(new Set(c));let f=`(?:${c.map(a=>{if("forbidden"===b)return e.ip[a];let c=`\\/${"ipv4"===a?e.ip.v4Cidr:e.ip.v6Cidr}`;return"required"===b?`${e.ip[a]}${c}`:`${e.ip[a]}(?:${c})?`}).join("|")})`;return{cidr:b,versions:c,regex:RegExp(`^${f}$`),raw:f}}},5752:(a,b,c)=>{"use strict";let d=c(375),e=c(6064),f={generate:function(){let a={},b="\\dA-Fa-f",c="["+b+"]",d="\\w-\\.~",e="!\\$&'\\(\\)\\*\\+,;=",f="%"+b,g=d+f+e+":@",h="["+g+"]",i="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";a.ipv4address="(?:"+i+"\\.){3}"+i;let j=c+"{1,4}",k="(?:"+j+":"+j+"|"+a.ipv4address+")",l="(?:(?:"+j+":){0,1}"+j+")?::(?:"+j+":){3}"+k,m="(?:(?:"+j+":){0,2}"+j+")?::(?:"+j+":){2}"+k,n="(?:(?:"+j+":){0,3}"+j+")?::"+j+":"+k;a.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",a.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",a.ipv6address="(?:(?:"+j+":){6}"+k+"|"+("::(?:"+j)+":){5}"+k+"|"+("(?:"+j+")?::(?:"+j)+":){4}"+k+"|"+l+"|"+m+"|"+n+"|"+("(?:(?:"+j+":){0,4}"+j)+")?::"+k+"|"+("(?:(?:"+j+":){0,5}"+j)+")?::"+j+"|"+("(?:(?:"+j+":){0,6}")+j+")?::)",a.ipvFuture="v"+c+"+\\.["+d+e+":]+",a.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",a.schemeRegex=new RegExp(a.scheme);let o="["+d+f+e+":]*",p="(?:\\[(?:"+a.ipv6address+"|"+a.ipvFuture+")\\]|"+a.ipv4address+"|"+("["+d+f)+e+"]{1,255})",q="(?:"+o+"@)?"+p+"(?::\\d*)?",r="(?:"+o+"@)?("+p+")(?::\\d*)?",s=h+"*",t=h+"+",u="(?:\\/"+s+")*",v="\\/(?:"+t+u+")?",w=t+u,x="["+d+f+e+"@]+"+u;return a.hierPart="(?:(?:\\/\\/"+q+u+")|"+v+"|"+w+"|"+("(?:\\/\\/\\/"+s)+u+"))",a.hierPartCapture="(?:(?:\\/\\/"+r+u+")|"+v+"|"+w+")",a.relativeRef="(?:(?:\\/\\/"+q+u+")|"+v+"|"+x+"|)",a.relativeRefCapture="(?:(?:\\/\\/"+r+u+")|"+v+"|"+x+"|)",a.query="["+g+"\\/\\?]*(?=#|$)",a.queryWithSquareBrackets="["+g+"\\[\\]\\/\\?]*(?=#|$)",a.fragment="["+g+"\\/\\?]*",a}};f.rfc3986=f.generate(),b.ip={v4Cidr:f.rfc3986.ipv4Cidr,v6Cidr:f.rfc3986.ipv6Cidr,ipv4:f.rfc3986.ipv4address,ipv6:f.rfc3986.ipv6address,ipvfuture:f.rfc3986.ipvFuture},f.createRegex=function(a){let b=f.rfc3986,c="(?:\\?"+(a.allowQuerySquareBrackets?b.queryWithSquareBrackets:b.query)+")?(?:#"+b.fragment+")?",g=a.domain?b.relativeRefCapture:b.relativeRef;if(a.relativeOnly)return f.wrap(g+c);let h="";if(a.scheme){d(a.scheme instanceof RegExp||"string"==typeof a.scheme||Array.isArray(a.scheme),"scheme must be a RegExp, String, or Array");let c=[].concat(a.scheme);d(c.length>=1,"scheme must have at least 1 scheme specified");let f=[];for(let a=0;a<c.length;++a){let g=c[a];d(g instanceof RegExp||"string"==typeof g,"scheme at position "+a+" must be a RegExp or String"),g instanceof RegExp?f.push(g.source.toString()):(d(b.schemeRegex.test(g),"scheme at position "+a+" must be a valid scheme"),f.push(e(g)))}h=f.join("|")}let i="(?:"+(h?"(?:"+h+")":b.scheme)+":"+(a.domain?b.hierPartCapture:b.hierPart)+")",j=a.allowRelative?"(?:"+i+"|"+g+")":i;return f.wrap(j+c,h)},f.wrap=function(a,b){return{raw:a=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${a}`,regex:RegExp(`^${a}$`),scheme:b}},f.uriRegex=f.createRegex({}),b.regex=function(a={}){return a.scheme||a.allowRelative||a.relativeOnly||a.allowQuerySquareBrackets||a.domain?f.createRegex(a):f.uriRegex}},1447:(a,b)=>{"use strict";let c={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};b.Parser=class{constructor(a,b={}){if(!b[c.settings]&&b.constants)for(let a in b.constants){let c=b.constants[a];if(null!==c&&!["boolean","number","string"].includes(typeof c))throw Error(`Formula constant ${a} contains invalid ${typeof c} value type`)}this.settings=b[c.settings]?b:Object.assign({[c.settings]:!0,constants:{},functions:{}},b),this.single=null,this._parts=null,this._parse(a)}_parse(a){let d=[],e="",f=0,g=!1,h=a=>{if(f)throw Error("Formula missing closing parenthesis");let h=d.length?d[d.length-1]:null;if(g||e||a){if(h&&"reference"===h.type&&")"===a)return h.type="function",h.value=this._subFormula(e,h.value),void(e="");if(")"===a){let a=new b.Parser(e,this.settings);d.push({type:"segment",value:a})}else if(g){if("]"===g)return d.push({type:"reference",value:e}),void(e="");d.push({type:"literal",value:e})}else if(c.operatorCharacters.includes(e))h&&"operator"===h.type&&c.operators.includes(h.value+e)?h.value+=e:d.push({type:"operator",value:e});else if(e.match(c.numberRx))d.push({type:"constant",value:parseFloat(e)});else if(void 0!==this.settings.constants[e])d.push({type:"constant",value:this.settings.constants[e]});else{if(!e.match(c.tokenRx))throw Error(`Formula contains invalid token: ${e}`);d.push({type:"reference",value:e})}e=""}};for(let b of a)g?b===g?(h(),g=!1):e+=b:f?"("===b?(e+=b,++f):")"===b?--f?e+=b:h(b):e+=b:b in c.literals?g=c.literals[b]:"("===b?(h(),++f):c.operatorCharacters.includes(b)?(h(),e=b,h()):" "!==b?e+=b:h();h();let i=!1;for(let a of d=d.map((a,b)=>"operator"!==a.type||"-"!==a.value||b&&"operator"!==d[b-1].type?a:{type:"operator",value:"n"})){if("operator"===a.type){if(c.operatorsPrefix.includes(a.value))continue;if(!i)throw Error("Formula contains an operator in invalid position");if(!c.operators.includes(a.value))throw Error(`Formula contains an unknown operator ${a.value}`)}else if(i)throw Error("Formula missing expected operator");i=!i}if(!i)throw Error("Formula contains invalid trailing operator");1===d.length&&["reference","literal","constant"].includes(d[0].type)&&(this.single={type:"reference"===d[0].type?"reference":"value",value:d[0].value}),this._parts=d.map(a=>{if("operator"===a.type)return c.operatorsPrefix.includes(a.value)?a:a.value;if("reference"!==a.type)return a.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(a.value))throw Error(`Formula contains invalid reference ${a.value}`);return this.settings.reference?this.settings.reference(a.value):c.reference(a.value)})}_subFormula(a,d){let e=this.settings.functions[d];if("function"!=typeof e)throw Error(`Formula contains unknown function ${d}`);let f=[];if(a){let b="",e=0,g=!1,h=()=>{if(!b)throw Error(`Formula contains function ${d} with invalid arguments ${a}`);f.push(b),b=""};for(let d=0;d<a.length;++d){let f=a[d];g?(b+=f,f===g&&(g=!1)):f in c.literals&&!e?(b+=f,g=c.literals[f]):","!==f||e?(b+=f,"("===f?++e:")"===f&&--e):h()}h()}return f=f.map(a=>new b.Parser(a,this.settings)),function(a){let b=[];for(let c of f)b.push(c.evaluate(a));return e.call(a,...b)}}evaluate(a){let b=this._parts.slice();for(let d=b.length-2;d>=0;--d){let e=b[d];if(e&&"operator"===e.type){let f=b[d+1];b.splice(d+1,1);let g=c.evaluate(f,a);b[d]=c.single(e.value,g)}}return c.operatorsOrder.forEach(d=>{for(let e=1;e<b.length-1;)if(d.includes(b[e])){let d=b[e],f=c.evaluate(b[e-1],a),g=c.evaluate(b[e+1],a);b.splice(e,2);let h=c.calculate(d,f,g);b[e-1]=0===h?0:h}else e+=2}),c.evaluate(b[0],a)}},b.Parser.prototype[c.symbol]=!0,c.reference=function(a){return function(b){return b&&void 0!==b[a]?b[a]:null}},c.evaluate=function(a,b){return null===a?null:"function"==typeof a?a(b):a[c.symbol]?a.evaluate(b):a},c.single=function(a,b){if("!"===a)return!b;let c=-b;return 0===c?0:c},c.calculate=function(a,b,d){if("??"===a)return c.exists(b)?b:d;if("string"==typeof b||"string"==typeof d){if("+"===a)return(b=c.exists(b)?b:"")+(c.exists(d)?d:"")}else switch(a){case"^":return Math.pow(b,d);case"*":return b*d;case"/":return b/d;case"%":return b%d;case"+":return b+d;case"-":return b-d}switch(a){case"<":return b<d;case"<=":return b<=d;case">":return b>d;case">=":return b>=d;case"==":return b===d;case"!=":return b!==d;case"&&":return b&&d;case"||":return b||d}return null},c.exists=function(a){return null!=a}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:a=>{"use strict";a.exports=JSON.parse('{"version":"17.13.3"}')}},b={},function c(d){var e=b[d];if(void 0!==e)return e.exports;var f=b[d]={exports:{}};return a[d](f,f.exports,c),f.exports}(5107)})()},8502:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(7613),e=c(2634),f=d.__importDefault(c(8002)),g=c(6663),h=c(1252),i=c(6218),j=c(9178);b.default=function(a,b){let c=l(a,b),d=m(a,b);return(0,j.getHandler)(c,d)};let k=(a,b,c,e)=>{var g;let h,i;if({getLoginState:i}=b,h=d.__rest(b,["getLoginState"]),c){let a=new URL((null==(g=b.authorizationParams)?void 0:g.redirect_uri)||e.baseURL),d=(0,f.default)(c,a);h=Object.assign(Object.assign({},h),{returnTo:d})}return e.organization&&(h=Object.assign(Object.assign({},h),{authorizationParams:Object.assign({organization:e.organization},h.authorizationParams)})),i&&(h.getLoginState=b=>i(a,b)),h},l=(a,b)=>async(c,d,f={})=>{try{let d=new i.Auth0NextRequest(c),g=await b(d),h=new URL(c.url).searchParams.get("returnTo"),j=new i.Auth0NextResponse(new e.NextResponse);return await a(d,j,k(c,f,h,g)),j.res}catch(a){throw new h.LoginHandlerError(a)}},m=(a,b)=>async(c,d,e={})=>{try{let f=new i.Auth0NextApiRequest(c),h=await b(f);(0,g.assertReqRes)(c,d);let j=c.query.returnTo&&Array.isArray(c.query.returnTo)?c.query.returnTo[0]:c.query.returnTo;return await a(f,new i.Auth0NextApiResponse(d),k(c,e,j,h))}catch(a){throw new h.LoginHandlerError(a)}}},8636:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deleteSub=b.isLoggedOut=void 0;let d=c(7613).__importDefault(c(9284)),e=c(1524),f=a=>{let{session:{store:b},backchannelLogout:c}=a;return"boolean"==typeof c?b:c.store};b.default=function(a,b){let c="function"==typeof a?a:()=>a,g=(0,d.default)();return async(a,d)=>{let h,i=await c(a),j=await b(i);d.setHeader("cache-control","no-store");let k=new URLSearchParams(await a.getBody()).get("logout_token");if(!k)throw new e.BackchannelLogoutError("invalid_request","Missing Logout Token");try{h=await g(k,i,await j.getIssuerMetadata())}catch(a){throw new e.BackchannelLogoutError("invalid_request",a.message)}let{clientID:l,session:{absoluteDuration:m,rolling:n,rollingDuration:o}}=i,p=f(i),q=(n?Math.min(m,o):m)*1e3,r=Date.now()/1e3|0,s={header:{iat:r,uat:r,exp:r+q,maxAge:q},data:{}};try{let{sid:a,sub:b}=h;await Promise.all([a&&p.set(`sid|${l}|${a}`,s),b&&p.set(`sub|${l}|${b}`,s)])}catch(a){throw new e.BackchannelLogoutError("application_error",a.message)}d.send204()}},b.isLoggedOut=async(a,b)=>{let{clientID:c}=b,d=f(b),{sid:e,sub:g}=a,[h,i]=await Promise.all([d.get(`sid|${c}|${e}`),d.get(`sub|${c}|${g}`)]);return!!(h||i)},b.deleteSub=async(a,b)=>{let{clientID:c}=b,d=f(b);await d.delete(`sub|${c}|${a}`)}},8672:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(4970);class e extends d.Auth0Request{constructor(a){super(a)}getUrl(){return this.req.url}getMethod(){return this.req.method}async getBody(){return this.req.text()}getCookies(){let{cookies:a}=this.req;return"function"==typeof a.getAll?this.req.cookies.getAll().reduce((a,{name:b,value:c})=>Object.assign(Object.assign({},a),{[b]:c}),{}):Array.from(a.keys()).reduce((b,c)=>(b[c]=a.get(c),b),{})}}b.default=e},8777:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(1302),f=c(6663),g=c(1509);b.default=function(a){let b=i(a),c=h(a);return a=>(d,e)=>(0,g.isRequest)(d)?c(a)(d,e):b(a)(d,e)};let h=a=>b=>async(c,f)=>{let g=new d.NextResponse,[h]=await (0,e.get)({sessionCache:a,req:c,res:g});if(!h||!h.user)return d.NextResponse.json({error:"not_authenticated",description:"The user does not have an active session or is not authenticated"},{status:401});let i=await b(c,f),j=i instanceof d.NextResponse?i:new d.NextResponse(i.body,i);for(let a of g.cookies.getAll())j.cookies.get(a.name)||j.cookies.set(a);return j},i=a=>b=>async(c,d)=>{(0,f.assertReqRes)(c,d);let e=await a.get(c,d);if(!e||!e.user)return void d.status(401).json({error:"not_authenticated",description:"The user does not have an active session or is not authenticated"});await b(c,d)}},8823:(a,b,c)=>{"use strict";c.d(b,{iC:()=>e}),c(4979);var d=c(5566);function e(){let a=d.Z.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},8940:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2634),e=c(6218),f=c(9178);b.default=function(a,b){let c=g(a,b),d=h(a,b);return(0,f.getHandler)(c,d)};let g=(a,b)=>async c=>{try{let f=new e.Auth0NextRequest(c);if(!(await b(f)).backchannelLogout)return new d.NextResponse("Back-Channel Logout is not enabled.",{status:404});let g=new e.Auth0NextResponse(new d.NextResponse);return await a(f,g),g.res}catch(a){return d.NextResponse.json({error:a.code||"unknown_error",error_description:a.description||a.message},{status:400,headers:{"cache-control":"no-store"}})}},h=(a,b)=>async(c,d)=>{try{let f=new e.Auth0NextApiRequest(c);if(!(await b(f)).backchannelLogout)return void d.status(404).end("Back-Channel Logout is not enabled.");return await a(f,new e.Auth0NextApiResponse(d))}catch(a){d.setHeader("cache-control","no-store"),d.status(400).json({error:a.code||"unknown_error",error_description:a.description||a.message})}}},8970:(a,b,c)=>{"use strict";let d;c.r(b),c.d(b,{default:()=>aP});var e={};async function f(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}c.r(e),c.d(e,{config:()=>aL,default:()=>aK});let g=null;async function h(){if("phase-production-build"===process.env.NEXT_PHASE)return;g||(g=f());let a=await g;if(null==a?void 0:a.register)try{await a.register()}catch(a){throw a.message=`An error occurred while loading instrumentation hook: ${a.message}`,a}}async function i(...a){let b=await f();try{var c;await (null==b||null==(c=b.onRequestError)?void 0:c.call(b,...a))}catch(a){console.error("Error in instrumentation.onRequestError:",a)}}let j=null;function k(){return j||(j=h()),j}function l(a){return`The edge runtime does not support Node.js '${a}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==c.g.process&&(process.env=c.g.process.env,c.g.process=process);try{Object.defineProperty(globalThis,"__import_unsupported",{value:function(a){let b=new Proxy(function(){},{get(b,c){if("then"===c)return{};throw Object.defineProperty(Error(l(a)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},construct(){throw Object.defineProperty(Error(l(a)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})},apply(c,d,e){if("function"==typeof e[0])return e[0](b);throw Object.defineProperty(Error(l(a)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}});return new Proxy({},{get:()=>b})},enumerable:!1,configurable:!1})}catch{}k();var m=c(1583),n=c(6206);let o=Symbol("response"),p=Symbol("passThrough"),q=Symbol("waitUntil");class r{constructor(a,b){this[p]=!1,this[q]=b?{kind:"external",function:b}:{kind:"internal",promises:[]}}respondWith(a){this[o]||(this[o]=Promise.resolve(a))}passThroughOnException(){this[p]=!0}waitUntil(a){if("external"===this[q].kind)return(0,this[q].function)(a);this[q].promises.push(a)}}class s extends r{constructor(a){var b;super(a.request,null==(b=a.context)?void 0:b.waitUntil),this.sourcePage=a.page}get request(){throw Object.defineProperty(new m.CB({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new m.CB({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}var t=c(2742),u=c(388);function v(a,b){let c="string"==typeof b?new URL(b):b,d=new URL(a,b),e=d.origin===c.origin;return{url:e?d.toString().slice(c.origin.length):d.toString(),isRelative:e}}var w=c(4700);let x="next-router-prefetch",y=["rsc","next-router-state-tree",x,"next-hmr-refresh","next-router-segment-prefetch"],z="_rsc";var A=c(1458),B=c(261),C=c(7028),D=c(9183),E=function(a){return a.handleRequest="BaseServer.handleRequest",a.run="BaseServer.run",a.pipe="BaseServer.pipe",a.getStaticHTML="BaseServer.getStaticHTML",a.render="BaseServer.render",a.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",a.renderToResponse="BaseServer.renderToResponse",a.renderToHTML="BaseServer.renderToHTML",a.renderError="BaseServer.renderError",a.renderErrorToResponse="BaseServer.renderErrorToResponse",a.renderErrorToHTML="BaseServer.renderErrorToHTML",a.render404="BaseServer.render404",a}(E||{}),F=function(a){return a.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",a.loadComponents="LoadComponents.loadComponents",a}(F||{}),G=function(a){return a.getRequestHandler="NextServer.getRequestHandler",a.getServer="NextServer.getServer",a.getServerRequestHandler="NextServer.getServerRequestHandler",a.createServer="createServer.createServer",a}(G||{}),H=function(a){return a.compression="NextNodeServer.compression",a.getBuildId="NextNodeServer.getBuildId",a.createComponentTree="NextNodeServer.createComponentTree",a.clientComponentLoading="NextNodeServer.clientComponentLoading",a.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",a.generateStaticRoutes="NextNodeServer.generateStaticRoutes",a.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",a.generatePublicRoutes="NextNodeServer.generatePublicRoutes",a.generateImageRoutes="NextNodeServer.generateImageRoutes.route",a.sendRenderResult="NextNodeServer.sendRenderResult",a.proxyRequest="NextNodeServer.proxyRequest",a.runApi="NextNodeServer.runApi",a.render="NextNodeServer.render",a.renderHTML="NextNodeServer.renderHTML",a.imageOptimizer="NextNodeServer.imageOptimizer",a.getPagePath="NextNodeServer.getPagePath",a.getRoutesManifest="NextNodeServer.getRoutesManifest",a.findPageComponents="NextNodeServer.findPageComponents",a.getFontManifest="NextNodeServer.getFontManifest",a.getServerComponentManifest="NextNodeServer.getServerComponentManifest",a.getRequestHandler="NextNodeServer.getRequestHandler",a.renderToHTML="NextNodeServer.renderToHTML",a.renderError="NextNodeServer.renderError",a.renderErrorToHTML="NextNodeServer.renderErrorToHTML",a.render404="NextNodeServer.render404",a.startResponse="NextNodeServer.startResponse",a.route="route",a.onProxyReq="onProxyReq",a.apiResolver="apiResolver",a.internalFetch="internalFetch",a}(H||{}),I=function(a){return a.startServer="startServer.startServer",a}(I||{}),J=function(a){return a.getServerSideProps="Render.getServerSideProps",a.getStaticProps="Render.getStaticProps",a.renderToString="Render.renderToString",a.renderDocument="Render.renderDocument",a.createBodyResult="Render.createBodyResult",a}(J||{}),K=function(a){return a.renderToString="AppRender.renderToString",a.renderToReadableStream="AppRender.renderToReadableStream",a.getBodyResult="AppRender.getBodyResult",a.fetch="AppRender.fetch",a}(K||{}),L=function(a){return a.executeRoute="Router.executeRoute",a}(L||{}),M=function(a){return a.runHandler="Node.runHandler",a}(M||{}),N=function(a){return a.runHandler="AppRouteRouteHandlers.runHandler",a}(N||{}),O=function(a){return a.generateMetadata="ResolveMetadata.generateMetadata",a.generateViewport="ResolveMetadata.generateViewport",a}(O||{}),P=function(a){return a.execute="Middleware.execute",a}(P||{});let Q=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],R=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"];function S(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}let{context:T,propagation:U,trace:V,SpanStatusCode:W,SpanKind:X,ROOT_CONTEXT:Y}=d=c(3817);class Z extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}let $=(a,b)=>{(function(a){return"object"==typeof a&&null!==a&&a instanceof Z})(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:W.ERROR,message:null==b?void 0:b.message})),a.end()},_=new Map,aa=d.createContextKey("next.rootSpanId"),ab=0,ac={set(a,b,c){a.push({key:b,value:c})}};class ad{getTracerInstance(){return V.getTracer("next.js","0.0.1")}getContext(){return T}getTracePropagationData(){let a=T.active(),b=[];return U.inject(a,b,ac),b}getActiveScopeSpan(){return V.getSpan(null==T?void 0:T.active())}withPropagatedContext(a,b,c){let d=T.active();if(V.getSpanContext(d))return b();let e=U.extract(d,a,c);return T.with(e,b)}trace(...a){var b;let[c,d,e]=a,{fn:f,options:g}="function"==typeof d?{fn:d,options:{}}:{fn:e,options:{...d}},h=g.spanName??c;if(!Q.includes(c)&&"1"!==process.env.NEXT_OTEL_VERBOSE||g.hideSpan)return f();let i=this.getSpanContext((null==g?void 0:g.parentSpan)??this.getActiveScopeSpan()),j=!1;i?(null==(b=V.getSpanContext(i))?void 0:b.isRemote)&&(j=!0):(i=(null==T?void 0:T.active())??Y,j=!0);let k=ab++;return g.attributes={"next.span_name":h,"next.span_type":c,...g.attributes},T.with(i.setValue(aa,k),()=>this.getTracerInstance().startActiveSpan(h,g,a=>{let b="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,d=()=>{_.delete(k),b&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&R.includes(c||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(c.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:b,end:performance.now()})};j&&_.set(k,new Map(Object.entries(g.attributes??{})));try{if(f.length>1)return f(a,b=>$(a,b));let b=f(a);if(S(b))return b.then(b=>(a.end(),b)).catch(b=>{throw $(a,b),b}).finally(d);return a.end(),d(),b}catch(b){throw $(a,b),d(),b}}))}wrap(...a){let b=this,[c,d,e]=3===a.length?a:[a[0],{},a[1]];return Q.includes(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof e&&(a=a.apply(this,arguments));let f=arguments.length-1,g=arguments[f];if("function"!=typeof g)return b.trace(c,a,()=>e.apply(this,arguments));{let d=b.getContext().bind(T.active(),g);return b.trace(c,a,(a,b)=>(arguments[f]=function(a){return null==b||b(a),d.apply(this,arguments)},e.apply(this,arguments)))}}:e}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?V.setSpan(T.active(),a):void 0}getRootSpanAttributes(){let a=T.active().getValue(aa);return _.get(a)}setRootSpanAttribute(a,b){let c=T.active().getValue(aa),d=_.get(c);d&&d.set(a,b)}}let ae=(()=>{let a=new ad;return()=>a})(),af="__prerender_bypass";Symbol("__next_preview_data"),Symbol(af);class ag{constructor(a,b,c,d){var e;let f=a&&function(a,b){let c=A.o.from(a.headers);return{isOnDemandRevalidate:c.get(D.kz)===b.previewModeId,revalidateOnlyGenerated:c.has(D.r4)}}(b,a).isOnDemandRevalidate,g=null==(e=c.get(af))?void 0:e.value;this._isEnabled=!!(!f&&g&&a&&g===a.previewModeId),this._previewModeId=null==a?void 0:a.previewModeId,this._mutableCookies=d}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:af,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:af,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function ah(a,b){if("x-middleware-set-cookie"in a.headers&&"string"==typeof a.headers["x-middleware-set-cookie"]){let c=a.headers["x-middleware-set-cookie"],d=new Headers;for(let a of(0,n.RD)(c))d.append("set-cookie",a);for(let a of new C.VO(d).getAll())b.set(a)}}var ai=c(1128),aj=c(1213),ak=c.n(aj),al=c(9809),am=c(5379),an=c(3788);c(5356).Buffer,new an.q(0x3200000,a=>a.size),process.env.NEXT_PRIVATE_DEBUG_CACHE&&console.debug.bind(console,"DefaultCacheHandler:"),process.env.NEXT_PRIVATE_DEBUG_CACHE&&((a,...b)=>{console.log(`use-cache: ${a}`,...b)}),Symbol.for("@next/cache-handlers");let ao=Symbol.for("@next/cache-handlers-map"),ap=Symbol.for("@next/cache-handlers-set"),aq=globalThis;function ar(){if(aq[ao])return aq[ao].entries()}async function as(a,b){if(!a)return b();let c=at(a);try{return await b()}finally{let b=function(a,b){let c=new Set(a.pendingRevalidatedTags),d=new Set(a.pendingRevalidateWrites);return{pendingRevalidatedTags:b.pendingRevalidatedTags.filter(a=>!c.has(a)),pendingRevalidates:Object.fromEntries(Object.entries(b.pendingRevalidates).filter(([b])=>!(b in a.pendingRevalidates))),pendingRevalidateWrites:b.pendingRevalidateWrites.filter(a=>!d.has(a))}}(c,at(a));await av(a,b)}}function at(a){return{pendingRevalidatedTags:a.pendingRevalidatedTags?[...a.pendingRevalidatedTags]:[],pendingRevalidates:{...a.pendingRevalidates},pendingRevalidateWrites:a.pendingRevalidateWrites?[...a.pendingRevalidateWrites]:[]}}async function au(a,b){if(0===a.length)return;let c=[];b&&c.push(b.revalidateTag(a));let d=function(){if(aq[ap])return aq[ap].values()}();if(d)for(let b of d)c.push(b.expireTags(...a));await Promise.all(c)}async function av(a,b){let c=(null==b?void 0:b.pendingRevalidatedTags)??a.pendingRevalidatedTags??[],d=(null==b?void 0:b.pendingRevalidates)??a.pendingRevalidates??{},e=(null==b?void 0:b.pendingRevalidateWrites)??a.pendingRevalidateWrites??[];return Promise.all([au(c,a.incrementalCache),...Object.values(d),...e])}var aw=c(7669),ax=c(5566);class ay{constructor({waitUntil:a,onClose:b,onTaskError:c}){this.workUnitStores=new Set,this.waitUntil=a,this.onClose=b,this.onTaskError=c,this.callbackQueue=new(ak()),this.callbackQueue.pause()}after(a){if(S(a))this.waitUntil||az(),this.waitUntil(a.catch(a=>this.reportTaskError("promise",a)));else if("function"==typeof a)this.addCallback(a);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(a){this.waitUntil||az();let b=ai.FP.getStore();b&&this.workUnitStores.add(b);let c=ax.Z.getStore(),d=c?c.rootTaskSpawnPhase:null==b?void 0:b.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let e=(0,aw.cg)(async()=>{try{await ax.Z.run({rootTaskSpawnPhase:d},()=>a())}catch(a){this.reportTaskError("function",a)}});this.callbackQueue.add(e)}async runCallbacksOnClose(){return await new Promise(a=>this.onClose(a)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let a of this.workUnitStores)a.phase="after";let a=am.J.getStore();if(!a)throw Object.defineProperty(new al.z("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return as(a,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(a,b){if(console.error("promise"===a?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",b),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,b)}catch(a){console.error(Object.defineProperty(new al.z("`onTaskError` threw while handling an error thrown from an `after` task",{cause:a}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function az(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function aA(a){let b,c={then:(d,e)=>(b||(b=a()),b.then(a=>{c.value=a}).catch(()=>{}),b.then(d,e))};return c}class aB{onClose(a){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",a),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function aC(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}let aD=Symbol.for("@next/request-context");async function aE(a,b,c){let d=[],e=c&&c.size>0;for(let b of(a=>{let b=["/layout"];if(a.startsWith("/")){let c=a.split("/");for(let a=1;a<c.length+1;a++){let d=c.slice(0,a).join("/");d&&(d.endsWith("/page")||d.endsWith("/route")||(d=`${d}${!d.endsWith("/")?"/":""}layout`),b.push(d))}}return b})(a))b=`${D.gW}${b}`,d.push(b);if(b.pathname&&!e){let a=`${D.gW}${b.pathname}`;d.push(a)}return{tags:d,expirationsByCacheKind:function(a){let b=new Map,c=ar();if(c)for(let[d,e]of c)"getExpiration"in e&&b.set(d,aA(async()=>e.getExpiration(...a)));return b}(d)}}class aF extends t.J{constructor(a){super(a.input,a.init),this.sourcePage=a.page}get request(){throw Object.defineProperty(new m.CB({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new m.CB({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new m.CB({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let aG={keys:a=>Array.from(a.keys()),get:(a,b)=>a.get(b)??void 0},aH=(a,b)=>ae().withPropagatedContext(a.headers,b,aG),aI=!1;async function aJ(a){var b;let d,e;if(!aI&&(aI=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:a,wrapRequestHandler:b}=c(7720);a(),aH=b(aH)}await k();let f=void 0!==globalThis.__BUILD_MANIFEST;a.request.url=a.request.url.replace(/\.rsc($|\?)/,"$1");let g=a.bypassNextUrl?new URL(a.request.url):new w.X(a.request.url,{headers:a.request.headers,nextConfig:a.request.nextConfig});for(let a of[...g.searchParams.keys()]){let b=g.searchParams.getAll(a),c=(0,n.wN)(a);if(c){for(let a of(g.searchParams.delete(c),b))g.searchParams.append(c,a);g.searchParams.delete(a)}}let h=process.env.__NEXT_BUILD_ID||"";"buildId"in g&&(h=g.buildId||"",g.buildId="");let i=(0,n.p$)(a.request.headers),j=i.has("x-nextjs-data"),l="1"===i.get("rsc");j&&"/index"===g.pathname&&(g.pathname="/");let m=new Map;if(!f)for(let a of y){let b=i.get(a);null!==b&&(m.set(a,b),i.delete(a))}let o=g.searchParams.get(z),p=new aF({page:a.page,input:(function(a){let b="string"==typeof a,c=b?new URL(a):a;return c.searchParams.delete(z),b?c.toString():c})(g).toString(),init:{body:a.request.body,headers:i,method:a.request.method,nextConfig:a.request.nextConfig,signal:a.request.signal}});j&&Object.defineProperty(p,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&a.IncrementalCache&&(globalThis.__incrementalCache=new a.IncrementalCache({CurCacheHandler:a.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:a.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:aC()})}));let r=a.request.waitUntil??(null==(b=function(){let a=globalThis[aD];return null==a?void 0:a.get()}())?void 0:b.waitUntil),t=new s({request:p,page:a.page,context:r?{waitUntil:r}:void 0});if((d=await aH(p,()=>{if("/middleware"===a.page||"/src/middleware"===a.page){let b=t.waitUntil.bind(t),c=new aB;return ae().trace(P.execute,{spanName:`middleware ${p.method} ${p.nextUrl.pathname}`,attributes:{"http.target":p.nextUrl.pathname,"http.method":p.method}},async()=>{try{var d,f,g,i,j,k;let l=aC(),m=await aE("/",p.nextUrl,null),n=(j=p.nextUrl,k=a=>{e=a},function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){c&&c.setHeader("Set-Cookie",a)}let n={};return{type:"request",phase:a,implicitTags:f,url:{pathname:d.pathname,search:d.search??""},rootParams:e,get headers(){return n.headers||(n.headers=function(a){let b=A.o.from(a);for(let a of y)b.delete(a);return A.o.seal(b)}(b.headers)),n.headers},get cookies(){if(!n.cookies){let a=new C.tm(A.o.from(b.headers));ah(b,a),n.cookies=B.Ck.seal(a)}return n.cookies},set cookies(value){n.cookies=value},get mutableCookies(){if(!n.mutableCookies){let a=function(a,b){let c=new C.tm(A.o.from(a));return B.K8.wrap(c,b)}(b.headers,g||(c?m:void 0));ah(b,a),n.mutableCookies=a}return n.mutableCookies},get userspaceMutableCookies(){return n.userspaceMutableCookies||(n.userspaceMutableCookies=(0,B.EJ)(this)),n.userspaceMutableCookies},get draftMode(){return n.draftMode||(n.draftMode=new ag(i,b,this.cookies,this.mutableCookies)),n.draftMode},renderResumeDataCache:h??null,isHmrRefresh:j,serverComponentsHmrCache:k||globalThis.__serverComponentsHmrCache,devFallbackParams:null}}("action",p,void 0,j,{},m,k,void 0,l,!1,void 0,null)),o=function({page:a,renderOpts:b,isPrefetchRequest:c,buildId:d,previouslyRevalidatedTags:e}){var f;let g=!b.shouldWaitOnAllReady&&!b.supportsDynamicResponse&&!b.isDraftMode&&!b.isPossibleServerAction,h=b.dev??!1,i=h||g&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),j={isStaticGeneration:g,page:a,route:(f=a.split("/").reduce((a,b,c,d)=>b?"("===b[0]&&b.endsWith(")")||"@"===b[0]||("page"===b||"route"===b)&&c===d.length-1?a:a+"/"+b:a,"")).startsWith("/")?f:"/"+f,incrementalCache:b.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:b.cacheLifeProfiles,isRevalidate:b.isRevalidate,isBuildTimePrerendering:b.nextExport,hasReadableErrorStacks:b.hasReadableErrorStacks,fetchCache:b.fetchCache,isOnDemandRevalidate:b.isOnDemandRevalidate,isDraftMode:b.isDraftMode,isPrefetchRequest:c,buildId:d,reactLoadableManifest:(null==b?void 0:b.reactLoadableManifest)||{},assetPrefix:(null==b?void 0:b.assetPrefix)||"",afterContext:function(a){let{waitUntil:b,onClose:c,onAfterTaskError:d}=a;return new ay({waitUntil:b,onClose:c,onTaskError:d})}(b),cacheComponentsEnabled:b.experimental.cacheComponents,dev:h,previouslyRevalidatedTags:e,refreshTagsByCacheKind:function(){let a=new Map,b=ar();if(b)for(let[c,d]of b)"refreshTags"in d&&a.set(c,aA(async()=>d.refreshTags()));return a}(),runInCleanSnapshot:(0,aw.$p)(),shouldTrackFetchMetrics:i};return b.store=j,j}({page:"/",renderOpts:{cacheLifeProfiles:null==(f=a.request.nextConfig)||null==(d=f.experimental)?void 0:d.cacheLife,experimental:{isRoutePPREnabled:!1,cacheComponents:!1,authInterrupts:!!(null==(i=a.request.nextConfig)||null==(g=i.experimental)?void 0:g.authInterrupts)},supportsDynamicResponse:!0,waitUntil:b,onClose:c.onClose.bind(c),onAfterTaskError:void 0},isPrefetchRequest:"1"===p.headers.get(x),buildId:h??"",previouslyRevalidatedTags:[]});return await am.J.run(o,()=>ai.FP.run(n,a.handler,p,t))}finally{setTimeout(()=>{c.dispatchClose()},0)}})}return a.handler(p,t)}))&&!(d instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});d&&e&&d.headers.set("set-cookie",e);let D=null==d?void 0:d.headers.get("x-middleware-rewrite");if(d&&D&&(l||!f)){let b=new w.X(D,{forceLocale:!0,headers:a.request.headers,nextConfig:a.request.nextConfig});f||b.host!==p.nextUrl.host||(b.buildId=h||b.buildId,d.headers.set("x-middleware-rewrite",String(b)));let{url:c,isRelative:e}=v(b.toString(),g.toString());!f&&j&&d.headers.set("x-nextjs-rewrite",c),l&&e&&(g.pathname!==b.pathname&&d.headers.set("x-nextjs-rewritten-path",b.pathname),g.search!==b.search&&d.headers.set("x-nextjs-rewritten-query",b.search.slice(1)))}if(d&&D&&l&&o){let a=new URL(D);a.searchParams.has(z)||(a.searchParams.set(z,o),d.headers.set("x-middleware-rewrite",a.toString()))}let E=null==d?void 0:d.headers.get("Location");if(d&&E&&!f){let b=new w.X(E,{forceLocale:!1,headers:a.request.headers,nextConfig:a.request.nextConfig});d=new Response(d.body,d),b.host===g.host&&(b.buildId=h||b.buildId,d.headers.set("Location",b.toString())),j&&(d.headers.delete("Location"),d.headers.set("x-nextjs-redirect",v(b.toString(),g.toString()).url))}let F=d||u.R.next(),G=F.headers.get("x-middleware-override-headers"),H=[];if(G){for(let[a,b]of m)F.headers.set(`x-middleware-request-${a}`,b),H.push(a);H.length>0&&F.headers.set("x-middleware-override-headers",G+","+H.join(","))}return{response:F,waitUntil:("internal"===t[q].kind?Promise.all(t[q].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:p.fetchMetrics}}let aK=(0,c(4400).withMiddlewareAuthRequired)(),aL={matcher:["/dashboard/:path*","/settings/:path*","/api/student-data/:path*"]};c(7128);let aM={...e},aN=aM.middleware||aM.default,aO="/src/middleware";if("function"!=typeof aN)throw Object.defineProperty(Error(`The Middleware "${aO}" must export a \`middleware\` or a \`default\` function`),"__NEXT_ERROR_CODE",{value:"E120",enumerable:!1,configurable:!0});function aP(a){return aJ({...a,page:aO,handler:async(...a)=>{try{return await aN(...a)}catch(e){let b=a[0],c=new URL(b.url),d=c.pathname+c.search;throw await i(e,{path:d,method:b.method,headers:Object.fromEntries(b.headers.entries())},{routerKind:"Pages Router",routePath:"/middleware",routeType:"middleware",revalidateReason:void 0}),e}}})}},9088:(a,b)=>{"use strict";b.parse=function(a,b){if("string"!=typeof a)throw TypeError("argument str must be a string");var c={},e=a.length;if(e<2)return c;var f=b&&b.decode||k,g=0,h=0,l=0;do{if(-1===(h=a.indexOf("=",g)))break;if(-1===(l=a.indexOf(";",g)))l=e;else if(h>l){g=a.lastIndexOf(";",h-1)+1;continue}var m=i(a,g,h),n=j(a,h,m),o=a.slice(m,n);if(!d.call(c,o)){var p=i(a,h+1,l),q=j(a,l,p);34===a.charCodeAt(p)&&34===a.charCodeAt(q-1)&&(p++,q--);var r=a.slice(p,q);c[o]=function(a,b){try{return b(a)}catch(b){return a}}(r,f)}g=l+1}while(g<e);return c},b.serialize=function(a,b,d){var i=d&&d.encode||encodeURIComponent;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!e.test(a))throw TypeError("argument name is invalid");var j=i(b);if(!f.test(j))throw TypeError("argument val is invalid");var k=a+"="+j;if(!d)return k;if(null!=d.maxAge){var l=Math.floor(d.maxAge);if(!isFinite(l))throw TypeError("option maxAge is invalid");k+="; Max-Age="+l}if(d.domain){if(!g.test(d.domain))throw TypeError("option domain is invalid");k+="; Domain="+d.domain}if(d.path){if(!h.test(d.path))throw TypeError("option path is invalid");k+="; Path="+d.path}if(d.expires){var m,n=d.expires;if(m=n,"[object Date]"!==c.call(m)||isNaN(n.valueOf()))throw TypeError("option expires is invalid");k+="; Expires="+n.toUTCString()}if(d.httpOnly&&(k+="; HttpOnly"),d.secure&&(k+="; Secure"),d.partitioned&&(k+="; Partitioned"),d.priority)switch("string"==typeof d.priority?d.priority.toLowerCase():d.priority){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(d.sameSite)switch("string"==typeof d.sameSite?d.sameSite.toLowerCase():d.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return k};var c=Object.prototype.toString,d=Object.prototype.hasOwnProperty,e=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,f=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,g=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,h=/^[\u0020-\u003A\u003D-\u007E]*$/;function i(a,b,c){do{var d=a.charCodeAt(b);if(32!==d&&9!==d)return b}while(++b<c);return c}function j(a,b,c){for(;b>c;){var d=a.charCodeAt(--b);if(32!==d&&9!==d)return b+1}return c}function k(a){return -1!==a.indexOf("%")?decodeURIComponent(a):a}},9165:(a,b,c)=>{"use strict";var d=c(5356).Buffer;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{handleFetch:function(){return h},interceptFetch:function(){return i},reader:function(){return f}});let e=c(5392),f={url:a=>a.url,header:(a,b)=>a.headers.get(b)};async function g(a,b){let{url:c,method:e,headers:f,body:g,cache:h,credentials:i,integrity:j,mode:k,redirect:l,referrer:m,referrerPolicy:n}=b;return{testData:a,api:"fetch",request:{url:c,method:e,headers:[...Array.from(f),["next-test-stack",function(){let a=(Error().stack??"").split("\n");for(let b=1;b<a.length;b++)if(a[b].length>0){a=a.slice(b);break}return(a=(a=(a=a.filter(a=>!a.includes("/next/dist/"))).slice(0,5)).map(a=>a.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:g?d.from(await b.arrayBuffer()).toString("base64"):null,cache:h,credentials:i,integrity:j,mode:k,redirect:l,referrer:m,referrerPolicy:n}}}async function h(a,b){let c=(0,e.getTestReqInfo)(b,f);if(!c)return a(b);let{testData:h,proxyPort:i}=c,j=await g(h,b),k=await a(`http://localhost:${i}`,{method:"POST",body:JSON.stringify(j),next:{internal:!0}});if(!k.ok)throw Object.defineProperty(Error(`Proxy request failed: ${k.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let l=await k.json(),{api:m}=l;switch(m){case"continue":return a(b);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${b.method} ${b.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":let{status:n,headers:o,body:p}=l.response;return new Response(p?d.from(p,"base64"):null,{status:n,headers:new Headers(o)});default:return m}}function i(a){return c.g.fetch=function(b,c){var d;return(null==c||null==(d=c.next)?void 0:d.internal)?a(b,c):h(a,new Request(b,c))},()=>{c.g.fetch=a}}},9178:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getHandler=void 0;let d=c(1509);b.getHandler=(a,b)=>(c,e,f)=>(0,d.isRequest)(c)?a(c,e,f):"socket"in c?b(c,e,f):(e,f)=>{let g="function"==typeof c?c(e):c;return(0,d.isRequest)(e)?a(e,f,g):b(e,f,g)}},9183:(a,b,c)=>{"use strict";c.d(b,{AA:()=>d,gW:()=>h,h:()=>e,kz:()=>f,r4:()=>g});let d="nxtP",e="nxtI",f="x-prerender-revalidate",g="x-prerender-revalidate-if-generated",h="_N_T_",i={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};({...i,GROUP:{builtinReact:[i.reactServerComponents,i.actionBrowser],serverOnly:[i.reactServerComponents,i.actionBrowser,i.instrument,i.middleware],neutralTarget:[i.apiNode,i.apiEdge],clientOnly:[i.serverSideRendering,i.appPagesBrowser],bundled:[i.reactServerComponents,i.actionBrowser,i.serverSideRendering,i.appPagesBrowser,i.shared,i.instrument,i.middleware],appPages:[i.reactServerComponents,i.serverSideRendering,i.appPagesBrowser,i.actionBrowser]}})},9284:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(2743);b.default=function(){let a;return async(b,c,e)=>{let f;"RS256"===c.idTokenSigningAlg?(a||(a=(0,d.createRemoteJWKSet)(new URL(e.jwks_uri))),f=a):f=new TextEncoder().encode(c.clientSecret);let{payload:g}=await (0,d.jwtVerify)(b,f,{issuer:e.issuer,audience:c.clientID,algorithms:[c.idTokenSigningAlg],requiredClaims:["iat"]});if(!("sid"in g)&&!("sub"in g))throw Error('either "sid" or "sub" (or both) claims must be present');if("nonce"in g)throw Error('"nonce" claim is prohibited');if(!("events"in g))throw Error('"events" claim is missing');if("object"!=typeof g.events||null===g.events)throw Error('"events" claim must be an object');if(!("http://schemas.openid.net/event/backchannel-logout"in g.events))throw Error('"http://schemas.openid.net/event/backchannel-logout" member is missing in the "events" claim');if("object"!=typeof g.events["http://schemas.openid.net/event/backchannel-logout"])throw Error('"http://schemas.openid.net/event/backchannel-logout" member in the "events" claim must be an object');return g}}},9437:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AbstractSession=void 0;let d=c(7613),e=(0,d.__importDefault(c(2252)).default)("session"),f=()=>Date.now()/1e3|0,g=(a,b)=>{if(!a)throw Error(b)};class h{constructor(a){this.getConfig="function"==typeof a?a:()=>a}async read(a){let{rollingDuration:b,absoluteDuration:c}=(await this.getConfig(a)).session;try{let d=await this.getSession(a);if(d){let{header:a,data:e}=d,{iat:h,uat:i,exp:j}=a;return g(j>f(),"it is expired based on options when it was established"),b&&g(i+b>f(),"it is expired based on current rollingDuration rules"),"number"==typeof c&&g(h+c>f(),"it is expired based on current absoluteDuration rules"),[e,h]}}catch(a){e("error handling session %O",a)}return[]}async save(a,b,c,e){let g=await this.getConfig(a),h=g.session.cookie,{transient:i}=h,j=d.__rest(h,["transient"]);if(!c)return void await this.deleteSession(a,b,j);let k=f(),l="number"==typeof e?e:k,m=this.calculateExp(l,k,g),n=Object.assign({},j);i||(n.expires=new Date(1e3*m)),await this.setSession(a,b,c,k,l,m,n,void 0===e)}calculateExp(a,b,c){let{absoluteDuration:d}=c.session,{rolling:e,rollingDuration:f}=c.session;return"number"!=typeof d?b+f:e?Math.min(b+f,a+d):a+d}}b.AbstractSession=h},9513:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(1931),e=c(2312);class f{constructor(a){this.getConfig="function"==typeof a?a:()=>a}async getKeys(a){if(!this.keys){let b=a.secret,c=Array.isArray(b)?b:[b];this.keys=await Promise.all(c.map(e.signing))}return this.keys}async save(a,b,c,{sameSite:e="none",value:f}){let g="none"===e,h=await this.getConfig(b),{domain:i,path:j,secure:k}=h.transactionCookie,l={httpOnly:!0,secure:k,domain:i,path:j},[m]=await this.getKeys(h);{let b=await (0,d.generateCookieValue)(a,f,m);c.setCookie(a,b,Object.assign(Object.assign({},l),{sameSite:e,secure:!!g||l.secure}))}if(g&&h.legacySameSiteCookie){let b=await (0,d.generateCookieValue)(`_${a}`,f,m);c.setCookie(`_${a}`,b,l)}return f}async read(a,b,c){let e=b.getCookies(),f=e[a],g=await this.getConfig(b),h=g.transactionCookie,i=await this.getKeys(g),j=await (0,d.getCookieValue)(a,f,i);if(c.clearCookie(a,h),g.legacySameSiteCookie){let b=`_${a}`;if(!j){let a=e[b];j=await (0,d.getCookieValue)(b,a,i)}c.clearCookie(b,h)}return j}}b.default=f},9515:(a,b,c)=>{"use strict";c.d(b,{X:()=>function a(b){if((0,g.p)(b)||(0,f.C)(b)||(0,i.h)(b)||(0,h.I3)(b)||"object"==typeof b&&null!==b&&b.$$typeof===e||(0,d.Ts)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}});var d=c(5770);let e=Symbol.for("react.postpone");var f=c(2340),g=c(7128),h=c(107),i=c(6159)},9809:(a,b,c)=>{"use strict";c.d(b,{z:()=>d});class d extends Error{constructor(a,b){super("Invariant: "+(a.endsWith(".")?a:a+".")+" This is a bug in Next.js.",b),this.name="InvariantError"}}},9841:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(1302);b.default=function(a){return async(b,c)=>{let[e]=await (0,d.get)({req:b,res:c,sessionCache:a});return e}}}},a=>{var b=a(a.s=8970);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_src/middleware"]=b}]);
//# sourceMappingURL=middleware.js.map